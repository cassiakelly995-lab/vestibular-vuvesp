<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNESP Study Hub â€” Cassia</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300;1,400&family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet">

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, doc, setDoc, getDoc, collection, getDocs, deleteDoc, serverTimestamp, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
  const firebaseConfig = {
    apiKey: "AIzaSyD_QLNBMIYh_6SnTYfjjG0N4eDxfRwPuEE",
    authDomain: "painel-da-cassia-concurso.firebaseapp.com",
    projectId: "painel-da-cassia-concurso",
    storageBucket: "painel-da-cassia-concurso.firebasestorage.app",
    messagingSenderId: "88462134882",
    appId: "1:88462134882:web:946223397c13ca8519cb3b"
  };
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const UID = "cassia_estudo";
  window._uid = UID;
  document.getElementById("fb-dot").style.background="#c9a84c";

  window.fbSaveProgress = async()=>{
    try{ await setDoc(doc(db,"usuarios",UID,"dados","progresso"),{studied:window.studied||{},qOk:window.qOk||0,qErr:window.qErr||0,updatedAt:serverTimestamp()}); }catch(e){console.error(e);}
  };
  window.fbSaveEssay = async(titulo,tema,tipo,texto,scores,feedback)=>{
    try{
      const id="essay_"+Date.now();
      await setDoc(doc(db,"usuarios",UID,"redacoes",id),{id,titulo,tema,tipo,texto,c1:scores?.c1||0,c2:scores?.c2||0,c3:scores?.c3||0,c4:scores?.c4||0,c5:scores?.c5||0,total:scores?.total||0,feedback:feedback||"",savedAt:serverTimestamp()});
      return id;
    }catch(e){console.error(e);return null;}
  };
  window.fbGetEssays = async()=>{
    try{
      const snap=await getDocs(collection(db,"usuarios",UID,"redacoes"));
      return snap.docs.map(d=>d.data()).sort((a,b)=>(b.savedAt?.seconds||0)-(a.savedAt?.seconds||0));
    }catch(e){console.error(e);return[];}
  };
  window.fbDeleteEssay = async(id)=>{ try{await deleteDoc(doc(db,"usuarios",UID,"redacoes",id));}catch(e){console.error(e);} };

  window.fbSaveNotebook = async(nb)=>{
    try{ await setDoc(doc(db,"usuarios",UID,"cadernos",nb.id),{...nb,updatedAt:serverTimestamp()}); }catch(e){console.error(e);}
  };
  window.fbGetNotebooks = async()=>{
    try{
      const snap=await getDocs(collection(db,"usuarios",UID,"cadernos"));
      return snap.docs.map(d=>d.data()).sort((a,b)=>(b.updatedAt?.seconds||0)-(a.updatedAt?.seconds||0));
    }catch(e){console.error(e);return[];}
  };
  window.fbDeleteNotebook = async(id)=>{ try{await deleteDoc(doc(db,"usuarios",UID,"cadernos",id));}catch(e){console.error(e);} };

  async function loadAll(){
    try{
      const snap=await getDoc(doc(db,"usuarios",UID,"dados","progresso"));
      if(snap.exists()){const d=snap.data();window.studied=d.studied||{};window.qOk=d.qOk||0;window.qErr=d.qErr||0;}
      if(typeof window.render==="function")window.render();
      document.getElementById("fb-dot").style.background="#c9a84c";
      document.getElementById("fb-label").textContent="Firebase ativo";
    }catch(e){document.getElementById("fb-label").textContent="Offline";}
  }
  loadAll();
</script>

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS â€” PRETO & DOURADO LUXUOSO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
  --k:#000000;--k1:#080808;--k2:#0f0f0f;--k3:#161616;--k4:#1e1e1e;--k5:#252525;
  --g:#c9a84c;--g2:#e8c96a;--g3:#f5e199;--g4:#a07a30;--g5:#7a5c1e;
  --g-dim:rgba(201,168,76,.12);--g-glow:rgba(201,168,76,.25);
  --txt:#f0e8d0;--sub:#8a7a5a;--dim:#4a4030;--ghost:#2a2418;
  --ok:#4a9e6a;--no:#9e4a4a;--cy:#4a7a9e;
  --r:10px;--r2:7px;--r3:16px;
  --sh:0 4px 32px rgba(0,0,0,.7);--sh2:0 12px 60px rgba(0,0,0,.85);
  --gold-sh:0 0 30px rgba(201,168,76,.2);
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-font-smoothing:antialiased}
html{scroll-behavior:smooth}
body{
  font-family:'Crimson Pro',serif;
  background:var(--k1);
  color:var(--txt);
  min-height:100vh;
  overflow-x:hidden;
  cursor:default;
}

/* â”€â”€ FUNDO TEXTURIZADO â”€â”€ */
body::before{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:0;
  background:
    radial-gradient(ellipse 70% 50% at 20% 10%,rgba(201,168,76,.06) 0%,transparent 60%),
    radial-gradient(ellipse 50% 40% at 80% 90%,rgba(201,168,76,.04) 0%,transparent 60%),
    repeating-linear-gradient(45deg,transparent,transparent 40px,rgba(201,168,76,.012) 40px,rgba(201,168,76,.012) 41px);
}
body::after{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:0;
  opacity:.025;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size:200px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hdr{
  position:sticky;top:0;z-index:300;
  background:rgba(0,0,0,.92);
  backdrop-filter:blur(32px);
  border-bottom:1px solid rgba(201,168,76,.2);
}
.hdr-in{
  max-width:1440px;margin:0 auto;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 32px;height:68px;gap:20px;
}
.brand{display:flex;align-items:center;gap:14px}
.brand-emblem{
  width:42px;height:42px;border-radius:10px;flex-shrink:0;
  background:linear-gradient(135deg,var(--g5),var(--g),var(--g3));
  display:flex;align-items:center;justify-content:center;
  font-size:20px;box-shadow:var(--gold-sh),inset 0 1px 0 rgba(255,255,255,.15);
  position:relative;
}
.brand-emblem::after{content:"";position:absolute;inset:1px;border-radius:9px;border:1px solid rgba(201,168,76,.3);}
.brand-text .name{
  font-family:'Playfair Display',serif;font-size:19px;font-weight:700;
  color:var(--g2);letter-spacing:.5px;line-height:1.1;
}
.brand-text .sub{font-size:10px;color:var(--sub);font-family:'JetBrains Mono',monospace;margin-top:2px;letter-spacing:.8px;text-transform:uppercase;}
.hdr-info{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.hdr-chip{
  background:var(--g-dim);border:1px solid rgba(201,168,76,.2);
  border-radius:20px;padding:4px 13px;
  font-size:11px;color:var(--sub);font-family:'JetBrains Mono',monospace;white-space:nowrap;
}
.hdr-chip b{color:var(--g2)}
.fb-status{display:flex;align-items:center;gap:7px;font-size:11px;color:var(--sub);font-family:'JetBrains Mono',monospace;}
.fb-dot{width:7px;height:7px;border-radius:50%;background:#4a4030;transition:background .5s;flex-shrink:0;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.nav{
  position:sticky;top:68px;z-index:200;
  background:rgba(0,0,0,.88);
  backdrop-filter:blur(24px);
  border-bottom:1px solid rgba(201,168,76,.1);
  overflow-x:auto;
}
.nav::-webkit-scrollbar{display:none}
.nav-in{max-width:1440px;margin:0 auto;display:flex;padding:0 32px;gap:2px;}
.nb{
  background:none;border:none;border-bottom:2px solid transparent;
  color:var(--sub);padding:15px 20px;cursor:pointer;
  font-size:11px;font-family:'JetBrains Mono',monospace;font-weight:500;
  white-space:nowrap;transition:all .25s;letter-spacing:.6px;
  display:flex;align-items:center;gap:8px;text-transform:uppercase;
}
.nb:hover{color:var(--g2)}
.nb.on{color:var(--g);border-bottom-color:var(--g);text-shadow:0 0 20px rgba(201,168,76,.4);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main{max-width:1440px;margin:0 auto;padding:32px 32px 80px;position:relative;z-index:1;}
.tab{display:none}.tab.active{display:block;animation:rise .35s cubic-bezier(.4,0,.2,1)}
@keyframes rise{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEÃ‡ÃƒO TÃTULO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sec-hd{margin-bottom:26px}
.sec-title{
  font-family:'Playfair Display',serif;font-size:30px;font-weight:700;
  color:var(--g2);line-height:1.2;margin-bottom:5px;
  text-shadow:0 0 40px rgba(201,168,76,.3);
}
.sec-title em{font-style:italic;color:var(--g3)}
.sec-sub{font-size:14px;color:var(--sub);line-height:1.6;font-family:'Crimson Pro',serif;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTROS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.fbar{display:flex;gap:7px;flex-wrap:wrap;align-items:center;margin-bottom:11px}
.flabel{font-size:10px;color:var(--dim);font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:.8px;margin-right:4px}
.fc{
  background:var(--k3);border:1px solid rgba(201,168,76,.15);
  border-radius:20px;padding:5px 14px;cursor:pointer;
  font-size:11px;font-weight:500;font-family:'JetBrains Mono',monospace;
  transition:all .2s;color:var(--sub);letter-spacing:.3px;
}
.fc:hover{border-color:rgba(201,168,76,.4);color:var(--g2)}
.fc.on{background:var(--g-dim);border-color:var(--g);color:var(--g2);}
.dbar{display:flex;gap:5px}
.dc{background:var(--k3);border:1px solid rgba(201,168,76,.12);border-radius:7px;padding:5px 13px;cursor:pointer;font-size:11px;font-weight:500;font-family:'JetBrains Mono',monospace;transition:all .2s;color:var(--sub);}
.dc.on[data-d="0"]{background:var(--k4);border-color:rgba(201,168,76,.3);color:var(--txt)}
.dc.on[data-d="1"]{background:rgba(74,158,106,.1);border-color:var(--ok);color:#7ecfa0}
.dc.on[data-d="2"]{background:rgba(201,168,76,.1);border-color:var(--g);color:var(--g2)}
.dc.on[data-d="3"]{background:rgba(158,74,74,.1);border-color:var(--no);color:#cf9090}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROGRESS STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.prog-strip{
  background:var(--k2);border:1px solid rgba(201,168,76,.15);
  border-radius:var(--r);padding:16px 22px;
  display:flex;gap:24px;flex-wrap:wrap;align-items:center;
  margin-bottom:22px;
}
.ps-item{display:flex;flex-direction:column;gap:3px}
.ps-label{font-size:9px;color:var(--dim);font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:.7px}
.ps-val{font-size:24px;font-weight:700;font-family:'JetBrains Mono',monospace}
.ps-bar-wrap{flex:1;min-width:200px}
.ps-bar{height:4px;background:rgba(201,168,76,.1);border-radius:2px;overflow:hidden;margin-top:6px}
.ps-fill{height:100%;border-radius:2px;transition:width .7s cubic-bezier(.4,0,.2,1);background:linear-gradient(90deg,var(--g4),var(--g),var(--g3));}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLASHCARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(310px,1fr));gap:14px}
.card{
  background:var(--k2);border:1px solid rgba(201,168,76,.1);
  border-radius:var(--r);padding:20px;cursor:pointer;
  transition:transform .3s cubic-bezier(.4,0,.2,1),border-color .3s,box-shadow .3s;
  min-height:140px;position:relative;overflow:hidden;
}
.card::before{content:"";position:absolute;inset:0;opacity:0;background:linear-gradient(135deg,rgba(201,168,76,.07),transparent 70%);transition:opacity .3s;pointer-events:none;}
.card:hover{transform:translateY(-4px);border-color:rgba(201,168,76,.3);box-shadow:var(--gold-sh);}
.card:hover::before{opacity:1}
.card.flip{border-color:rgba(201,168,76,.5);box-shadow:0 8px 40px rgba(201,168,76,.15);}
.card.flip::before{opacity:1}
.card-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:8px}
.stag{border-radius:6px;padding:3px 10px;font-size:10px;font-weight:600;letter-spacing:.4px;font-family:'JetBrains Mono',monospace;}
.dtag{border-radius:5px;padding:3px 9px;font-size:10px;font-weight:600;font-family:'JetBrains Mono',monospace;}
.d1{background:rgba(74,158,106,.12);color:#7ecfa0}.d2{background:rgba(201,168,76,.12);color:var(--g2)}.d3{background:rgba(158,74,74,.12);color:#cf9090}
.card-q{font-size:14px;line-height:1.65;color:var(--txt);font-weight:400;margin-bottom:8px;font-family:'Crimson Pro',serif;}
.card-hint{font-size:11px;color:var(--dim);font-style:italic;display:flex;align-items:center;gap:5px}
.card-ans{display:none;border-top:1px solid rgba(201,168,76,.12);padding-top:12px;margin-top:10px;font-size:13px;line-height:1.75;color:#c8b888;font-family:'Crimson Pro',serif;}
.card.flip .card-ans{display:block}.card.flip .card-hint{display:none}
.card-check{position:absolute;top:12px;right:12px;width:22px;height:22px;border-radius:50%;background:rgba(201,168,76,.15);border:1px solid var(--g4);display:flex;align-items:center;justify-content:center;font-size:11px;color:var(--g);}
.empty{text-align:center;padding:70px 20px;color:var(--dim);font-size:15px;font-family:'Crimson Pro',serif;font-style:italic;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.quiz-wrap{max-width:760px;margin:0 auto}
.quiz-hdr{display:flex;align-items:center;gap:16px;margin-bottom:22px}
.qprog{flex:1;height:3px;background:rgba(201,168,76,.1);border-radius:2px;overflow:hidden}
.qprog-fill{height:100%;background:linear-gradient(90deg,var(--g4),var(--g2));border-radius:2px;transition:width .4s}
.qmeta{display:flex;gap:16px;font-size:11px;font-family:'JetBrains Mono',monospace;white-space:nowrap}
.q-ok{color:var(--ok)}.q-no{color:var(--no)}
.qbox{background:var(--k2);border:1px solid rgba(201,168,76,.15);border-radius:var(--r);padding:30px;margin-bottom:15px;}
.qbox-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;flex-wrap:wrap;gap:8px}
.qsrc{font-size:10px;color:var(--dim);font-family:'JetBrains Mono',monospace}
.qq{font-size:18px;line-height:1.7;color:var(--txt);font-weight:400;font-family:'Crimson Pro',serif;}
.opts{display:flex;flex-direction:column;gap:10px}
.opt{
  background:var(--k1);border:1px solid rgba(201,168,76,.12);color:var(--txt);
  border-radius:var(--r2);padding:14px 18px;text-align:left;
  cursor:pointer;font-family:'Crimson Pro',serif;font-size:14px;
  line-height:1.5;transition:all .2s;
}
.opt:hover:not(:disabled){border-color:rgba(201,168,76,.4);background:var(--g-dim);color:var(--g2)}
.opt.ok{background:rgba(74,158,106,.1);border-color:var(--ok);color:#7ecfa0;font-weight:600}
.opt.no{background:rgba(158,74,74,.1);border-color:var(--no);color:#cf9090;font-weight:600}
.opt:disabled{cursor:default}
.qexp{background:rgba(74,158,106,.05);border:1px solid rgba(74,158,106,.2);border-radius:var(--r2);padding:15px 18px;margin:13px 0;font-size:14px;color:#9ed8b0;line-height:1.8;font-family:'Crimson Pro',serif;}
.qexp strong{color:#7ecfa0}
.btn{
  background:linear-gradient(135deg,var(--g5),var(--g4),var(--g));color:#000;border:none;
  border-radius:var(--r2);padding:13px 26px;font-size:13px;font-weight:700;
  cursor:pointer;font-family:'JetBrains Mono',monospace;transition:all .25s;letter-spacing:.4px;
  text-transform:uppercase;
}
.btn:hover{transform:translateY(-2px);box-shadow:var(--gold-sh);filter:brightness(1.1);}
.btn:disabled{background:var(--k4);color:var(--dim);cursor:not-allowed;transform:none;box-shadow:none;filter:none;}
.btn-w{width:100%}
.btn-ghost{background:var(--k3);border:1px solid rgba(201,168,76,.2);color:var(--sub);border-radius:var(--r2);padding:7px 17px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:500;transition:all .2s;letter-spacing:.3px;text-transform:uppercase;}
.btn-ghost:hover{border-color:var(--g);color:var(--g2)}
.quiz-done{text-align:center;padding:56px 32px;background:var(--k2);border:1px solid rgba(201,168,76,.2);border-radius:var(--r);}
.qd-emoji{font-size:72px;margin-bottom:20px;line-height:1;display:block}
.qd-h{font-family:'Playfair Display',serif;font-size:32px;color:var(--g2);margin-bottom:10px;font-style:italic;}
.qd-score{font-size:56px;font-weight:900;font-family:'JetBrains Mono',monospace;margin:10px 0;line-height:1}
.qd-p{color:var(--sub);font-size:15px;margin-bottom:28px;line-height:1.7;font-family:'Crimson Pro',serif;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CADERNOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.notebooks-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-bottom:28px;}
.nb-card{
  background:var(--k2);border:1px solid rgba(201,168,76,.15);border-radius:var(--r);
  padding:22px;cursor:pointer;transition:all .3s;position:relative;overflow:hidden;
  min-height:160px;display:flex;flex-direction:column;
}
.nb-card::before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:var(--nb-color,var(--g));border-radius:var(--r) var(--r) 0 0;}
.nb-card:hover{transform:translateY(-4px);border-color:rgba(201,168,76,.3);box-shadow:var(--gold-sh);}
.nb-card .nb-icon{font-size:28px;margin-bottom:10px}
.nb-card .nb-title{font-family:'Playfair Display',serif;font-size:16px;color:var(--txt);margin-bottom:6px;font-weight:700;}
.nb-card .nb-meta{font-size:11px;color:var(--sub);font-family:'JetBrains Mono',monospace;margin-top:auto;}
.nb-card .nb-pages{font-size:10px;color:var(--dim);font-family:'JetBrains Mono',monospace;margin-top:4px;}
.nb-new{
  background:var(--k2);border:2px dashed rgba(201,168,76,.2);border-radius:var(--r);
  padding:22px;cursor:pointer;transition:all .3s;
  min-height:160px;display:flex;flex-direction:column;align-items:center;justify-content:center;
  color:var(--dim);gap:10px;
}
.nb-new:hover{border-color:rgba(201,168,76,.5);color:var(--g2);}
.nb-new-icon{font-size:32px}
.nb-new-label{font-family:'JetBrains Mono',monospace;font-size:11px;text-transform:uppercase;letter-spacing:.8px;}

/* Editor de caderno */
.nb-editor{background:var(--k1);border:1px solid rgba(201,168,76,.2);border-radius:var(--r);overflow:hidden;}
.nb-editor-hdr{
  background:var(--k2);border-bottom:1px solid rgba(201,168,76,.15);
  padding:16px 22px;display:flex;align-items:center;gap:14px;flex-wrap:wrap;
}
.nb-title-input{
  background:transparent;border:none;outline:none;
  font-family:'Playfair Display',serif;font-size:20px;color:var(--g2);
  font-weight:700;flex:1;min-width:0;
}
.nb-title-input::placeholder{color:var(--dim)}
.nb-toolbar{background:var(--k3);border-bottom:1px solid rgba(201,168,76,.1);padding:8px 16px;display:flex;gap:6px;flex-wrap:wrap;align-items:center;}
.nb-btn{background:var(--k4);border:1px solid rgba(201,168,76,.12);color:var(--sub);border-radius:5px;padding:4px 11px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;transition:all .2s;}
.nb-btn:hover{border-color:var(--g);color:var(--g2)}
.nb-btn.active{background:var(--g-dim);border-color:var(--g);color:var(--g2)}

/* Tipos de folha */
.page-lined .nb-page{background-image:repeating-linear-gradient(to bottom,transparent,transparent 31px,rgba(201,168,76,.08) 31px,rgba(201,168,76,.08) 32px);background-size:100% 32px;}
.page-grid .nb-page{background-image:repeating-linear-gradient(rgba(201,168,76,.06) 0 1px,transparent 1px 100%),repeating-linear-gradient(90deg,rgba(201,168,76,.06) 0 1px,transparent 1px 100%);background-size:32px 32px;}
.page-dot .nb-page{background-image:radial-gradient(circle,rgba(201,168,76,.15) 1px,transparent 1px);background-size:24px 24px;}
.page-blank .nb-page{background:transparent;}
.page-music .nb-page{background-image:repeating-linear-gradient(to bottom,transparent,transparent 19px,rgba(201,168,76,.1) 19px,rgba(201,168,76,.1) 20px,transparent 20px,transparent 26px);background-size:100% 26px;}

.nb-page{
  width:100%;min-height:600px;
  background:var(--k1);
  padding:32px 40px;
  color:var(--txt);font-size:15px;line-height:32px;
  font-family:'Crimson Pro',serif;
  outline:none;resize:none;border:none;
  caret-color:var(--g);
}
.nb-page::placeholder{color:var(--dim);font-style:italic;}
.nb-footer{background:var(--k2);border-top:1px solid rgba(201,168,76,.1);padding:10px 22px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;}
.nb-wc{font-size:11px;color:var(--dim);font-family:'JetBrains Mono',monospace;}

/* Modal novo caderno */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:500;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(8px);}
.modal{background:var(--k2);border:1px solid rgba(201,168,76,.25);border-radius:var(--r3);padding:36px;width:100%;max-width:480px;box-shadow:var(--sh2);}
.modal-title{font-family:'Playfair Display',serif;font-size:22px;color:var(--g2);margin-bottom:22px;font-style:italic;}
.form-group{margin-bottom:18px;}
.form-label{font-size:10px;color:var(--sub);font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:.7px;margin-bottom:7px;display:block;}
.form-input{width:100%;background:var(--k1);border:1px solid rgba(201,168,76,.2);border-radius:var(--r2);padding:11px 15px;color:var(--txt);font-family:'Crimson Pro',serif;font-size:15px;outline:none;transition:border-color .2s;}
.form-input:focus{border-color:var(--g);}
.color-options{display:flex;gap:8px;flex-wrap:wrap;}
.color-opt{width:30px;height:30px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:all .2s;}
.color-opt.on{border-color:#fff;transform:scale(1.15);}
.page-options{display:flex;gap:8px;flex-wrap:wrap;}
.page-opt{background:var(--k1);border:1px solid rgba(201,168,76,.15);border-radius:var(--r2);padding:8px 14px;cursor:pointer;font-size:11px;font-family:'JetBrains Mono',monospace;color:var(--sub);transition:all .2s;}
.page-opt:hover,.page-opt.on{border-color:var(--g);color:var(--g2);background:var(--g-dim);}
.modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:24px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REDAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.essay-wrap{max-width:960px;margin:0 auto}
.etopics{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:13px;margin-bottom:28px;}
.etcard{
  background:var(--k2);border:1px solid rgba(201,168,76,.12);
  border-radius:var(--r);padding:22px;cursor:pointer;transition:all .25s;
  position:relative;overflow:hidden;
}
.etcard::before{content:"";position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--c,var(--g));}
.etcard:hover{border-color:rgba(201,168,76,.3);transform:translateY(-3px);box-shadow:var(--gold-sh);}
.et-tipo{font-size:10px;font-weight:600;font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:.6px;margin-bottom:10px;display:block;}
.et-titulo{color:var(--txt);font-size:14px;line-height:1.55;font-weight:700;margin-bottom:8px;font-family:'Playfair Display',serif;}
.et-dica{color:var(--sub);font-size:13px;line-height:1.55;font-family:'Crimson Pro',serif;}
.essay-header{display:flex;align-items:center;gap:12px;margin-bottom:18px;flex-wrap:wrap;}
.tipbox{background:linear-gradient(135deg,rgba(201,168,76,.06),transparent);border:1px solid rgba(201,168,76,.15);border-radius:var(--r);padding:16px 20px;margin-bottom:16px;font-size:14px;color:var(--sub);line-height:1.75;font-family:'Crimson Pro',serif;}
.tipbox strong{color:var(--g2)}
.comp5{display:flex;flex-wrap:wrap;gap:7px;margin-bottom:16px;background:var(--k2);border:1px solid rgba(201,168,76,.1);border-radius:var(--r2);padding:12px 16px;align-items:center;}
.ctag{background:var(--k3);border:1px solid rgba(201,168,76,.12);border-radius:5px;padding:3px 10px;font-size:11px;font-weight:500;color:var(--dim);font-family:'JetBrains Mono',monospace;}
textarea.essay-ta{
  width:100%;min-height:360px;
  background:var(--k2);border:1px solid rgba(201,168,76,.15);
  border-radius:var(--r);padding:24px 28px;
  color:var(--txt);font-size:15px;line-height:1.9;
  font-family:'Crimson Pro',serif;resize:vertical;outline:none;
  transition:border-color .2s;caret-color:var(--g);
}
textarea.essay-ta:focus{border-color:var(--g);}
textarea.essay-ta::placeholder{color:var(--dim);font-style:italic;}
.essay-toolbar{display:flex;justify-content:space-between;align-items:center;margin-top:13px;flex-wrap:wrap;gap:12px;}
.wc{font-size:11px;color:var(--sub);font-family:'JetBrains Mono',monospace;}
.essay-actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
.btn-secondary{background:var(--k3);border:1px solid rgba(201,168,76,.2);color:var(--sub);border-radius:var(--r2);padding:9px 16px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:500;transition:all .2s;display:flex;align-items:center;gap:7px;letter-spacing:.3px;text-transform:uppercase;}
.btn-secondary:hover{border-color:var(--g);color:var(--g2)}
.btn-save-essay{background:rgba(74,158,106,.12);border:1px solid rgba(74,158,106,.3);color:#7ecfa0;border-radius:var(--r2);padding:9px 16px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:600;transition:all .2s;display:flex;align-items:center;gap:7px;letter-spacing:.3px;text-transform:uppercase;}
.btn-save-essay:hover{background:rgba(74,158,106,.2)}
.btn-save-essay:disabled{opacity:.4;cursor:not-allowed;}
.efb{margin-top:24px;background:var(--k1);border:1px solid rgba(201,168,76,.18);border-radius:var(--r);padding:28px;}
.efb-title{color:var(--g2);font-size:16px;font-weight:700;margin-bottom:20px;display:flex;align-items:center;gap:8px;flex-wrap:wrap;font-family:'Playfair Display',serif;}
.score-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin-bottom:22px;}
@media(max-width:600px){.score-grid{grid-template-columns:repeat(2,1fr)}}
.score-card{background:var(--k2);border:1px solid rgba(201,168,76,.12);border-radius:var(--r2);padding:14px;text-align:center;}
.score-n{font-size:26px;font-weight:700;font-family:'JetBrains Mono',monospace;line-height:1;}
.score-lbl{font-size:9px;color:var(--sub);margin-top:5px;line-height:1.4;font-family:'JetBrains Mono',monospace;}
.efb-text{font-size:14px;line-height:1.9;color:#c8b888;white-space:pre-wrap;font-family:'Crimson Pro',serif;}
.loading-dots{display:flex;gap:7px;justify-content:center;padding:32px;align-items:center;}
.loading-dots span{width:9px;height:9px;border-radius:50%;background:var(--g);animation:dot .9s ease-in-out infinite;}
.loading-dots span:nth-child(2){animation-delay:.15s;background:var(--g2);}
.loading-dots span:nth-child(3){animation-delay:.3s;background:var(--g3);}
@keyframes dot{0%,80%,100%{transform:scale(.65);opacity:.3}40%{transform:scale(1);opacity:1}}
.saved-essays{margin-top:30px;}
.saved-title{font-family:'Playfair Display',serif;font-size:20px;color:var(--g2);margin-bottom:16px;display:flex;align-items:center;gap:10px;font-style:italic;}
.saved-title span{font-size:11px;color:var(--sub);font-family:'JetBrains Mono',monospace;font-style:normal;}
.essay-item{background:var(--k2);border:1px solid rgba(201,168,76,.12);border-radius:var(--r);padding:16px 20px;display:flex;align-items:center;gap:14px;flex-wrap:wrap;margin-bottom:9px;}
.essay-item-info{flex:1;min-width:0;}
.essay-item-title{font-size:14px;font-weight:700;color:var(--txt);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px;font-family:'Playfair Display',serif;}
.essay-item-meta{font-size:11px;color:var(--sub);font-family:'JetBrains Mono',monospace;}
.essay-item-score{font-size:22px;font-weight:700;font-family:'JetBrains Mono',monospace;white-space:nowrap;}
.essay-item-actions{display:flex;gap:6px;flex-shrink:0;}
.btn-xs{background:var(--k3);border:1px solid rgba(201,168,76,.12);color:var(--sub);border-radius:6px;padding:5px 12px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:10px;font-weight:500;transition:all .2s;white-space:nowrap;letter-spacing:.3px;text-transform:uppercase;}
.btn-xs:hover{border-color:var(--g);color:var(--g2)}
.btn-xs.danger:hover{border-color:var(--no);color:#cf9090}
.essay-detail{background:var(--k1);border:1px solid rgba(201,168,76,.1);border-radius:var(--r);padding:22px;margin-top:8px;}
.essay-detail-text{font-size:14px;line-height:1.85;color:#c8b888;white-space:pre-wrap;max-height:280px;overflow-y:auto;margin-bottom:14px;font-family:'Crimson Pro',serif;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.exams-wrap{max-width:1280px;margin:0 auto}
.pdf-hero{background:linear-gradient(135deg,rgba(201,168,76,.08),rgba(0,0,0,0));border:1px solid rgba(201,168,76,.2);border-radius:var(--r3);padding:30px 36px;margin-bottom:28px;position:relative;overflow:hidden;}
.pdf-hero::before{content:"UNESP";position:absolute;right:-5px;top:-15px;font-family:'Playfair Display',serif;font-size:130px;color:rgba(201,168,76,.04);pointer-events:none;line-height:1;font-style:italic;}
.pdf-h3{font-family:'Playfair Display',serif;font-size:24px;color:var(--g2);margin-bottom:6px;font-style:italic;}
.pdf-p{color:var(--sub);font-size:13px;line-height:1.6;margin-bottom:22px;font-family:'Crimson Pro',serif;}
.pdf-acts{display:flex;gap:10px;flex-wrap:wrap;}
.pdf-gold{background:linear-gradient(135deg,var(--g5),var(--g4),var(--g));color:#000;border:none;border-radius:var(--r2);padding:12px 24px;font-size:12px;font-weight:700;cursor:pointer;font-family:'JetBrains Mono',monospace;text-decoration:none;display:inline-flex;align-items:center;gap:9px;transition:all .25s;letter-spacing:.4px;text-transform:uppercase;}
.pdf-gold:hover{transform:translateY(-2px);box-shadow:var(--gold-sh);}
.pdf-sec{background:var(--k3);border:1px solid rgba(201,168,76,.18);color:var(--sub);border-radius:var(--r2);padding:11px 18px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:500;transition:all .2s;text-decoration:none;display:inline-flex;align-items:center;gap:8px;letter-spacing:.3px;text-transform:uppercase;}
.pdf-sec:hover{border-color:var(--g);color:var(--g2)}
.pdf-viewer{display:none;margin-top:18px;border-radius:10px;overflow:hidden;border:1px solid rgba(201,168,76,.15);}
.pdf-viewer iframe{width:100%;height:760px;border:none;background:#fff}
.egrid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
@media(max-width:768px){.egrid{grid-template-columns:1fr}}
.exam-card{background:var(--k2);border:1px solid rgba(201,168,76,.12);border-radius:var(--r);overflow:hidden;transition:all .3s;}
.exam-card:hover{border-color:rgba(201,168,76,.25);box-shadow:var(--gold-sh);}
.exam-head{padding:24px;background:linear-gradient(135deg,var(--k3),var(--k2));display:flex;justify-content:space-between;align-items:flex-start;}
.ebadge{background:var(--g);color:#000;border-radius:5px;padding:3px 10px;font-size:10px;font-weight:700;letter-spacing:.5px;font-family:'JetBrains Mono',monospace;}
.eyear{font-size:48px;font-weight:900;font-family:'JetBrains Mono',monospace;line-height:1;color:var(--g);}
.exam-body{padding:20px 24px}
.estats{display:flex;gap:11px;margin-bottom:16px}
.estat{background:var(--k1);border-radius:7px;padding:9px 13px;text-align:center;flex:1;border:1px solid rgba(201,168,76,.08);}
.estat-n{font-size:22px;font-weight:700;font-family:'JetBrains Mono',monospace;color:var(--g);}
.estat-l{font-size:10px;color:var(--sub);margin-top:2px;font-family:'JetBrains Mono',monospace;}
.exam-hl{color:var(--sub);font-size:12px;line-height:1.65;margin-bottom:14px;font-family:'Crimson Pro',serif;}
.etags{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:15px;}
.etog{width:100%;background:var(--k1);border:1px solid rgba(201,168,76,.12);color:var(--sub);border-radius:7px;padding:10px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:500;transition:all .2s;letter-spacing:.3px;text-transform:uppercase;}
.etog:hover{border-color:var(--g);color:var(--g2)}
.eqs{max-height:0;overflow:hidden;transition:max-height .5s ease}
.eqs.open{max-height:8000px}
.qitem{background:var(--k1);border:1px solid rgba(201,168,76,.1);border-radius:var(--r2);padding:16px;margin-top:10px;}
.qitem-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:11px;flex-wrap:wrap;gap:6px;}
.qnum{background:var(--k3);color:var(--g2);border-radius:4px;padding:2px 8px;font-size:10px;font-weight:600;font-family:'JetBrains Mono',monospace;}
.qitem p{color:var(--sub);font-size:14px;line-height:1.65;margin-bottom:12px;font-family:'Crimson Pro',serif;}
.qopts{display:flex;flex-direction:column;gap:6px}
.qopt{background:var(--k2);border:1px solid rgba(201,168,76,.1);color:var(--dim);border-radius:6px;padding:9px 13px;cursor:pointer;font-family:'Crimson Pro',serif;font-size:13px;text-align:left;transition:all .2s;font-weight:400;}
.qopt:hover:not(:disabled){border-color:rgba(201,168,76,.3);color:var(--g2)}
.qopt.ok{background:rgba(74,158,106,.08);border-color:var(--ok);color:#7ecfa0;font-weight:600;}
.qopt.no{background:rgba(158,74,74,.08);border-color:var(--no);color:#cf9090;font-weight:600;}
.qopt:disabled{cursor:default}
.qexp2{background:rgba(74,158,106,.04);border:1px solid rgba(74,158,106,.15);border-radius:6px;padding:11px;margin-top:9px;font-size:13px;color:#7ecfa0;line-height:1.65;display:none;font-family:'Crimson Pro',serif;}
.qexp2.show{display:block}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROGRESSO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stat-nums{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:13px;margin-bottom:30px;}
.sn{background:var(--k2);border:1px solid rgba(201,168,76,.12);border-radius:var(--r);padding:20px;text-align:center;}
.sn-num{font-size:38px;font-weight:700;font-family:'JetBrains Mono',monospace;line-height:1;}
.sn-lbl{font-size:11px;color:var(--sub);margin-top:5px;font-family:'JetBrains Mono',monospace;}
.sn-sub{font-size:10px;color:var(--dim);margin-top:3px;font-family:'JetBrains Mono',monospace;}
.mat-list{display:flex;flex-direction:column;gap:10px;}
.mat-row{background:var(--k2);border:1px solid rgba(201,168,76,.1);border-radius:var(--r);padding:15px 20px;display:flex;align-items:center;gap:16px;}
.pbar{height:4px;background:rgba(201,168,76,.08);border-radius:2px;overflow:hidden;flex:1;}
.pfill{height:100%;border-radius:2px;transition:width .8s cubic-bezier(.4,0,.2,1);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast{
  position:fixed;bottom:32px;right:32px;z-index:1000;
  background:linear-gradient(135deg,var(--g4),var(--g));color:#000;
  border-radius:10px;padding:13px 22px;font-size:13px;font-weight:700;
  box-shadow:var(--sh2);transform:translateY(90px);opacity:0;
  transition:all .35s cubic-bezier(.34,1.56,.64,1);pointer-events:none;
  font-family:'JetBrains Mono',monospace;letter-spacing:.3px;
}
.toast.show{transform:translateY(0);opacity:1}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLLBAR & PRINT & MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:var(--k)}
::-webkit-scrollbar-thumb{background:rgba(201,168,76,.2);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--g4)}
@media print{.hdr,.nav,.essay-toolbar,.essay-header,.tipbox,.comp5,.btn,.btn-secondary,.btn-ghost,.efb,.fbar,.saved-essays{display:none!important}body{background:#fff!important;color:#000!important}textarea.essay-ta{border:none!important;color:#000!important;background:#fff!important;font-family:Georgia,serif!important}.essay-wrap{max-width:100%!important}}
@media(max-width:640px){.hdr-info{display:none}.main{padding:20px 16px 70px}.cgrid{grid-template-columns:1fr}.etopics{grid-template-columns:1fr}.score-grid{grid-template-columns:repeat(2,1fr)}.notebooks-grid{grid-template-columns:1fr 1fr}}
</style>
</head>
<body>

<div class="toast" id="toast">âœ“</div>

<!-- MODAL NOVO CADERNO -->
<div class="modal-overlay" id="nb-modal" style="display:none" onclick="if(event.target===this)closeNBModal()">
  <div class="modal">
    <div class="modal-title">âœ¦ Novo Caderno</div>
    <div class="form-group">
      <label class="form-label">Nome do caderno</label>
      <input class="form-input" id="nb-name-inp" placeholder="Ex: Biologia â€” Citologia" maxlength="60">
    </div>
    <div class="form-group">
      <label class="form-label">Tipo de folha</label>
      <div class="page-options">
        <div class="page-opt on" data-pt="lined" onclick="selPage(this,'lined')">ğŸ“ Pautado</div>
        <div class="page-opt" data-pt="grid" onclick="selPage(this,'grid')">âŠ Quadriculado</div>
        <div class="page-opt" data-pt="dot" onclick="selPage(this,'dot')">Â· Â· Pontilhado</div>
        <div class="page-opt" data-pt="blank" onclick="selPage(this,'blank')">â–¡ Em branco</div>
        <div class="page-opt" data-pt="music" onclick="selPage(this,'music')">â™ª Pentagrama</div>
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Cor</label>
      <div class="color-options">
        <div class="color-opt on" style="background:#c9a84c" data-c="#c9a84c" onclick="selColor(this)"></div>
        <div class="color-opt" style="background:#4a9e6a" data-c="#4a9e6a" onclick="selColor(this)"></div>
        <div class="color-opt" style="background:#4a7a9e" data-c="#4a7a9e" onclick="selColor(this)"></div>
        <div class="color-opt" style="background:#9e4a9e" data-c="#9e4a9e" onclick="selColor(this)"></div>
        <div class="color-opt" style="background:#9e4a4a" data-c="#9e4a4a" onclick="selColor(this)"></div>
        <div class="color-opt" style="background:#6a6a9e" data-c="#6a6a9e" onclick="selColor(this)"></div>
        <div class="color-opt" style="background:#9e7a4a" data-c="#9e7a4a" onclick="selColor(this)"></div>
        <div class="color-opt" style="background:#4a9e9e" data-c="#4a9e9e" onclick="selColor(this)"></div>
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-ghost" onclick="closeNBModal()">Cancelar</button>
      <button class="btn" onclick="createNotebook()">Criar Caderno</button>
    </div>
  </div>
</div>

<header class="hdr">
  <div class="hdr-in">
    <div class="brand">
      <div class="brand-emblem">ğŸ“š</div>
      <div class="brand-text">
        <div class="name">UNESP Study Hub</div>
        <div class="sub">Cassia Â· Exatas & Humanidades Â· 2022</div>
      </div>
    </div>
    <div class="hdr-info">
      <div class="hdr-chip">Cards: <b id="stCards">0/0</b></div>
      <div class="hdr-chip">Quiz: <b id="stQuiz">0%</b></div>
      <div class="hdr-chip">NÃ­vel: <b id="stDiff">Todos</b></div>
      <div class="fb-status"><div class="fb-dot" id="fb-dot"></div><span id="fb-label">Conectando...</span></div>
    </div>
  </div>
</header>

<nav class="nav">
  <div class="nav-in">
    <button class="nb on" onclick="goTab('flashcards')">â—ˆ Flashcards</button>
    <button class="nb" onclick="goTab('quiz')">â— Quiz</button>
    <button class="nb" onclick="goTab('notebooks')">â—‰ Cadernos</button>
    <button class="nb" onclick="goTab('essay')">âœ¦ RedaÃ§Ã£o</button>
    <button class="nb" onclick="goTab('exams')">â—» Provas</button>
    <button class="nb" onclick="goTab('stats')">â—ˆ Progresso</button>
  </div>
</nav>

<main class="main">
  <div id="farea"></div>
  <div class="tab active" id="tab-flashcards">
    <div class="sec-hd"><div class="sec-title">Flashcards de <em>RevisÃ£o</em></div><div class="sec-sub">Clique para revelar Â· Progresso salvo automaticamente</div></div>
    <div id="fcprog" class="prog-strip" style="display:none"></div>
    <div class="cgrid" id="cgrid"></div>
  </div>
  <div class="tab" id="tab-quiz"><div class="quiz-wrap" id="qwrap"></div></div>
  <div class="tab" id="tab-notebooks"><div id="nbwrap"></div></div>
  <div class="tab" id="tab-essay"><div class="essay-wrap" id="ewrap"></div></div>
  <div class="tab" id="tab-exams"><div class="exams-wrap" id="xwrap"></div></div>
  <div class="tab" id="tab-stats"><div id="swrap"></div></div>
</main>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PALETA POR MATÃ‰RIA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const COR={Biologia:"#4a9e6a",QuÃ­mica:"#c9a84c",FÃ­sica:"#4a7a9e",MatemÃ¡tica:"#7a6a9e",Geografia:"#4a9e7a",HistÃ³ria:"#9e4a4a",Literatura:"#9e4a9e",Filosofia:"#4a9e9e",RedaÃ§Ã£o:"#9e7a4a",InglÃªs:"#7a9e4a"};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FLASHCARDS (57 cards)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CARDS=[
  {id:1,s:"Biologia",d:1,q:"O que Ã© G6PD e por que sua deficiÃªncia impede uso de primaquina?",a:"G6PD protege eritrÃ³citos do estresse oxidativo. Sem ela, a primaquina causa hemÃ³lise fatal. Portadores precisam de antimalÃ¡ricos alternativos."},
  {id:2,s:"Biologia",d:2,q:"Quais sÃ£o as 3 fases da dependÃªncia tecnolÃ³gica em adolescentes?",a:"â‘  Engajamento: uso intenso; â‘¡ SubstituiÃ§Ã£o: tecnologia substitui atividades reais; â‘¢ DependÃªncia: sÃ­ndrome de abstinÃªncia â€” ansiedade, irritabilidade, insÃ´nia."},
  {id:3,s:"Biologia",d:2,q:"RelaÃ§Ã£o entre pressÃ£o e velocidade do sangue nos vasos.",a:"Inversamente proporcionais. Capilares: baixa velocidade + baixa pressÃ£o â†’ troca de nutrientes. ArtÃ©rias: alta pressÃ£o. Veias: baixa pressÃ£o, retorno por mÃºsculos e vÃ¡lvulas."},
  {id:4,s:"Biologia",d:1,q:"Como foi criada a almÃ´ndega de mamute em 2023?",a:"Gene da mioglobina do mamute sequenciado â†’ partes ausentes com DNA de elefante africano â†’ inserÃ§Ã£o em cÃ©lula-tronco de ovelha â†’ biorreator por 3 semanas."},
  {id:5,s:"Biologia",d:3,q:"Por que a radiaÃ§Ã£o ionizante causa feridas que nÃ£o cicatrizam?",a:"MutaÃ§Ãµes no DNA alteram o ciclo celular â†’ necrose ou transformaÃ§Ã£o neoplÃ¡sica. CÃ©lulas-tronco epidÃ©rmicas danificadas impedem renovaÃ§Ã£o. Limiar: acima de 6 Gy."},
  {id:6,s:"Biologia",d:1,q:"DiferenÃ§a fundamental entre mitose e meiose.",a:"Mitose: 1 divisÃ£o â†’ 2 cÃ©lulas diploides (2n). Crescimento e reparaÃ§Ã£o. Meiose: 2 divisÃµes â†’ 4 cÃ©lulas haploides (n). Gametas. Crossing-over gera variabilidade."},
  {id:7,s:"Biologia",d:2,q:"O que Ã© fototropismo e qual hormÃ´nio o controla?",a:"Crescimento direcional em resposta Ã  luz. Auxina (AIA) acumula no lado nÃ£o iluminado â†’ alongamento â†’ curvatura. Demonstrado por Darwin (1880)."},
  {id:8,s:"Biologia",d:3,q:"Como funciona o feedback negativo na regulaÃ§Ã£o da tireoide?",a:"HipotÃ¡lamo â†’ TRH â†’ HipÃ³fise â†’ TSH â†’ Tireoide â†’ T3/T4. Altos T3/T4 inibem hipotÃ¡lamo e hipÃ³fise. AnÃ¡logo a um termostato."},
  {id:9,s:"Biologia",d:2,q:"O que diferencia vÃ­rus de bactÃ©rias no tratamento?",a:"VÃ­rus: sem metabolismo prÃ³prio â†’ antivirais e vacinas. BactÃ©rias: procariotos â†’ antibiÃ³ticos (penicilina inibe parede celular). Gripes sÃ£o virais!"},
  {id:10,s:"Biologia",d:3,q:"O que Ã© epistasia e como difere de dominÃ¢ncia?",a:"DominÃ¢ncia: alelo mascara outro no mesmo locus. Epistasia: gene mascara outro gene em locus diferente. Ex.: gene I em cÃ£es mascara gene B."},
  {id:11,s:"QuÃ­mica",d:1,q:"Como se forma o ozÃ´nio troposfÃ©rico (poluente)?",a:"NOâ‚‚ + luz UV â†’ NO + OÂ·; OÂ· + Oâ‚‚ â†’ Oâ‚ƒ. Irrita vias respiratÃ³rias. Diferente do ozÃ´nio estratosfÃ©rico protetor. Origem: combustÃ£o veicular."},
  {id:12,s:"QuÃ­mica",d:1,q:"O que Ã© o efeito fotoelÃ©trico e por que foi revolucionÃ¡rio?",a:"EmissÃ£o de elÃ©trons de metal iluminado. Depende da FREQUÃŠNCIA (E=hf), nÃ£o da intensidade. Einstein (1905) â€” Nobel 1921. Base da mecÃ¢nica quÃ¢ntica."},
  {id:13,s:"QuÃ­mica",d:3,q:"Por que o pH pode ser negativo? A escala 0-14 tem limite?",a:"pH = âˆ’log[Hâº]. Se [Hâº] > 1 mol/L, pH < 0. A escala 0-14 Ã© apenas convencional. pH de Hâ‚‚SOâ‚„ concentrado â‰ˆ âˆ’1,5."},
  {id:14,s:"QuÃ­mica",d:2,q:"Por que a Pt daria 'falso positivo' no teste de dissoluÃ§Ã£o em Ã¡cido?",a:"EÂ°(Pt) = +1,20V > EÂ°(Hâº) = 0V. O Ã¡cido nÃ£o tem potencial para oxidar a platina. SÃ³ Ã¡gua rÃ©gia dissolve. Mesma lÃ³gica do ouro (EÂ°=+1,50V)."},
  {id:15,s:"QuÃ­mica",d:2,q:"PrincÃ­pio de Le Chatelier: aumento de pressÃ£o.",a:"Desloca para o lado com MENOS moles de gÃ¡s. Ex.: Nâ‚‚ + 3Hâ‚‚ â‡Œ 2NHâ‚ƒ â€” pressÃ£o alta favorece NHâ‚ƒ (2 < 4 moles). Base do processo Haber."},
  {id:16,s:"QuÃ­mica",d:1,q:"DiferenÃ§a entre endotÃ©rmica e exotÃ©rmica.",a:"ExotÃ©rmica: libera calor (Î”H < 0). Ex.: combustÃ£o, respiraÃ§Ã£o celular. EndotÃ©rmica: absorve calor (Î”H > 0). Ex.: fotossÃ­ntese, fusÃ£o do gelo. Elevar T favorece endotÃ©rmica."},
  {id:17,s:"QuÃ­mica",d:2,q:"Como calcular moles? Exemplo com 36g de Ã¡gua.",a:"n = m/M. M(Hâ‚‚O) = 18 g/mol. n = 36/18 = 2 mol = 1,204Ã—10Â²â´ molÃ©culas. NÃºmero de Avogadro: 6,02Ã—10Â²Â³."},
  {id:18,s:"QuÃ­mica",d:3,q:"Por que compostos iÃ´nicos tÃªm alto ponto de fusÃ£o?",a:"Rede cristalina com forÃ§as eletrostÃ¡ticas intensas e omnidirecionais entre cÃ¡tions e Ã¢nions. Exigem muita energia para romper â€” pf NaCl = 801Â°C."},
  {id:19,s:"FÃ­sica",d:1,q:"Mistura cafÃ© (80Â°C) + leite (20Â°C), proporÃ§Ã£o 1:1. Temperatura final?",a:"50Â°C. EquilÃ­brio tÃ©rmico: massas e calores iguais â†’ T = (80+20)/2. Se massas diferentes, nÃ£o Ã© mÃ©dia simples!"},
  {id:20,s:"FÃ­sica",d:2,q:"O que Newton descobriu sobre velocidade orbital e gravidade?",a:"v orbital = âˆš(gÂ·R) â‰ˆ 7,9 km/s. Nessa velocidade, a queda livre curva ao redor da Terra. Acima: elipse/escape. Abaixo: cai."},
  {id:21,s:"FÃ­sica",d:2,q:"No termÃ´metro de Ã³leo (M=18g, V=20cmÂ³), quando a tensÃ£o se anula?",a:"Empuxo = Peso: Ï_Ã³leo = 18/20 = 0,90 g/cmÂ³ â†’ â‰ˆ100Â°C pelo grÃ¡fico. Nessa temperatura o objeto flutua sem tensÃ£o."},
  {id:22,s:"FÃ­sica",d:1,q:"Por que a fuligem desaparece das paredes do forno?",a:"Fuligem = carbono. Na temperatura ideal: C + Oâ‚‚ â†’ COâ‚‚(g). Carbono sÃ³lido oxidado a gÃ¡s que escapa = combustÃ£o completa."},
  {id:23,s:"FÃ­sica",d:3,q:"O que Ã© o efeito Doppler? 3 aplicaÃ§Ãµes.",a:"VariaÃ§Ã£o de frequÃªncia com movimento relativo fonte-observador. â‘  Radar de velocidade â‘¡ Ecografia Doppler (fluxo sanguÃ­neo) â‘¢ Desvio para vermelho (velocidade de estrelas)."},
  {id:24,s:"FÃ­sica",d:2,q:"DiferenÃ§a entre calor latente e calor sensÃ­vel.",a:"SensÃ­vel: Q = mÂ·cÂ·Î”T â€” muda temperatura, nÃ£o fase. Latente: Q = mÂ·L â€” muda fase sem alterar temperatura. Gelo a 0Â°C: L_fusÃ£o = 80 cal/g."},
  {id:25,s:"FÃ­sica",d:3,q:"InÃ©rcia e 1Âª Lei de Newton â€” qual a diferenÃ§a?",a:"1Âª Lei Ã© a LEI: sem forÃ§a â†’ repouso ou MRU. InÃ©rcia Ã© a PROPRIEDADE: resistÃªncia Ã  mudanÃ§a. Massa Ã© a medida quantitativa da inÃ©rcia."},
  {id:26,s:"MatemÃ¡tica",d:2,q:"DiferenÃ§a de combinaÃ§Ãµes entre placas Mercosul e antigas.",a:"Mercosul: 26Â³Ã—10Ã—26Â³. Antiga: 26Â³Ã—10â´. RazÃ£o â‰ˆ 17,6Ã—. A letra extra na 5Âª posiÃ§Ã£o multiplica as combinaÃ§Ãµes."},
  {id:27,s:"MatemÃ¡tica",d:1,q:"O que sÃ£o nÃºmeros oblongos e qual Ã© a fÃ³rmula?",a:"Pontos em retÃ¢ngulo com colunas = linhas + 1. FÃ³rmula: O(n) = n(n+1). SequÃªncia: 2, 6, 12, 20, 30... Sempre o dobro do triangular: O(n) = 2Â·T(n)."},
  {id:28,s:"MatemÃ¡tica",d:2,q:"Prove que 210 Ã© triangular E oblongo.",a:"T(20) = 20Ã—21/2 = 210 âœ“. O(14) = 14Ã—15 = 210 âœ“. Ã‰ ambos! Os pares (n,m) satisfazem a equaÃ§Ã£o de Pell."},
  {id:29,s:"MatemÃ¡tica",d:3,q:"Converta 2021 para binÃ¡rio.",a:"2021 = 11111100101â‚‚. Sete 1s e quatro 0s. DiferenÃ§a = 3. VerificaÃ§Ã£o: 1024+512+256+128+64+32+4+1 = 2021 âœ“"},
  {id:30,s:"MatemÃ¡tica",d:1,q:"Como calcular probabilidade condicional?",a:"P(A|B) = P(Aâˆ©B)/P(B). Ex.: P(pressÃ£o elevada | excesso de peso) = 0,10/0,25 = 40%. Cuidado: nÃ£o Ã© simplesmente 10%!"},
  {id:31,s:"MatemÃ¡tica",d:3,q:"Modelo exponencial de preÃ§o de baterias.",a:"y = 15649Â·e^(âˆ’0,687x). Para 2021: â‰ˆ US$64. FunÃ§Ã£o de decrescimento exponencial â€” base do modelo tecnolÃ³gico."},
  {id:32,s:"MatemÃ¡tica",d:2,q:"FÃ³rmula e propriedade dos nÃºmeros triangulares.",a:"T(n) = n(n+1)/2. T(n)âˆ’T(nâˆ’1)=n. T(100)=5050 (Gauss!). RelaÃ§Ã£o com oblongos: O(n)=2T(n)."},
  {id:33,s:"Geografia",d:1,q:"Por que o Canal de Suez Ã© estratÃ©gico?",a:"Liga MediterrÃ¢neo ao Mar Vermelho â€” evita contornar a Ãfrica (â‰ˆ7.000km, 9 dias a menos). 12% do comÃ©rcio mundial. Bloqueio 2021 = US$9,6 bi/dia."},
  {id:34,s:"Geografia",d:2,q:"O que Ã© a Serra do Imeri e por que favorece endemismo?",a:"Serra vulcÃ¢nica no norte do AM. Isolamento duplo (montanhas + floresta) â†’ especiaÃ§Ã£o alopÃ¡trica. AltÃ­ssimo endemismo vegetal e de anfÃ­bios."},
  {id:35,s:"Geografia",d:1,q:"O que Ã© subsidÃªncia do terreno?",a:"Rebaixamento lento do solo. Causa principal: superexploraÃ§Ã£o de aquÃ­feros. Cidade do MÃ©xico: 9cm/ano; Jacarta: 4m em 30 anos."},
  {id:36,s:"Geografia",d:2,q:"Reservas Extrativistas: origem e objetivo.",a:"Criadas por Chico Mendes (1988). ExploraÃ§Ã£o sustentÃ¡vel por populaÃ§Ãµes tradicionais (seringueiros, ribeirinhos). Conciliam conservaÃ§Ã£o e renda."},
  {id:37,s:"Geografia",d:3,q:"Meio tÃ©cnico-cientÃ­fico-informacional de Milton Santos.",a:"Anos 1970+: ciÃªncia, tÃ©cnica e informaÃ§Ã£o fundem-se no territÃ³rio. No Brasil: distribuiÃ§Ã£o radicalmente desigual â€” contÃ­nua no Centro-Sul, pontual no Norte."},
  {id:38,s:"HistÃ³ria",d:1,q:"Quem foi Antonio Conselheiro e o que foi Canudos?",a:"LÃ­der messiÃ¢nico. Fundou Canudos (BA, 1893-97) com ~30.000 marginalizados. DestruÃ­da em 4 expediÃ§Ãµes. Euclides da Cunha: 'Os SertÃµes' (1902)."},
  {id:39,s:"HistÃ³ria",d:2,q:"Revolta dos MalÃªs (1835): por que Ã© Ãºnica?",a:"Maior revolta urbana de escravizados das AmÃ©ricas. Liderada por muÃ§ulmanos alfabetizados em Ã¡rabe. Planejada para o fim do RamadÃ£. Reprimida violentamente."},
  {id:40,s:"HistÃ³ria",d:1,q:"Como a Crise de 1929 transformou o liberalismo?",a:"Evidenciou limites do laissez-faire. Resultado: New Deal, polÃ­ticas keynesianas. Estado passou a regular mercados e garantir empregos."},
  {id:41,s:"HistÃ³ria",d:2,q:"Governo JK e o Plano de Metas.",a:"'50 anos em 5': indÃºstria automobilÃ­stica, energia (Furnas) e BrasÃ­lia (1960). Resultado: crescimento acelerado + inflaÃ§Ã£o + dÃ­vida externa."},
  {id:42,s:"HistÃ³ria",d:3,q:"O que a charge de Belmonte ironizava sobre a Semana de Arte Moderna?",a:"O descompasso vanguarda Ã— pÃºblico conservador. 'Coitados, tÃ£o moÃ§os...' â€” ironia: quem nÃ£o entendia eram os espectadores, nÃ£o os artistas."},
  {id:43,s:"HistÃ³ria",d:2,q:"O que o texto de Proudhon representa politicamente?",a:"'A propriedade Ã© o roubo' (1840) = marco do Anarquismo. Defende aboliÃ§Ã£o da propriedade privada e do Estado."},
  {id:44,s:"HistÃ³ria",d:3,q:"Impacto demogrÃ¡fico da escravidÃ£o no RecÃ´ncavo Baiano.",a:"Escravizados chegaram a 75%+ da populaÃ§Ã£o. Crescimento vegetativo negativo exigia importaÃ§Ã£o constante. Com o fim do trÃ¡fico (1850), acelerou-se a imigraÃ§Ã£o europeia."},
  {id:45,s:"Literatura",d:1,q:"'Ã‰ tempo de formar novos quilombos' (ConceiÃ§Ã£o Evaristo) â€” figura de linguagem?",a:"MetÃ¡fora. Os quilombos representam metaforicamente a resistÃªncia contemporÃ¢nea, sem referÃªncia literal Ã s comunidades histÃ³ricas."},
  {id:46,s:"Literatura",d:2,q:"Em 'Dois IrmÃ£os' (Hatoum), resultado da rivalidade Yaqub Ã— Omar?",a:"DesagregaÃ§Ã£o total da famÃ­lia. RazÃ£o calculista vs. paixÃ£o destrutiva. Nael Ã© testemunha da ruÃ­na progressiva."},
  {id:47,s:"Literatura",d:2,q:"Qual recurso produz efeito cÃ´mico no diÃ¡logo do burro no 'MacÃ¡rio'?",a:"Ambiguidade lexical. 'Burro' = animal e insulto, gerando sÃ©rie progressiva de mal-entendidos absurdos."},
  {id:48,s:"Literatura",d:1,q:"Qual movimento reage ao iluminismo valorizando a experiÃªncia individual?",a:"Romantismo (sÃ©c. XIX). No Brasil: GonÃ§alves Dias (indianismo), JosÃ© de Alencar, Ãlvares de Azevedo (geraÃ§Ã£o byroniana)."},
  {id:49,s:"Literatura",d:3,q:"O paradoxo em 'O Sobrevivente' de Drummond.",a:"Declara impossÃ­vel escrever poesia â€” mas o texto Ã© uma poesia. O negativo torna-se ato afirmativo: a poesia sobrevive ao declarar sua impossibilidade."},
  {id:50,s:"Filosofia",d:2,q:"O que Ã© 'fortuna' em Maquiavel?",a:"Fortuna = acaso, eventos imprevistos. O prÃ­ncipe com virtÃ¹ antecipa e adapta-se. Analogia: construir diques antes da cheia. Domina metade dos eventos."},
  {id:51,s:"Filosofia",d:1,q:"O que Ã© o panÃ³ptico e por que Foucault o usa?",a:"PrisÃ£o circular de Bentham: torre central vÃª todos â†’ auto-vigilÃ¢ncia. Foucault em 'Vigiar e Punir': metÃ¡fora do poder disciplinar moderno (escolas, hospitais, fÃ¡bricas)."},
  {id:52,s:"Filosofia",d:3,q:"CrÃ­tica de PlatÃ£o Ã s artes em 'A RepÃºblica'.",a:"Arte Ã© 'cÃ³pia de cÃ³pia' (3 nÃ­veis abaixo das Ideias). Apela Ã s emoÃ§Ãµes, contornando a razÃ£o â†’ corrompe a alma. PlatÃ£o expulsaria poetas da cidade ideal."},
  {id:53,s:"RedaÃ§Ã£o",d:1,q:"Quais sÃ£o as 5 competÃªncias do ENEM?",a:"â‘  Norma culta â‘¡ Desenvolvimento do tema â‘¢ ArgumentaÃ§Ã£o â‘£ CoesÃ£o e coerÃªncia â‘¤ Proposta de intervenÃ§Ã£o com respeito aos Direitos Humanos."},
  {id:54,s:"RedaÃ§Ã£o",d:2,q:"Proposta de intervenÃ§Ã£o completa â€” 5 elementos.",a:"Agente + AÃ§Ã£o + Modo/Meio + Efeito esperado + Finalidade. Deve ser detalhada, viÃ¡vel e articulada com a tese."},
  {id:55,s:"RedaÃ§Ã£o",d:3,q:"O que diferencia dissertaÃ§Ã£o-argumentativa de texto expositivo?",a:"DissertaÃ§Ã£o: defende ponto de vista para convencer. Expositivo: informa sem tomar partido. ENEM exige dissertaÃ§Ã£o com proposta de intervenÃ§Ã£o social!"},
  {id:56,s:"InglÃªs",d:1,q:"O que significa 'keep pace'?",a:"'Manter o ritmo'. 'Infrastructure has been unable to keep pace' = a infraestrutura nÃ£o conseguiu acompanhar o crescimento populacional. ExpressÃ£o formal."},
  {id:57,s:"InglÃªs",d:2,q:"DiferenÃ§a entre 'even though' e 'however'.",a:"'Even though': conjunÃ§Ã£o de concessÃ£o â€” une duas oraÃ§Ãµes. 'However': advÃ©rbio de contraste â€” liga ideias em oraÃ§Ãµes separadas. NÃ£o sÃ£o intercambiÃ¡veis!"},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  QUIZ EXPANDIDO (40 questÃµes)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const QUIZ=[
  {id:1,s:"FÃ­sica",d:1,q:"MaÃ§Ã£ cai de altura h. Energia cinÃ©tica ao atingir o solo:",opts:["mgh/2","mgh","2mgh","âˆš(2gh)"],ok:1,exp:"ConservaÃ§Ã£o de energia: E. potencial (mgh) â†’ E. cinÃ©tica. Ec = mgh.",src:"UNESP 2022"},
  {id:2,s:"Biologia",d:1,q:"InserÃ§Ã£o de gene de outra espÃ©cie em um organismo:",opts:["Clonagem","Terapia gÃªnica","Transgenia","SeleÃ§Ã£o artificial"],ok:2,exp:"Transgenia = inserÃ§Ã£o de gene de outra espÃ©cie. Ex.: insulina humana em E. coli.",src:"UNESP 2022 Q63"},
  {id:3,s:"HistÃ³ria",d:1,q:"Revolta dos MalÃªs (1835) distingue-se por:",opts:["Ter ocorrido no campo","Ser liderada por escravizados alfabetizados em Ã¡rabe","Ter sido bem-sucedida","Ter apoio de fazendeiros"],ok:1,exp:"Os MalÃªs eram escravizados muÃ§ulmanos que dominavam a escrita em Ã¡rabe â€” organizaÃ§Ã£o Ãºnica nas AmÃ©ricas.",src:"UNESP 2022"},
  {id:4,s:"Literatura",d:1,q:"Movimento que defende 'o valor supremo da experiÃªncia individual':",opts:["Naturalismo","Realismo","Barroco","Romantismo"],ok:3,exp:"Romantismo (sÃ©c. XIX): intuiÃ§Ã£o, emoÃ§Ã£o e natureza contra o racionalismo iluminista.",src:"UNESP 2022 Q15"},
  {id:5,s:"InglÃªs",d:1,q:"'Keep pace' significa:",opts:["Antecipar necessidades","Manter o ritmo","Avaliar a situaÃ§Ã£o","Interferir no desenvolvimento"],ok:1,exp:"'Keep pace' = manter o ritmo. A infraestrutura nÃ£o conseguiu acompanhar o crescimento.",src:"UNESP 2022 Q26"},
  {id:6,s:"QuÃ­mica",d:1,q:"O efeito fotoelÃ©trico depende principalmente de:",opts:["Intensidade da luz","FrequÃªncia da luz","Massa dos elÃ©trons","Temperatura do metal"],ok:1,exp:"Einstein: emissÃ£o depende da FREQUÃŠNCIA (E=hf), nÃ£o da intensidade. Nobel 1921.",src:"UNESP 2022"},
  {id:7,s:"MatemÃ¡tica",d:2,q:"O nÃºmero 210 Ã©:",opts:["Apenas triangular","Apenas oblongo","Triangular E oblongo","Nenhum dos dois"],ok:2,exp:"T(20)=210 âœ“ e O(14)=210 âœ“. Ã‰ ambos! O(n) = 2Â·T(n).",src:"UNESP 2022 Q85"},
  {id:8,s:"Biologia",d:2,q:"HemÃ¡cias + algas em Ã¡gua destilada, centrifugaÃ§Ã£o:",opts:["SÃ³ hemÃ¡cias; soluÃ§Ã£o com clorofila","SÃ³ algas; soluÃ§Ã£o com hemoglobina","Ambas; sem molÃ©culas","Nenhuma; ambas as molÃ©culas"],ok:1,exp:"HemÃ¡cias: lise osmÃ³tica (sem parede) â†’ hemoglobina na soluÃ§Ã£o. Algas: parede rÃ­gida â†’ sobrevivem no precipitado.",src:"UNESP 2022 Q64"},
  {id:9,s:"QuÃ­mica",d:2,q:"No teste do ouro, qual material daria falso positivo?",opts:["Mg (EÂ°= âˆ’2,37V)","Al (EÂ°= âˆ’1,66V)","Fe (EÂ°= âˆ’0,44V)","Pt (EÂ°= +1,20V)"],ok:3,exp:"EÂ°(Pt)=+1,20V > EÂ°(Hâº)=0V â†’ Ã¡cido nÃ£o oxida a platina. Mesmo comportamento do ouro.",src:"UNESP 2022"},
  {id:10,s:"HistÃ³ria",d:2,q:"A charge de Belmonte sobre a Semana de Arte Moderna ironiza:",opts:["O atraso da arte","InexistÃªncia de preocupaÃ§Ãµes populares","O descompasso vanguarda Ã— gosto do pÃºblico","A formaÃ§Ã£o tÃ©cnica dos artistas"],ok:2,exp:"PÃºblico olha com pena: 'Coitados, tÃ£o moÃ§os'. Ironia: incompreensÃ£o era do pÃºblico conservador, nÃ£o dos artistas.",src:"UNESP 2022 Q40"},
  {id:11,s:"FÃ­sica",d:2,q:"600g Ã¡gua 10Â°C + 100g gelo âˆ’40Â°C + 800g Ã¡gua 5Â°C:",opts:["1500g Ã¡gua a 10Â°C","1450g Ã¡gua + 50g gelo a 0Â°C","1500g gelo a âˆ’5Â°C","1500g Ã¡gua a 0Â°C"],ok:3,exp:"Q cedido=10000cal. Aquecer gelo=2000cal + fundir=8000cal=10000cal. EquilÃ­brio: 1500g Ã¡gua a 0Â°C.",src:"UNESP 2022 Q79"},
  {id:12,s:"Literatura",d:2,q:"Recurso cÃ´mico no diÃ¡logo do burro no 'MacÃ¡rio':",opts:["AntÃ­tese","Eufemismo","HipÃ©rbole","Ambiguidade"],ok:3,exp:"'Burro' = animal e insulto. Ambiguidade lexical gera progressÃ£o de mal-entendidos absurdos.",src:"UNESP 2022 Q04"},
  {id:13,s:"Biologia",d:3,q:"23 nomes populares de aves â€” taxonomicamente:",opts:["23 gÃªneros","1 Ãºnico gÃªnero","23 espÃ©cies em 1 gÃªnero","1 classe, sem inferir gÃªneros"],ok:3,exp:"Todas sÃ£o aves = mesma classe. Nomes populares â‰  taxonomia cientÃ­fica. NÃ£o se infere gÃªneros.",src:"UNESP 2022 Q61"},
  {id:14,s:"QuÃ­mica",d:3,q:"SiOâ‚‚ + 3C â†’ SiC + 2CO (rendimento 75%), 6t SiOâ‚‚:",opts:["5,6t SiC","4,0t SiC","3,0t SiC","2,5t SiC"],ok:2,exp:"M: SiOâ‚‚=60, SiC=40. TeÃ³rico=4t Ã— 75% = 3t SiC.",src:"UNESP 2022 Q70"},
  {id:15,s:"FÃ­sica",d:3,q:"ForÃ§a gravitacional exoplaneta 2M1207b (5Ã—Mjup) a 40 UA:",opts:["8,3Ã—10Â²â° N","5,0Ã—10Â²â° N","2,5Ã—10Â²Â¹ N","3,6Ã—10Â²Â¹ N"],ok:0,exp:"F=Gmâ‚mâ‚‚/rÂ². mâ‚=10Â²â¸kg; mâ‚‚=5Ã—10Â²â¸kg; r=6Ã—10Â¹Â²m. Fâ‰ˆ8,3Ã—10Â²â°N.",src:"UNESP 2022 Q77"},
  {id:16,s:"MatemÃ¡tica",d:3,q:"P(pressÃ£o elevada | excesso de peso):",opts:["12%","4%","50%","40%"],ok:3,exp:"P(A|B) = P(Aâˆ©B)/P(B) = 10%/25% = 40%. Probabilidade condicional â€” nÃ£o Ã© 10%!",src:"UNESP 2022 Q88"},
  {id:17,s:"Filosofia",d:2,q:"Norbert Elias: morte Ã© problema dos vivos porque:",opts:["Humanos antecipam a prÃ³pria morte","Mortos deixam dÃ­vidas","A morte Ã© imprevisÃ­vel","Animais tambÃ©m morrem"],ok:0,exp:"SÃ³ humanos sabem que morrerÃ£o. Os mortos nÃ£o tÃªm problemas â€” quem sofre com a finitude sÃ£o os vivos.",src:"UNESP 2022 Q11"},
  {id:18,s:"Biologia",d:2,q:"HormÃ´nio vegetal que controla o fototropismo:",opts:["Giberelina","Citocinina","Etileno","Auxina (AIA)"],ok:3,exp:"Auxina acumula no lado nÃ£o iluminado â†’ elongamento â†’ curvatura. Darwin (1880).",src:"UNESP 2022 Q66"},
  {id:19,s:"QuÃ­mica",d:2,q:"O que ocorre com o equilÃ­brio Nâ‚‚ + 3Hâ‚‚ â‡Œ 2NHâ‚ƒ ao aumentar a pressÃ£o?",opts:["Desloca para reagentes","Desloca para produtos (NHâ‚ƒ)","NÃ£o se altera","Aumenta a temperatura"],ok:1,exp:"Le Chatelier: pressÃ£o maior â†’ desloca para o lado com menos moles de gÃ¡s (2 < 4). Favorece NHâ‚ƒ. Base do processo Haber.",src:"Fundamentos"},
  {id:20,s:"FÃ­sica",d:2,q:"Qual Ã© a unidade SI de forÃ§a?",opts:["Joule","Pascal","Newton","Watt"],ok:2,exp:"Newton (N) = kgÂ·m/sÂ². 2Âª Lei de Newton: F = mÂ·a. Joule = energia, Pascal = pressÃ£o, Watt = potÃªncia.",src:"Fundamentos"},
  {id:21,s:"MatemÃ¡tica",d:1,q:"Qual Ã© o valor de logâ‚â‚€(1000)?",opts:["2","3","4","10"],ok:1,exp:"logâ‚â‚€(1000) = logâ‚â‚€(10Â³) = 3. Logaritmo Ã© o expoente ao qual a base deve ser elevada para obter o nÃºmero.",src:"Fundamentos"},
  {id:22,s:"Biologia",d:1,q:"O que Ã© DNA recombinante?",opts:["DNA sintetizado quimicamente","DNA de duas espÃ©cies diferentes combinados","DNA duplicado na mitose","DNA extraÃ­do de vÃ­rus"],ok:1,exp:"DNA recombinante = combinaÃ§Ã£o de sequÃªncias de DNA de espÃ©cies diferentes. Base da engenharia genÃ©tica e produÃ§Ã£o de insulina, vacinas, etc.",src:"Fundamentos"},
  {id:23,s:"Geografia",d:2,q:"O fenÃ´meno La NiÃ±a provoca no Brasil:",opts:["Secas no Norte e chuvas no Sul","Chuvas no Norte e secas no Sul e Nordeste","Temperaturas uniformes","AusÃªncia de variaÃ§Ãµes climÃ¡ticas"],ok:1,exp:"La NiÃ±a: esfriamento do PacÃ­fico â†’ intensifica chuvas no Norte/CO e provoca secas no Sul/Nordeste. El NiÃ±o faz o oposto.",src:"Fundamentos"},
  {id:24,s:"HistÃ³ria",d:2,q:"A Semana de Arte Moderna de 1922 ocorreu em:",opts:["Rio de Janeiro","BrasÃ­lia","SÃ£o Paulo","Salvador"],ok:2,exp:"Realizada no Teatro Municipal de SÃ£o Paulo (11 a 18 de fevereiro de 1922). Marco do Modernismo brasileiro.",src:"Fundamentos"},
  {id:25,s:"Literatura",d:1,q:"'Grande SertÃ£o: Veredas' Ã© de:",opts:["JosÃ© de Alencar","Machado de Assis","JoÃ£o GuimarÃ£es Rosa","Clarice Lispector"],ok:2,exp:"JoÃ£o GuimarÃ£es Rosa (1956). Marco do Regionalismo Modernista. Neologismos, linguagem oral e filosofia existencial no sertÃ£o mineiro.",src:"Fundamentos"},
  {id:26,s:"Filosofia",d:2,q:"'O homem Ã© a medida de todas as coisas' Ã© de:",opts:["SÃ³crates","PlatÃ£o","ProtÃ¡goras","AristÃ³teles"],ok:2,exp:"ProtÃ¡goras (sÃ©c. V a.C.), sofista. Frase fundadora do relativismo: nÃ£o hÃ¡ verdade absoluta, apenas perspectivas humanas.",src:"Fundamentos"},
  {id:27,s:"QuÃ­mica",d:1,q:"Qual Ã© o pH de uma soluÃ§Ã£o com [Hâº] = 10â»â· mol/L?",opts:["3","5","7","9"],ok:2,exp:"pH = âˆ’log[Hâº] = âˆ’log(10â»â·) = 7. pH 7 = neutro a 25Â°C. Abaixo de 7 = Ã¡cido; acima = bÃ¡sico.",src:"Fundamentos"},
  {id:28,s:"FÃ­sica",d:1,q:"A velocidade da luz no vÃ¡cuo Ã© aproximadamente:",opts:["3Ã—10â¶ m/s","3Ã—10â¸ m/s","3Ã—10Â¹â° m/s","3Ã—10Â¹Â² m/s"],ok:1,exp:"c â‰ˆ 3Ã—10â¸ m/s = 300.000 km/s. Constante fundamental. Base da relatividade de Einstein: nada pode ultrapassar c.",src:"Fundamentos"},
  {id:29,s:"MatemÃ¡tica",d:2,q:"Em uma PA: aâ‚=2, r=3. Qual Ã© o 10Âº termo?",opts:["27","29","32","35"],ok:1,exp:"aâ‚™ = aâ‚ + (n-1)Â·r = 2 + 9Ã—3 = 2 + 27 = 29. ProgressÃ£o AritmÃ©tica: diferenÃ§a constante entre termos.",src:"Fundamentos"},
  {id:30,s:"Biologia",d:2,q:"O que sÃ£o cÃ©lulas-tronco pluripotentes?",opts:["CÃ©lulas que sÃ³ se dividem uma vez","CÃ©lulas que podem originar qualquer tipo celular do organismo","CÃ©lulas exclusivas do sistema nervoso","CÃ©lulas cancerÃ­genas"],ok:1,exp:"Pluripotentes: podem originar qualquer tipo celular (mas nÃ£o placenta). Totipotentes: originam tudo. Base da medicina regenerativa.",src:"Fundamentos"},
  {id:31,s:"Geografia",d:1,q:"O bioma com maior biodiversidade do Brasil Ã©:",opts:["Cerrado","Caatinga","Pantanal","AmazÃ´nia"],ok:3,exp:"AmazÃ´nia: maior floresta tropical do mundo, ~30% das espÃ©cies do planeta. Mas o Cerrado Ã© o bioma mais ameaÃ§ado, com 5% da biodiversidade global.",src:"Fundamentos"},
  {id:32,s:"HistÃ³ria",d:1,q:"O Estado Novo de Vargas durou de:",opts:["1930-1937","1937-1945","1945-1950","1950-1954"],ok:1,exp:"Estado Novo: 1937-1945. Vargas fechou o Congresso, outorgou nova ConstituiÃ§Ã£o ('polaca'), censura e industrializaÃ§Ã£o. Deposto em 1945.",src:"Fundamentos"},
  {id:33,s:"QuÃ­mica",d:2,q:"ReaÃ§Ã£o de saponificaÃ§Ã£o produz:",opts:["Ãcido graxo + Ã¡lcool","SabÃ£o (sal de Ã¡cido graxo) + glicerol","Ã‰ster + Ã¡gua","Ãcido + base"],ok:1,exp:"SaponificaÃ§Ã£o: triglicerÃ­deo + NaOH â†’ sabÃ£o (sal de Ã¡cido graxo) + glicerol. Base da produÃ§Ã£o industrial de sabÃ£o.",src:"Fundamentos"},
  {id:34,s:"FÃ­sica",d:2,q:"A Lei de Ohm relaciona:",opts:["Massa e aceleraÃ§Ã£o","TensÃ£o, corrente e resistÃªncia","ForÃ§a e deslocamento","Calor e temperatura"],ok:1,exp:"V = RÂ·I. TensÃ£o (V) = ResistÃªncia (Î©) Ã— Corrente (A). Georg Ohm (1827). VÃ¡lida para condutores Ã´hmicos.",src:"Fundamentos"},
  {id:35,s:"MatemÃ¡tica",d:3,q:"Qual Ã© a derivada de f(x) = xÂ³ + 2x?",opts:["3xÂ² + 2","3x + 2","xÂ² + 2","3xÂ²"],ok:0,exp:"Regra da potÃªncia: d/dx(xâ¿) = nÂ·xâ¿â»Â¹. f'(x) = 3xÂ² + 2. Derivada constante = 0.",src:"Fundamentos"},
  {id:36,s:"Biologia",d:3,q:"O que Ã© a lei de Hardy-Weinberg?",opts:["FrequÃªncias alÃ©licas mudam por seleÃ§Ã£o natural","FrequÃªncias alÃ©licas permanecem constantes em populaÃ§Ã£o ideal","Genes ligados se separam na meiose","CaracterÃ­sticas adquiridas sÃ£o herdadas"],ok:1,exp:"EquilÃ­brio de Hardy-Weinberg: pÂ² + 2pq + qÂ² = 1. FrequÃªncias constantes sem seleÃ§Ã£o, mutaÃ§Ã£o, deriva ou migraÃ§Ã£o. Linha de base para detectar evoluÃ§Ã£o.",src:"Fundamentos"},
  {id:37,s:"Literatura",d:2,q:"O Realismo/Naturalismo brasileiro tem como marco inicial:",opts:["Iracema (1865)","O CortiÃ§o (1890)","MemÃ³rias PÃ³stumas de BrÃ¡s Cubas (1881)","MacunaÃ­ma (1928)"],ok:2,exp:"MemÃ³rias PÃ³stumas de BrÃ¡s Cubas (Machado de Assis, 1881) inaugura o Realismo. Narrador defunto, ironia e anÃ¡lise psicolÃ³gica.",src:"Fundamentos"},
  {id:38,s:"Filosofia",d:3,q:"O imperativo categÃ³rico de Kant diz:",opts:["Age para maximizar o prazer","Age conforme possa querer que seja lei universal","Age conforme a natureza","Age para agradar a maioria"],ok:1,exp:"'Age apenas segundo mÃ¡ximas que possas querer que sejam leis universais.' Moral racional, nÃ£o empÃ­rica. OpÃµe-se ao utilitarismo.",src:"Fundamentos"},
  {id:39,s:"QuÃ­mica",d:1,q:"A fÃ³rmula molecular da glicose Ã©:",opts:["Câ‚â‚‚Hâ‚‚â‚‚Oâ‚â‚","Câ‚†Hâ‚â‚‚Oâ‚†","Câ‚‚Hâ‚†O","CHâ‚„"],ok:1,exp:"Glicose: Câ‚†Hâ‚â‚‚Oâ‚†. Principal fonte de energia celular. Produto da fotossÃ­ntese. A sacarose Ã© Câ‚â‚‚Hâ‚‚â‚‚Oâ‚â‚ (dissacarÃ­deo).",src:"Fundamentos"},
  {id:40,s:"Geografia",d:3,q:"O conceito de 'lugar' em Milton Santos:",opts:["EspaÃ§o abstrato sem significado","PorÃ§Ã£o do espaÃ§o com identidade e vivÃªncia","TerritÃ³rio delimitado por fronteiras","Paisagem natural preservada"],ok:1,exp:"Lugar em Milton Santos: espaÃ§o vivido, carregado de significados e relaÃ§Ãµes cotidianas. Diferente de territÃ³rio (poder) e paisagem (forma).",src:"Fundamentos"},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  30 TEMAS DE REDAÃ‡ÃƒO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ESSAY_TOPICS=[
  {t:"Invisibilidade e registro civil no Brasil",tipo:"ENEM",c:"#c9a84c",dica:"Paradoxo: sem documentos, cidadÃ£os sÃ£o invisÃ­veis ao Estado mas vulnerÃ¡veis Ã  exclusÃ£o. Argumente sobre acesso a direitos e omissÃ£o do poder pÃºblico."},
  {t:"Viver em rede no sÃ©culo XXI",tipo:"ENEM",c:"#4a7a9e",dica:"Dualidade: conectividade X isolamento social, fake news e dependÃªncia tecnolÃ³gica. Apresente ambos os lados com nuance."},
  {t:"Desigualdade de gÃªnero no trabalho de cuidado",tipo:"ENEM",c:"#9e4a9e",dica:"Mulheres realizam 75% do trabalho de cuidado nÃ£o remunerado. Conecte com mercado de trabalho, autonomia financeira e cultura patriarcal."},
  {t:"Escassez de semicondutores e soberania tecnolÃ³gica",tipo:"FUVEST",c:"#c9a84c",dica:"Taiwan produz 90% dos chips avanÃ§ados. Explore dependÃªncia tecnolÃ³gica, guerra comercial EUA-China e o papel estratÃ©gico do Brasil."},
  {t:"DemocratizaÃ§Ã£o do esporte no Brasil",tipo:"FUVEST",c:"#4a9e6a",dica:"DivisÃ£o socioeconÃ´mica no acesso ao esporte. Use o skate olÃ­mpico como caso de sucesso perifÃ©rico. Cortes em escolas pÃºblicas."},
  {t:"ViolÃªncia contra a mulher no Brasil",tipo:"ENEM",c:"#9e4a4a",dica:"Atlas da ViolÃªncia: 1 mulher morta a cada 6h. Causas: patriarcado e dependÃªncia econÃ´mica. Proposta completa: agente + aÃ§Ã£o + meio + efeito + finalidade."},
  {t:"SaÃºde mental na era digital",tipo:"ENEM",c:"#7a6a9e",dica:"Aumento de ansiedade e depressÃ£o em jovens. Redes sociais, comparaÃ§Ã£o social, FOMO. Responsabilidade das plataformas e educaÃ§Ã£o midiÃ¡tica."},
  {t:"SeguranÃ§a alimentar e agrotÃ³xicos no Brasil",tipo:"ENEM",c:"#4a9e7a",dica:"Brasil usa 20% dos agrotÃ³xicos mundiais. TensÃ£o: produtividade agrÃ­cola Ã— saÃºde pÃºblica. Lei dos AgrotÃ³xicos e agroecologia como alternativa."},
  {t:"A cultura do cancelamento e o debate pÃºblico",tipo:"ENEM",c:"#9e7a4a",dica:"Cancelamento: puniÃ§Ã£o coletiva nas redes. TensÃ£o entre responsabilizaÃ§Ã£o justa e linchamento virtual. Liberdade de expressÃ£o vs. discurso de Ã³dio."},
  {t:"Crise climÃ¡tica e responsabilidade intergeracional",tipo:"FUVEST",c:"#4a9e6a",dica:"Acordo de Paris, IPCC, movimentos como Fridays for Future. Quem deve pagar a conta? PaÃ­ses ricos vs. emergentes. JustiÃ§a climÃ¡tica."},
  {t:"InteligÃªncia artificial e o futuro do trabalho",tipo:"ENEM",c:"#c9a84c",dica:"AutomaÃ§Ã£o elimina empregos operacionais mas cria outros. RequalificaÃ§Ã£o profissional, renda bÃ¡sica universal, responsabilidade das empresas."},
  {t:"Povos indÃ­genas e o direito ao territÃ³rio",tipo:"ENEM",c:"#9e4a4a",dica:"Marco Temporal, garimpo ilegal, demarcaÃ§Ãµes. Artigo 231 da ConstituiÃ§Ã£o. TensÃ£o entre desenvolvimento econÃ´mico e direitos originÃ¡rios."},
  {t:"Crise hÃ­drica e gestÃ£o da Ã¡gua no Brasil",tipo:"FUVEST",c:"#4a7a9e",dica:"Brasil tem 12% da Ã¡gua doce mundial mas distribuiÃ§Ã£o desigual. Nordeste semiÃ¡rido vs. desperdÃ­cio urbano. CobranÃ§a pelo uso e saneamento bÃ¡sico."},
  {t:"Fake news e ameaÃ§as Ã  democracia",tipo:"ENEM",c:"#7a6a9e",dica:"DesinformaÃ§Ã£o como arma polÃ­tica. Papel das plataformas, regulaÃ§Ã£o, mÃ­dia pÃºblica e letramento digital. TSE e eleiÃ§Ãµes no Brasil."},
  {t:"Abandono afetivo e responsabilidade parental",tipo:"ENEM",c:"#9e7a4a",dica:"Lei 12.318/2010 (alienaÃ§Ã£o parental). Abandono afetivo como dano moral. CrianÃ§a e adolescente tÃªm direito ao convÃ­vio familiar saudÃ¡vel."},
  {t:"O estigma da doenÃ§a mental no Brasil",tipo:"ENEM",c:"#4a9e9e",dica:"Apenas 3% do PIB em saÃºde. SubnotificaÃ§Ã£o, preconceito, falta de CAPS. Reforma PsiquiÃ¡trica (Lei 10.216) e desinstitucionalizaÃ§Ã£o."},
  {t:"Trabalho infantil e vulnerabilidade social",tipo:"ENEM",c:"#9e4a4a",dica:"Brasil tem 1,7 milhÃ£o de crianÃ§as em trabalho infantil. Pobreza estrutural, ECA, Programa de ErradicaÃ§Ã£o do Trabalho Infantil (PETI)."},
  {t:"Acesso ao ensino superior e cotas raciais",tipo:"FUVEST",c:"#c9a84c",dica:"Lei de Cotas (2012). Debate: meritocracia vs. equidade. Dados mostram aumento de negros nas universidades. Interseccionalidade racial e social."},
  {t:"Envelhecimento da populaÃ§Ã£o e previdÃªncia social",tipo:"FUVEST",c:"#4a7a9e",dica:"IBGE: Brasil terÃ¡ mais idosos que jovens em 2030. Reforma da PrevidÃªncia (EC 103/2019). Cuidado com idosos e violÃªncia contra a terceira idade."},
  {t:"Mortalidade materna no Brasil",tipo:"ENEM",c:"#9e4a9e",dica:"Brasil tem das maiores taxas da AL. Disparidade racial: mortalidade de negras Ã© 3x maior. PrÃ©-natal, humanizaÃ§Ã£o do parto, violÃªncia obstÃ©trica."},
  {t:"Saneamento bÃ¡sico e dignidade humana",tipo:"ENEM",c:"#4a9e6a",dica:"35 milhÃµes sem Ã¡gua potÃ¡vel. Novo Marco do Saneamento (2020). PrivatizaÃ§Ã£o vs. universalizaÃ§Ã£o. RelaÃ§Ã£o com doenÃ§as de veiculaÃ§Ã£o hÃ­drica."},
  {t:"ViolÃªncia nas escolas e cultura de paz",tipo:"ENEM",c:"#7a6a9e",dica:"Bullying, ataques, evasÃ£o escolar. Escola como reflexo da violÃªncia social. MediaÃ§Ã£o de conflitos, apoio psicolÃ³gico e formaÃ§Ã£o docente."},
  {t:"A heranÃ§a da escravidÃ£o no Brasil contemporÃ¢neo",tipo:"FUVEST",c:"#9e4a4a",dica:"353 anos de escravidÃ£o. Desigualdade racial, subrepresentaÃ§Ã£o polÃ­tica, encarceramento. AÃ§Ãµes afirmativas e reparaÃ§Ã£o histÃ³rica."},
  {t:"Economia circular e descarte de resÃ­duos",tipo:"FUVEST",c:"#4a9e7a",dica:"Brasil gera 80 milhÃµes de toneladas de lixo/ano. PolÃ­tica Nacional de ResÃ­duos SÃ³lidos (2010). LogÃ­stica reversa, catadores e obsolescÃªncia programada."},
  {t:"RefÃºgio e migraÃ§Ãµes forÃ§adas no sÃ©culo XXI",tipo:"ENEM",c:"#4a7a9e",dica:"130 milhÃµes de deslocados no mundo (UNHCR). Venezuela, SÃ­ria, Haiti. Xenofobia, integraÃ§Ã£o, direitos humanos e responsabilidade dos Estados."},
  {t:"O papel da arte na transformaÃ§Ã£o social",tipo:"ENEM",c:"#9e7a4a",dica:"Arte como denÃºncia, resistÃªncia e construÃ§Ã£o de identidade. Censura, financiamento pÃºblico (Lei Rouanet), democratizaÃ§Ã£o do acesso Ã  cultura."},
  {t:"SeguranÃ§a pÃºblica e encarceramento em massa",tipo:"FUVEST",c:"#9e4a4a",dica:"Brasil tem 4Âª maior populaÃ§Ã£o carcerÃ¡ria do mundo. SuperlotaÃ§Ã£o, racismo na aplicaÃ§Ã£o da lei, reincidÃªncia. Alternativas penais e ressocializaÃ§Ã£o."},
  {t:"DesindustrializaÃ§Ã£o e desenvolvimento econÃ´mico",tipo:"FUVEST",c:"#c9a84c",dica:"Brasil perdeu 30% da indÃºstria manufatureira. NeoindustrializaÃ§Ã£o, polÃ­tica de conteÃºdo local, inovaÃ§Ã£o e inserÃ§Ã£o na cadeia global de valor."},
  {t:"Diversidade cultural e homogeneizaÃ§Ã£o midiÃ¡tica",tipo:"ENEM",c:"#4a9e9e",dica:"GlobalizaÃ§Ã£o apaga culturas locais. LÃ­nguas em extinÃ§Ã£o, patrimÃ´nio imaterial, indÃºstria cultural. Papel da mÃ­dia pÃºblica e diversidade nas telas."},
  {t:"Biotecnologia, Ã©tica e os limites da ciÃªncia",tipo:"FUVEST",c:"#7a6a9e",dica:"CRISPR, bebÃªs geneticamente editados, clonagem. Quem decide os limites? BioÃ©tica, comitÃªs de Ã©tica, acesso democrÃ¡tico Ã  biotecnologia."},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  EXAMES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const EXAMS=[{
  id:"u22",nome:"UNESP 2022",ano:"2022",cor:"#c9a84c",total:90,
  mats:["Biologia","QuÃ­mica","FÃ­sica","MatemÃ¡tica","Geografia","HistÃ³ria","Literatura","InglÃªs","Filosofia"],
  hl:"G6PD/malÃ¡ria Â· Placas Mercosul Â· Semana Arte Moderna Â· Revolta MalÃªs Â· Canal de Suez Â· PanÃ³ptico Â· BinÃ¡rio 2021",
  qs:[
    {n:2,s:"Literatura",t:"Para MacÃ¡rio, a poesia deveria ser:",opts:["(A) Elitista â€” sÃ³ para o rico","(B) HermÃ©tica e obscura","(C) Despojada e simples","(D) Engajada politicamente","(E) Sentimental"],ok:0,exp:"MacÃ¡rio defende que ela pertenÃ§a Ã  elite."},
    {n:4,s:"Literatura",t:"Efeito cÃ´mico no diÃ¡logo do burro decorre de:",opts:["(A) AntÃ­tese","(B) Eufemismo","(C) HipÃ©rbole","(D) Ambiguidade","(E) PersonificaÃ§Ã£o"],ok:3,exp:"Ambiguidade lexical: 'burro' = animal e insulto."},
    {n:11,s:"Filosofia",t:"Segundo Norbert Elias, a morte Ã© 'problema dos vivos' porque:",opts:["(A) Humanos antecipam a prÃ³pria morte","(B) Mortos deixam dÃ­vidas","(C) A morte Ã© imprevisÃ­vel","(D) Animais nÃ£o morrem","(E) CiÃªncia nÃ£o estuda a morte"],ok:0,exp:"SÃ³ humanos sabem que morrerÃ£o e tomam precauÃ§Ãµes."},
    {n:61,s:"Biologia",t:"23 nomes populares de aves pertencem a:",opts:["(A) 23 gÃªneros","(B) 1 Ãºnico gÃªnero","(C) 23 espÃ©cies em 1 gÃªnero","(D) 1 famÃ­lia","(E) 1 classe, sem inferir gÃªneros"],ok:4,exp:"Todas sÃ£o aves = mesma classe (Aves)."},
    {n:85,s:"MatemÃ¡tica",t:"Sobre T(n) e O(n), qual CORRETA?",opts:["(A) 162 Ã© o 15Âº triangular","(B) 13Âº triangular Ã© primo","(C) 156 nÃ£o Ã© nem um nem outro","(D) 210 Ã© triangular E oblongo","(E) DiferenÃ§a entre triangulares Ã© PG"],ok:3,exp:"T(20)=210 âœ“ e O(14)=210 âœ“."},
    {n:88,s:"MatemÃ¡tica",t:"Renato tem excesso de peso. P(pressÃ£o elevada)?",opts:["(A) 12%","(B) 4%","(C) 50%","(D) 40%","(E) 10%"],ok:3,exp:"P(elevada|excesso) = 10%/25% = 40%. Probabilidade condicional."},
  ]
}];

const MATS=["Todos","Biologia","QuÃ­mica","FÃ­sica","MatemÃ¡tica","Geografia","HistÃ³ria","Literatura","Filosofia","RedaÃ§Ã£o","InglÃªs"];
const TABS=["flashcards","quiz","notebooks","essay","exams","stats"];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ESTADO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let tab="flashcards",subj="Todos",diff=0;
let flipped={};
window.studied={};window.qOk=0;window.qErr=0;
let qIdx=0,qAns=null,qAnswered=false,qDone=false;
let eTopic=null,eFB=null,eLoad=false,eScores=null,savedEssays=[],expandedEssay=null;
let xAns={};
let notebooks=[],currentNB=null,nbPageType="lined",nbColor="#c9a84c";
let saveTimer=null;

function scheduleSave(){clearTimeout(saveTimer);saveTimer=setTimeout(()=>{if(window.fbSaveProgress)window.fbSaveProgress();},1500);}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NAVEGAÃ‡ÃƒO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function goTab(t){
  tab=t;
  document.querySelectorAll(".tab").forEach(e=>e.classList.remove("active"));
  document.querySelectorAll(".nb").forEach((b,i)=>b.classList.toggle("on",TABS[i]===t));
  document.getElementById("tab-"+t).classList.add("active");
  renderFilters();render();
  if(t==="essay")loadSavedEssays();
  if(t==="notebooks")loadNotebooks();
}
window.renderFilters=function(){
  const el=document.getElementById("farea");
  if(["essay","exams","stats","notebooks"].includes(tab)){el.innerHTML="";return;}
  let h=`<div class="fbar"><span class="flabel">MatÃ©ria:</span>`;
  MATS.forEach(m=>{const on=subj===m,c=COR[m]||"var(--g)";
    h+=`<button class="fc${on?" on":""}" style="${on?`background:${c}18;border-color:${c};color:${c}`:""}" onclick="setSubj('${m}')">${m}</button>`;});
  h+=`</div><div class="fbar" style="margin-bottom:22px"><span class="flabel">Dificuldade:</span><div class="dbar">`;
  [["0","Todos"],["1","â˜… FÃ¡cil"],["2","â˜…â˜… MÃ©dio"],["3","â˜…â˜…â˜… DifÃ­cil"]].forEach(([v,l])=>{
    h+=`<button class="dc${diff==v?" on":""}" data-d="${v}" onclick="setDiff(${v})">${l}</button>`;});
  h+=`</div></div>`;el.innerHTML=h;
};
function setSubj(s){subj=s;if(tab==="quiz")resetQuiz();renderFilters();render();}
function setDiff(d){diff=d;if(tab==="quiz")resetQuiz();renderFilters();render();}
window.render=function(){
  ({flashcards:renderCards,quiz:renderQuiz,notebooks:renderNotebooks,essay:renderEssay,exams:renderExams,stats:renderStats})[tab]?.();
  updateHdr();
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FLASHCARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getCards(){return CARDS.filter(c=>(subj==="Todos"||c.s===subj)&&(diff==0||c.d==diff));}
function renderCards(){
  const cards=getCards(),total=cards.length,done=cards.filter(c=>window.studied[c.id]).length;
  const p=document.getElementById("fcprog");p.style.display="flex";
  const pct=total?done/total*100:0;
  p.innerHTML=`<div class="ps-item"><div class="ps-label">Estudados</div><div class="ps-val" style="color:var(--g2)">${done}</div></div>
    <div class="ps-item"><div class="ps-label">Total</div><div class="ps-val">${total}</div></div>
    <div class="ps-bar-wrap"><div class="ps-label">Progresso â€” ${Math.round(pct)}%</div>
      <div class="ps-bar"><div class="ps-fill" style="width:${pct}%"></div></div>
    </div>`;
  if(!cards.length){document.getElementById("cgrid").innerHTML='<div class="empty">Nenhum card para esses filtros.</div>';return;}
  document.getElementById("cgrid").innerHTML=cards.map(c=>{
    const f=flipped[c.id],col=COR[c.s]||"var(--g)";
    const dt=["","â˜… FÃ¡cil","â˜…â˜… MÃ©dio","â˜…â˜…â˜… DifÃ­cil"][c.d],dc=["","d1","d2","d3"][c.d];
    return `<div class="card${f?" flip":""}" onclick="flipCard(${c.id})">
      <div class="card-top">
        <span class="stag" style="background:${col}18;color:${col}">${c.s}</span>
        <span class="dtag ${dc}">${dt}</span>
      </div>
      ${window.studied[c.id]?`<div class="card-check">âœ“</div>`:""}
      <p class="card-q">${c.q}</p>
      <div class="card-ans">${c.a}</div>
      <p class="card-hint">â†© Toque para revelar</p>
    </div>`;
  }).join("");
}
function flipCard(id){flipped[id]=!flipped[id];window.studied[id]=true;renderCards();updateHdr();scheduleSave();}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  QUIZ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getQuiz(){return QUIZ.filter(q=>(subj==="Todos"||q.s===subj)&&(diff==0||q.d==diff));}
function renderQuiz(){
  const qs=getQuiz(),w=document.getElementById("qwrap");
  if(!qs.length){w.innerHTML='<div class="empty">Nenhuma questÃ£o para esses filtros.</div>';return;}
  if(qDone){
    const p=window.qOk/qs.length;
    w.innerHTML=`<div class="quiz-done">
      <span class="qd-emoji">${p>=.8?"ğŸ†":p>=.6?"ğŸ’ª":"ğŸ“–"}</span>
      <div class="qd-h">${p>=.8?"Excelente domÃ­nio!":p>=.6?"Bom resultado!":"Continue estudando!"}</div>
      <div class="qd-score" style="color:${p>=.7?"var(--ok)":p>=.5?"var(--g)":"var(--no)"}">${window.qOk}/${qs.length}</div>
      <p class="qd-p">${p>=.8?"VocÃª domina o conteÃºdo.":p>=.6?"Revise os erros e repita.":"A persistÃªncia Ã© o caminho."}</p>
      <button class="btn" onclick="resetQuiz()">Tentar novamente</button>
    </div>`;return;
  }
  const q=qs[qIdx],col=COR[q.s]||"var(--g)";
  const dt=["","â˜… FÃ¡cil","â˜…â˜… MÃ©dio","â˜…â˜…â˜… DifÃ­cil"][q.d],dc=["","d1","d2","d3"][q.d];
  const opts=q.opts.map((o,i)=>{
    let c="opt";if(qAnswered){if(i===q.ok)c+=" ok";else if(i===qAns&&i!==q.ok)c+=" no";}
    return `<button class="${c}" onclick="answerQ(${i})" ${qAnswered?"disabled":""}>${o}</button>`;
  }).join("");
  const exp=qAnswered?`<div class="qexp"><strong>ğŸ’¡ ExplicaÃ§Ã£o:</strong> ${q.exp}<br><small style="opacity:.45;margin-top:5px;display:block;font-family:'JetBrains Mono',monospace;font-size:10px">Fonte: ${q.src}</small></div>
    <button class="btn btn-w" onclick="nextQ()">${qIdx+1>=qs.length?"Ver resultado â†’":"PrÃ³xima questÃ£o â†’"}</button>`:"";
  w.innerHTML=`
    <div class="quiz-hdr">
      <div class="qprog"><div class="qprog-fill" style="width:${qIdx/qs.length*100}%"></div></div>
      <div class="qmeta"><span>Q${qIdx+1}/${qs.length}</span><span class="q-ok">âœ“${window.qOk}</span><span class="q-no">âœ—${window.qErr}</span></div>
    </div>
    <div class="qbox">
      <div class="qbox-top">
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <span class="stag" style="background:${col}18;color:${col}">${q.s}</span>
          <span class="dtag ${dc}">${dt}</span>
        </div>
        <span class="qsrc">${q.src}</span>
      </div>
      <p class="qq">${q.q}</p>
    </div>
    <div class="opts">${opts}</div>
    <div style="margin-top:14px">${exp}</div>`;
}
function answerQ(i){if(qAnswered)return;qAns=i;qAnswered=true;if(i===getQuiz()[qIdx].ok)window.qOk++;else window.qErr++;renderQuiz();updateHdr();scheduleSave();}
function nextQ(){const qs=getQuiz();if(qIdx+1>=qs.length)qDone=true;else{qIdx++;qAnswered=false;qAns=null;}renderQuiz();}
function resetQuiz(){qIdx=0;window.qOk=0;window.qErr=0;qAnswered=false;qDone=false;qAns=null;renderQuiz();updateHdr();}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CADERNOS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadNotebooks(){
  if(window.fbGetNotebooks){notebooks=await window.fbGetNotebooks();}
  renderNotebooks();
}
function renderNotebooks(){
  const w=document.getElementById("nbwrap");
  if(currentNB){renderNBEditor();return;}
  const icons={"lined":"ğŸ“","grid":"âŠ","dot":"Â·","blank":"â–¡","music":"â™ª"};
  const grid=notebooks.map(nb=>`
    <div class="nb-card" style="--nb-color:${nb.color||'var(--g)'}" onclick="openNB('${nb.id}')">
      <div class="nb-icon">${icons[nb.pageType]||"ğŸ““"}</div>
      <div class="nb-title">${nb.name}</div>
      <div class="nb-meta">${nb.color?"":" "} Ãšltima ediÃ§Ã£o: ${nb.updatedAt?.seconds?new Date(nb.updatedAt.seconds*1000).toLocaleDateString('pt-BR'):"agora"}</div>
      <div class="nb-pages">${(nb.content||"").split(/\s+/).filter(Boolean).length} palavras Â· ${nb.pageType||"lined"}</div>
    </div>`).join("");
  w.innerHTML=`
    <div class="sec-hd">
      <div class="sec-title">Meus <em>Cadernos</em></div>
      <div class="sec-sub">Anote, organize e estude â€” 5 tipos de folha Â· Salvo automaticamente</div>
    </div>
    <div class="notebooks-grid">
      ${grid}
      <div class="nb-new" onclick="openNBModal()">
        <div class="nb-new-icon">ï¼‹</div>
        <div class="nb-new-label">Novo caderno</div>
      </div>
    </div>`;
}
function openNB(id){currentNB=notebooks.find(n=>n.id===id)||null;renderNotebooks();}
function closeNB(){currentNB=null;renderNotebooks();}
function renderNBEditor(){
  const w=document.getElementById("nbwrap"),nb=currentNB;
  const icons={"lined":"ğŸ“ Pautado","grid":"âŠ Quadriculado","dot":"Â· Pontilhado","blank":"â–¡ Em branco","music":"â™ª Pentagrama"};
  w.innerHTML=`
    <div class="nb-editor">
      <div class="nb-editor-hdr">
        <button class="btn-ghost" onclick="closeNB()">â† Cadernos</button>
        <input class="nb-title-input" id="nb-title-inp" value="${nb.name}" placeholder="Nome do caderno" onchange="updateNBTitle(this.value)">
        <span style="font-size:11px;color:var(--dim);font-family:'JetBrains Mono',monospace">${icons[nb.pageType]||""}</span>
        <button class="btn-ghost" onclick="deleteNB('${nb.id}')">ğŸ—‘ï¸</button>
      </div>
      <div class="nb-toolbar">
        <span style="font-size:10px;color:var(--dim);font-family:'JetBrains Mono',monospace;margin-right:8px;text-transform:uppercase;letter-spacing:.6px">Folha:</span>
        <button class="nb-btn${nb.pageType==='lined'?' active':''}" onclick="changePageType('lined')">ğŸ“ Pautado</button>
        <button class="nb-btn${nb.pageType==='grid'?' active':''}" onclick="changePageType('grid')">âŠ Grade</button>
        <button class="nb-btn${nb.pageType==='dot'?' active':''}" onclick="changePageType('dot')">Â· Pontilhado</button>
        <button class="nb-btn${nb.pageType==='blank'?' active':''}" onclick="changePageType('blank')">â–¡ Branco</button>
        <button class="nb-btn${nb.pageType==='music'?' active':''}" onclick="changePageType('music')">â™ª Pentagrama</button>
        <div style="flex:1"></div>
        <button class="btn-ghost" onclick="saveNB()">â˜ï¸ Salvar</button>
      </div>
      <div class="page-${nb.pageType||'lined'}">
        <textarea class="nb-page" id="nb-content" placeholder="Comece a escrever suas anotaÃ§Ãµes..." oninput="updNBW()">${nb.content||""}</textarea>
      </div>
      <div class="nb-footer">
        <span class="nb-wc" id="nb-wc">0 palavras</span>
        <span style="font-size:10px;color:var(--dim);font-family:'JetBrains Mono',monospace" id="nb-saved">Auto-salvo ativo</span>
      </div>
    </div>`;
  updNBW();
  // Auto-save
  const ta=document.getElementById("nb-content");
  if(ta){
    let nbTimer=null;
    ta.addEventListener("input",()=>{
      clearTimeout(nbTimer);
      document.getElementById("nb-saved").textContent="Salvando...";
      nbTimer=setTimeout(()=>saveNB(true),2000);
    });
  }
}
function updNBW(){
  const ta=document.getElementById("nb-content");if(!ta)return;
  const ws=ta.value.split(/\s+/).filter(Boolean).length;
  const wc=document.getElementById("nb-wc");if(wc)wc.textContent=ws+" palavras";
}
function changePageType(pt){
  if(!currentNB)return;
  currentNB.pageType=pt;
  renderNBEditor();
}
function updateNBTitle(v){if(currentNB)currentNB.name=v;}
async function saveNB(silent=false){
  const ta=document.getElementById("nb-content");
  if(currentNB&&ta){
    currentNB.content=ta.value;
    const idx=notebooks.findIndex(n=>n.id===currentNB.id);
    if(idx>=0)notebooks[idx]=currentNB;
    if(window.fbSaveNotebook)await window.fbSaveNotebook(currentNB);
    const saved=document.getElementById("nb-saved");
    if(saved)saved.textContent="Salvo âœ“";
    if(!silent)showToast("â˜ï¸ Caderno salvo!");
  }
}
async function deleteNB(id){
  if(!confirm("Deletar este caderno? Esta aÃ§Ã£o nÃ£o pode ser desfeita."))return;
  if(window.fbDeleteNotebook)await window.fbDeleteNotebook(id);
  notebooks=notebooks.filter(n=>n.id!==id);
  currentNB=null;
  renderNotebooks();
  showToast("ğŸ—‘ï¸ Caderno deletado");
}
// Modal
function openNBModal(){nbPageType="lined";nbColor="#c9a84c";document.getElementById("nb-modal").style.display="flex";setTimeout(()=>document.getElementById("nb-name-inp").focus(),100);}
function closeNBModal(){document.getElementById("nb-modal").style.display="none";}
function selPage(el,pt){document.querySelectorAll(".page-opt").forEach(e=>e.classList.remove("on"));el.classList.add("on");nbPageType=pt;}
function selColor(el){document.querySelectorAll(".color-opt").forEach(e=>e.classList.remove("on"));el.classList.add("on");nbColor=el.dataset.c;}
async function createNotebook(){
  const name=document.getElementById("nb-name-inp").value.trim()||"Novo Caderno";
  const nb={id:"nb_"+Date.now(),name,pageType:nbPageType,color:nbColor,content:"",createdAt:Date.now()};
  notebooks.unshift(nb);
  if(window.fbSaveNotebook)await window.fbSaveNotebook(nb);
  closeNBModal();
  currentNB=nb;
  renderNotebooks();
  showToast("ğŸ““ Caderno criado!");
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  REDAÃ‡ÃƒO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadSavedEssays(){if(window.fbGetEssays){savedEssays=await window.fbGetEssays();if(tab==="essay")renderEssay();}}
function renderEssay(){
  const w=document.getElementById("ewrap");
  if(!eTopic){
    const saved=renderSavedEssaysHTML();
    w.innerHTML=`<div class="sec-hd">
        <div class="sec-title">PrÃ¡tica de <em>RedaÃ§Ã£o</em></div>
        <div class="sec-sub">30 temas Â· ENEM & FUVEST Â· CorreÃ§Ã£o pelas 5 competÃªncias Â· Salvo no Firebase</div>
      </div>
      <div class="etopics">${ESSAY_TOPICS.map((t,i)=>`
        <div class="etcard" style="--c:${t.c}" onclick="selTopic(${i})">
          <span class="et-tipo" style="color:${t.c}">${t.tipo}</span>
          <div class="et-titulo">${t.t}</div>
          <div class="et-dica">${t.dica}</div>
        </div>`).join("")}</div>${saved}`;
    return;
  }
  const t=eTopic;
  let fbHTML="";
  if(eLoad){fbHTML=`<div class="efb"><div class="loading-dots"><span></span><span></span><span></span></div></div>`;}
  else if(eFB){
    const s=eScores||{c1:0,c2:0,c3:0,c4:0,c5:0,total:0};
    fbHTML=`<div class="efb">
      <div class="efb-title">âœ¦ CorreÃ§Ã£o â€” 5 CompetÃªncias ENEM
        <button class="btn-ghost" onclick="exportFBPDF()" style="margin-left:auto">PDF da correÃ§Ã£o</button>
      </div>
      <div class="score-grid">
        ${[["c1","â‘  Norma Culta"],["c2","â‘¡ Tema"],["c3","â‘¢ ArgumentaÃ§Ã£o"],["c4","â‘£ CoesÃ£o"],["c5","â‘¤ Proposta"]].map(([k,l])=>`
        <div class="score-card"><div class="score-n" style="color:${scoreColor(s[k],200)}">${s[k]}/200</div><div class="score-lbl">${l}</div></div>`).join("")}
      </div>
      <div class="score-card" style="text-align:center;margin-bottom:20px;padding:16px">
        <div style="font-size:11px;color:var(--sub);margin-bottom:5px;font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:.6px">Nota Total</div>
        <div style="font-size:46px;font-weight:700;font-family:'JetBrains Mono',monospace;color:${scoreColor(s.total,1000)}">${s.total}<span style="font-size:18px;color:var(--sub)">/1000</span></div>
      </div>
      <div class="efb-text">${eFB}</div>
    </div>`;
  }
  w.innerHTML=`
    <div class="essay-header">
      <button class="btn-ghost" onclick="voltarTemas()">â† Temas</button>
      <h3 style="color:${t.c};font-family:'Playfair Display',serif;font-size:19px;flex:1;font-style:italic">${t.t}</h3>
      <span style="background:${t.c}18;color:${t.c};border-radius:5px;padding:3px 10px;font-size:10px;font-weight:600;font-family:'JetBrains Mono',monospace;letter-spacing:.4px">${t.tipo}</span>
    </div>
    <div class="tipbox"><strong>ğŸ’¡ Dica:</strong> ${t.dica}</div>
    <div class="comp5">
      <strong style="color:var(--sub);font-size:10px;margin-right:5px;font-family:'JetBrains Mono',monospace;text-transform:uppercase;letter-spacing:.5px">5 competÃªncias:</strong>
      ${["â‘  Norma culta","â‘¡ Tema","â‘¢ ArgumentaÃ§Ã£o","â‘£ CoesÃ£o","â‘¤ Proposta"].map(c=>`<span class="ctag">${c}</span>`).join("")}
    </div>
    <textarea class="essay-ta" id="eta" placeholder="Escreva sua redaÃ§Ã£o aqui...&#10;&#10;IntroduÃ§Ã£o â†’ Desenvolvimento (2 argumentos) â†’ ConclusÃ£o com proposta de intervenÃ§Ã£o completa." oninput="updW()">${window._etxt||""}</textarea>
    <div class="essay-toolbar">
      <span class="wc" id="wc">0 palavras Â· 0 linhas</span>
      <div class="essay-actions">
        <button class="btn-secondary" onclick="copyText()">ğŸ“‹ Copiar</button>
        <button class="btn-secondary" onclick="savePDF()">ğŸ“„ PDF</button>
        <button class="btn-save-essay" id="saveBtn" onclick="salvarRedacao()" disabled>â˜ï¸ Salvar</button>
        <button class="btn" id="corrBtn" onclick="corrigir()" disabled>${eLoad?"â³ Corrigindo...":"âœ¦ Corrigir com IA"}</button>
      </div>
    </div>
    ${fbHTML}`;
  updW();
}
function renderSavedEssaysHTML(){
  if(!savedEssays.length)return`<div class="saved-essays"><div class="saved-title">âœ¦ RedaÃ§Ãµes Salvas <span>â€” nenhuma ainda</span></div></div>`;
  const items=savedEssays.map(e=>{
    const dt=e.savedAt?.seconds?new Date(e.savedAt.seconds*1000).toLocaleDateString('pt-BR'):"";
    const det=expandedEssay===e.id?`<div class="essay-detail"><div class="essay-detail-text">${e.texto||""}</div>${e.feedback?`<div style="font-size:13px;color:var(--sub);border-top:1px solid rgba(201,168,76,.1);padding-top:12px;white-space:pre-wrap;font-family:'Crimson Pro',serif">${e.feedback}</div>`:""}</div>`:"";
    return `<div><div class="essay-item">
      <div class="essay-item-info">
        <div class="essay-item-title">${e.titulo||e.tema||"Sem tÃ­tulo"}</div>
        <div class="essay-item-meta">${e.tipo||""} Â· ${dt} Â· ${(e.texto||"").split(/\s+/).filter(Boolean).length} palavras</div>
      </div>
      ${e.total?`<div class="essay-item-score" style="color:${scoreColor(e.total,1000)}">${e.total}<span style="font-size:12px;color:var(--sub)">/1000</span></div>`:""}
      <div class="essay-item-actions">
        <button class="btn-xs" onclick="toggleEssayDetail('${e.id}')">${expandedEssay===e.id?"â–²":"â–¼"} Ver</button>
        <button class="btn-xs" onclick="carregarRedacao(${JSON.stringify(e).replace(/"/g,'&quot;')})">âœï¸ Editar</button>
        <button class="btn-xs danger" onclick="deletarRedacao('${e.id}')">ğŸ—‘ï¸</button>
      </div>
    </div>${det}</div>`;
  }).join("");
  return `<div class="saved-essays"><div class="saved-title">âœ¦ RedaÃ§Ãµes Salvas <span>â€” ${savedEssays.length} salvas</span></div>${items}</div>`;
}
function toggleEssayDetail(id){expandedEssay=expandedEssay===id?null:id;renderEssay();}
function carregarRedacao(e){
  const tp=ESSAY_TOPICS.find(t=>t.t===e.titulo||t.t===e.tema)||{t:e.titulo||e.tema,tipo:e.tipo||"",c:"#c9a84c",dica:""};
  eTopic=tp;window._etxt=e.texto||"";
  eScores={c1:e.c1||0,c2:e.c2||0,c3:e.c3||0,c4:e.c4||0,c5:e.c5||0,total:e.total||0};
  eFB=e.feedback||null;renderEssay();
}
async function deletarRedacao(id){
  if(!confirm("Deletar esta redaÃ§Ã£o?"))return;
  if(window.fbDeleteEssay){await window.fbDeleteEssay(id);showToast("ğŸ—‘ï¸ Deletada");await loadSavedEssays();}
}
function scoreColor(v,max){const p=v/max;return p>=.8?"var(--ok)":p>=.5?"var(--g)":"var(--no)";}
function updW(){
  const ta=document.getElementById("eta");if(!ta)return;
  const txt=ta.value;window._etxt=txt;
  const ws=txt.split(/\s+/).filter(Boolean).length,ls=txt.split("\n").filter(x=>x.trim()).length;
  const wc=document.getElementById("wc");if(wc)wc.textContent=`${ws} palavras Â· ${ls} linhas`;
  const btn=document.getElementById("corrBtn"),sb=document.getElementById("saveBtn");
  const ok=txt.trim().length>=80&&!eLoad;
  if(btn){btn.disabled=!ok;btn.textContent=eLoad?"â³ Corrigindo...":"âœ¦ Corrigir com IA";}
  if(sb)sb.disabled=txt.trim().length<20;
}
function selTopic(i){eTopic=ESSAY_TOPICS[i];eFB=null;eScores=null;window._etxt="";renderEssay();}
function voltarTemas(){eTopic=null;eFB=null;eScores=null;window._etxt="";renderEssay();loadSavedEssays();}
async function salvarRedacao(){
  const ta=document.getElementById("eta");if(!ta||ta.value.trim().length<20)return;
  const sb=document.getElementById("saveBtn");if(sb){sb.disabled=true;sb.textContent="â³ Salvando...";}
  const id=await window.fbSaveEssay(eTopic?.t||"Sem tÃ­tulo",eTopic?.t||"",eTopic?.tipo||"",ta.value,eScores,eFB||"");
  if(id){showToast("â˜ï¸ RedaÃ§Ã£o salva!");await loadSavedEssays();}
  else showToast("âš ï¸ Erro ao salvar.");
  if(sb){sb.disabled=false;sb.textContent="â˜ï¸ Salvar";}
}
function copyText(){const ta=document.getElementById("eta");if(!ta||!ta.value.trim())return;navigator.clipboard.writeText(ta.value).then(()=>showToast("âœ“ Texto copiado!"));}
function savePDF(){
  const ta=document.getElementById("eta");if(!ta||!ta.value.trim()){showToast("âš ï¸ Escreva a redaÃ§Ã£o primeiro!");return;}
  const win=window.open("","_blank","width=800,height=600");
  win.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>RedaÃ§Ã£o</title><style>body{font-family:Georgia,serif;max-width:700px;margin:40px auto;padding:40px;color:#111;line-height:1.9;font-size:14pt}h1{font-size:18pt;border-bottom:2px solid #111;padding-bottom:10px}.meta{color:#666;font-size:10pt;margin-bottom:30px}.texto{white-space:pre-wrap;text-align:justify;text-indent:2em}@media print{body{margin:20mm;padding:0}}</style></head><body><h1>${eTopic?.t||"RedaÃ§Ã£o"}</h1><div class="meta">Tema ${eTopic?.tipo||""} Â· ${new Date().toLocaleDateString('pt-BR')}</div><div class="texto">${ta.value.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div><script>window.onload=function(){window.print();}<\/script></body></html>`);
  win.document.close();
}
function exportFBPDF(){
  if(!eFB)return;const s=eScores||{};
  const win=window.open("","_blank","width=800,height=700");
  win.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>CorreÃ§Ã£o</title><style>body{font-family:Arial,sans-serif;max-width:700px;margin:40px auto;padding:40px;color:#111;line-height:1.75;font-size:12pt}h1{font-size:18pt;border-bottom:2px solid #333;padding-bottom:8px}.meta{color:#666;font-size:10pt;margin-bottom:24px}.scores{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin:20px 0}.sc{border:1px solid #ccc;border-radius:6px;padding:10px;text-align:center}.sc-n{font-size:20pt;font-weight:900}.sc-l{font-size:8pt;color:#666}.total{font-size:28pt;font-weight:900;text-align:center;border:2px solid #333;border-radius:8px;padding:14px;margin:14px 0}.texto{white-space:pre-wrap}@media print{body{margin:20mm;padding:0}}</style></head><body><h1>CorreÃ§Ã£o de RedaÃ§Ã£o</h1><div class="meta">Tema: ${eTopic?.t||""} Â· ${new Date().toLocaleDateString('pt-BR')}</div><div class="scores">${["c1","c2","c3","c4","c5"].map((k,i)=>`<div class="sc"><div class="sc-n">${s[k]||0}/200</div><div class="sc-l">${["â‘  Norma","â‘¡ Tema","â‘¢ Arg.","â‘£ CoesÃ£o","â‘¤ Proposta"][i]}</div></div>`).join("")}</div><div class="total">TOTAL: ${s.total||0}/1000</div><div class="texto">${eFB.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div><script>window.onload=function(){window.print();}<\/script></body></html>`);
  win.document.close();
}
async function corrigir(){
  const ta=document.getElementById("eta");if(!ta||ta.value.trim().length<80)return;
  eLoad=true;const txt=ta.value;renderEssay();
  try{
    const res=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1400,
        system:`VocÃª Ã© professor especialista em redaÃ§Ã£o ENEM. Avalie o texto pelas 5 competÃªncias (0-200 cada, mÃ¡x 1000). 
IMPORTANTE: Na primeira linha retorne SOMENTE os scores em JSON: {"c1":160,"c2":180,"c3":160,"c4":140,"c5":160,"total":800}
Depois escreva a avaliaÃ§Ã£o completa em portuguÃªs com seÃ§Ãµes C1 a C5, Pontos Fortes e A Melhorar. Seja construtivo e especÃ­fico.`,
        messages:[{role:"user",content:`Tema: "${eTopic.t}" (${eTopic.tipo})\n\nRedaÃ§Ã£o:\n${txt}`}]})});
    const data=await res.json();
    const raw=(data.content&&data.content[0]?.text)||"";
    const linhas=raw.split("\n");let sc=null;
    for(let i=0;i<Math.min(4,linhas.length);i++){const l=linhas[i].trim();if(l.startsWith("{")){try{sc=JSON.parse(l);break;}catch(e){}}}
    eScores=sc||{c1:0,c2:0,c3:0,c4:0,c5:0,total:0};
    eFB=linhas.slice(sc?1:0).join("\n").trim();
    window._etxt=txt;
    if(window.fbSaveEssay){await window.fbSaveEssay(eTopic?.t,eTopic?.t,eTopic?.tipo,txt,eScores,eFB);showToast("â˜ï¸ Corrigida e salva!");loadSavedEssays();}
  }catch(e){eFB="Erro de conexÃ£o. Verifique sua internet e tente novamente.";}
  eLoad=false;renderEssay();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PROVAS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderExams(){
  const w=document.getElementById("xwrap");
  const pdfURL="provafase1_exatashumanas.pdf";
  let h=`<div class="pdf-hero">
    <div class="pdf-h3">UNESP 2022 â€” Prova Completa</div>
    <div class="pdf-p">90 questÃµes Â· Biologia, QuÃ­mica, FÃ­sica, MatemÃ¡tica, Geografia, HistÃ³ria, Literatura, InglÃªs, Filosofia</div>
    <div class="pdf-acts">
      <a href="${pdfURL}" download class="pdf-gold">â¬‡ Baixar PDF</a>
      <button class="pdf-sec" onclick="togglePDF()"><span id="pdfLbl">â—‰ Ver na tela</span></button>
      <a href="${pdfURL}" target="_blank" class="pdf-sec">â†— Nova aba</a>
    </div>
    <div class="pdf-viewer" id="pdfV"><iframe src="${pdfURL}" title="UNESP 2022"></iframe></div>
  </div>
  <div class="egrid">`;
  EXAMS.forEach(ex=>{
    const qs=ex.qs.map(q=>{
      const key=ex.id+"_"+q.n,ans=xAns[key],col=COR[q.s]||"var(--g)";
      const opts=q.opts.map((o,i)=>{let c="qopt";if(ans!==undefined){if(i===q.ok)c+=" ok";else if(i===ans&&i!==q.ok)c+=" no";}
        return `<button class="${c}" onclick="ansExam('${key}',${i},${q.ok})" ${ans!==undefined?"disabled":""}>${o}</button>`;}).join("");
      return `<div class="qitem"><div class="qitem-top"><span class="qnum">Q${q.n}</span><span class="stag" style="background:${col}18;color:${col};font-size:10px">${q.s}</span></div><p>${q.t}</p><div class="qopts">${opts}</div><div class="qexp2${ans!==undefined?" show":""}" id="exp_${key}">ğŸ’¡ ${q.exp}</div></div>`;
    }).join("");
    const tags=ex.mats.map(m=>`<span class="stag" style="background:${COR[m]||"#fff"}18;color:${COR[m]||"#fff"};font-size:10px">${m}</span>`).join("");
    h+=`<div class="exam-card">
      <div class="exam-head">
        <div><span class="ebadge">UNESP</span><h3 style="color:var(--txt);font-family:'Playfair Display',serif;font-size:18px;margin-top:10px;font-style:italic">${ex.nome}</h3></div>
        <div class="eyear">${ex.ano}</div>
      </div>
      <div class="exam-body">
        <div class="estats">
          <div class="estat"><div class="estat-n">${ex.total}</div><div class="estat-l">questÃµes</div></div>
          <div class="estat"><div class="estat-n">${ex.mats.length}</div><div class="estat-l">matÃ©rias</div></div>
          <div class="estat"><div class="estat-n">${ex.qs.length}</div><div class="estat-l">aqui</div></div>
        </div>
        <p class="exam-hl">âœ¦ ${ex.hl}</p>
        <div class="etags">${tags}</div>
        <button class="etog" onclick="toggleExam('${ex.id}')">â†“ Ver questÃµes selecionadas</button>
        <div class="eqs" id="qs_${ex.id}"><div style="margin-top:10px">${qs}</div></div>
      </div>
    </div>`;
  });
  w.innerHTML=h+`</div>`;
}
function togglePDF(){const v=document.getElementById("pdfV"),l=document.getElementById("pdfLbl"),s=v.style.display!=="block";v.style.display=s?"block":"none";l.textContent=s?"â–² Ocultar PDF":"â—‰ Ver na tela";}
function toggleExam(id){document.getElementById("qs_"+id).classList.toggle("open");}
function ansExam(key,c,ok){
  if(xAns[key]!==undefined)return;xAns[key]=c;renderExams();
  setTimeout(()=>{const e=document.getElementById("exp_"+key);if(e)e.scrollIntoView({behavior:"smooth",block:"nearest"});},80);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PROGRESSO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderStats(){
  const w=document.getElementById("swrap");
  const tc=CARDS.length,dc=Object.keys(window.studied).length;
  const d1=CARDS.filter(c=>c.d===1),d2=CARDS.filter(c=>c.d===2),d3=CARDS.filter(c=>c.d===3);
  const ms={};CARDS.forEach(c=>{if(!ms[c.s])ms[c.s]={t:0,d:0};ms[c.s].t++;if(window.studied[c.id])ms[c.s].d++;});
  const mrows=Object.entries(ms).map(([s,v])=>{
    const col=COR[s]||"var(--g)",p=v.t?Math.round(v.d/v.t*100):0;
    return `<div class="mat-row">
      <span class="stag" style="background:${col}18;color:${col};min-width:90px;text-align:center;font-family:'JetBrains Mono',monospace">${s}</span>
      <div style="flex:1">
        <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--sub);margin-bottom:5px;font-family:'JetBrains Mono',monospace">
          <span>${v.d}/${v.t}</span><span style="color:${col};font-weight:600">${p}%</span>
        </div>
        <div class="pbar"><div class="pfill" style="width:${p}%;background:${col}"></div></div>
      </div>
    </div>`;
  }).join("");
  w.innerHTML=`<div class="sec-hd"><div class="sec-title">Meu <em>Progresso</em></div><div class="sec-sub">Sincronizado com Firebase â˜ï¸</div></div>
    <div class="stat-nums">
      <div class="sn"><div class="sn-num" style="color:var(--g2)">${dc}</div><div class="sn-lbl">Cards estudados</div><div class="sn-sub">de ${tc} total</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--ok)">${d1.filter(c=>window.studied[c.id]).length}/${d1.length}</div><div class="sn-lbl">â˜… FÃ¡ceis</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--g)">${d2.filter(c=>window.studied[c.id]).length}/${d2.length}</div><div class="sn-lbl">â˜…â˜… MÃ©dios</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--no)">${d3.filter(c=>window.studied[c.id]).length}/${d3.length}</div><div class="sn-lbl">â˜…â˜…â˜… DifÃ­ceis</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--cy)">${window.qOk}/${QUIZ.length}</div><div class="sn-lbl">Quiz acertos</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--g2)">${savedEssays.length}</div><div class="sn-lbl">RedaÃ§Ãµes salvas</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--g)">${notebooks.length}</div><div class="sn-lbl">Cadernos</div></div>
    </div>
    <div class="sec-hd" style="margin-top:8px"><div class="sec-title" style="font-size:18px">Por <em>MatÃ©ria</em></div></div>
    <div class="mat-list">${mrows}</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  UTILS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateHdr(){
  const cs=getCards(),d=cs.filter(c=>window.studied[c.id]).length;
  document.getElementById("stCards").textContent=`${d}/${cs.length}`;
  const qs=getQuiz(),p=qs.length?Math.round(window.qOk/qs.length*100):0;
  document.getElementById("stQuiz").textContent=p+"%";
  document.getElementById("stDiff").textContent=["Todos","FÃ¡cil","MÃ©dio","DifÃ­cil"][diff];
}
function showToast(msg){
  const t=document.getElementById("toast");t.textContent=msg;t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),2800);
}

// INIT
renderFilters();render();
</script>
</body>
</html>
