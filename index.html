<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNESP Study Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Mono:wght@400;500&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
  --ink:#0c0c14;--ink2:#11111f;--ink3:#181828;--ink4:#20203a;
  --line:#ffffff0f;--line2:#ffffff18;--line3:#ffffff28;
  --txt:#e8e3ff;--sub:#8888b8;--dim:#44445a;
  --v:#7c5cfc;--v2:#a07cfc;--v3:#5238c8;
  --go:#f0b429;--go2:#ffe082;
  --ok:#22c55e;--no:#f43f5e;--cy:#06b6d4;--pi:#ec4899;--or:#fb923c;
  --r:14px;--r2:10px;--r3:20px;
  --sh:0 4px 24px #0000004a;--sh2:0 12px 48px #00000066;
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-font-smoothing:antialiased}
html{scroll-behavior:smooth}
body{
  font-family:'Syne',sans-serif;
  background:var(--ink);
  color:var(--txt);
  min-height:100vh;
  overflow-x:hidden;
}

/* â”€â”€ NOISE + GRID OVERLAY â”€â”€ */
body::before{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:0;
  background-image:
    radial-gradient(ellipse 80% 50% at 10% 0%,rgba(124,92,252,.12) 0%,transparent 55%),
    radial-gradient(ellipse 60% 40% at 90% 100%,rgba(240,180,41,.08) 0%,transparent 55%),
    radial-gradient(ellipse 40% 30% at 50% 50%,rgba(6,182,212,.05) 0%,transparent 60%);
}
body::after{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:0;opacity:.018;
  background-image:repeating-linear-gradient(0deg,#fff 0px,#fff 1px,transparent 1px,transparent 60px),
    repeating-linear-gradient(90deg,#fff 0px,#fff 1px,transparent 1px,transparent 60px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hdr{
  position:sticky;top:0;z-index:300;
  background:rgba(12,12,20,.88);
  backdrop-filter:blur(28px) saturate(140%);
  border-bottom:1px solid var(--line);
}
.hdr-in{
  max-width:1400px;margin:0 auto;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 28px;height:62px;gap:16px;
}
.brand{display:flex;align-items:center;gap:11px}
.brand-mark{
  width:36px;height:36px;border-radius:10px;flex-shrink:0;
  background:linear-gradient(135deg,var(--v),var(--v2));
  display:flex;align-items:center;justify-content:center;
  font-size:18px;box-shadow:0 4px 14px rgba(124,92,252,.4);
}
.brand-name{
  font-family:'Instrument Serif',serif;font-size:20px;
  color:var(--txt);line-height:1.1;
}
.brand-sub{font-size:10px;color:var(--sub);font-family:'DM Mono',monospace;margin-top:1px}
.hdr-pills{display:flex;gap:6px;flex-wrap:wrap}
.pill{
  background:var(--ink3);border:1px solid var(--line2);
  border-radius:30px;padding:4px 12px;
  font-size:11px;color:var(--sub);font-family:'DM Mono',monospace;white-space:nowrap;
}
.pill b{color:var(--v2)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.nav{
  position:sticky;top:62px;z-index:200;
  background:rgba(17,17,31,.85);backdrop-filter:blur(20px);
  border-bottom:1px solid var(--line);overflow-x:auto;
}
.nav::-webkit-scrollbar{display:none}
.nav-in{max-width:1400px;margin:0 auto;display:flex;padding:0 28px}
.nb{
  background:none;border:none;border-bottom:2px solid transparent;
  color:var(--sub);padding:14px 18px;cursor:pointer;
  font-size:12px;font-family:'Syne',sans-serif;font-weight:700;
  white-space:nowrap;transition:all .2s;letter-spacing:.3px;
  display:flex;align-items:center;gap:7px;text-transform:uppercase;
}
.nb:hover{color:var(--txt)}
.nb.on{color:var(--v2);border-bottom-color:var(--v)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main{max-width:1400px;margin:0 auto;padding:28px 28px 60px}
.tab{display:none}.tab.active{display:block;animation:fadeUp .3s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTROS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.fbar{display:flex;gap:7px;flex-wrap:wrap;align-items:center;margin-bottom:12px}
.flabel{font-size:10px;color:var(--dim);font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:.6px;margin-right:4px}
.fc{
  background:var(--ink3);border:1px solid var(--line2);
  border-radius:30px;padding:4px 13px;cursor:pointer;
  font-size:12px;font-weight:700;font-family:'Syne',sans-serif;
  transition:all .2s;color:var(--sub);letter-spacing:.2px;
}
.fc:hover{border-color:var(--line3);color:var(--txt)}
.fc.on{color:#fff}
.dbar{display:flex;gap:5px}
.dc{
  background:var(--ink3);border:1px solid var(--line2);
  border-radius:8px;padding:5px 13px;cursor:pointer;
  font-size:11px;font-weight:700;font-family:'DM Mono',monospace;
  transition:all .2s;color:var(--sub);
}
.dc.on[data-d="0"]{background:var(--ink4);border-color:var(--line3);color:var(--txt)}
.dc.on[data-d="1"]{background:rgba(34,197,94,.12);border-color:var(--ok);color:var(--ok)}
.dc.on[data-d="2"]{background:rgba(240,180,41,.12);border-color:var(--go);color:var(--go)}
.dc.on[data-d="3"]{background:rgba(244,63,94,.12);border-color:var(--no);color:var(--no)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECÃ‡ÃƒO TÃTULO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sec-hd{margin-bottom:22px}
.sec-title{
  font-family:'Instrument Serif',serif;font-size:26px;
  color:var(--txt);line-height:1.2;margin-bottom:4px;
}
.sec-sub{font-size:12px;color:var(--sub);line-height:1.6}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROGRESS BAR TOPO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.prog-strip{
  background:var(--ink3);border:1px solid var(--line);
  border-radius:var(--r);padding:14px 20px;
  display:flex;gap:20px;flex-wrap:wrap;align-items:center;
  margin-bottom:20px;
}
.ps-item{display:flex;flex-direction:column;gap:2px}
.ps-label{font-size:10px;color:var(--dim);font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:.5px}
.ps-val{font-size:22px;font-weight:800;font-family:'DM Mono',monospace}
.ps-bar-wrap{flex:1;min-width:200px}
.ps-bar{height:5px;background:var(--line2);border-radius:3px;overflow:hidden;margin-top:5px}
.ps-fill{height:100%;border-radius:3px;transition:width .6s cubic-bezier(.4,0,.2,1)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLASHCARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:13px}
.card{
  background:var(--ink3);border:1px solid var(--line);
  border-radius:var(--r);padding:18px;cursor:pointer;
  transition:transform .25s,border-color .25s,box-shadow .25s;
  min-height:130px;position:relative;overflow:hidden;
}
.card::before{
  content:"";position:absolute;inset:0;opacity:0;
  background:linear-gradient(135deg,rgba(124,92,252,.09),transparent 70%);
  transition:opacity .3s;pointer-events:none;
}
.card:hover{transform:translateY(-3px);border-color:var(--line2);box-shadow:var(--sh)}
.card:hover::before,.card.flip::before{opacity:1}
.card.flip{border-color:rgba(124,92,252,.4);box-shadow:0 8px 32px rgba(124,92,252,.14)}
.card-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;gap:6px}
.stag{border-radius:7px;padding:3px 9px;font-size:10px;font-weight:700;letter-spacing:.3px}
.dtag{border-radius:6px;padding:2px 8px;font-size:10px;font-weight:700;font-family:'DM Mono',monospace}
.d1{background:rgba(34,197,94,.12);color:var(--ok)}
.d2{background:rgba(240,180,41,.12);color:var(--go)}
.d3{background:rgba(244,63,94,.12);color:var(--no)}
.card-q{font-size:13px;line-height:1.6;color:var(--txt);font-weight:600;margin-bottom:6px}
.card-hint{font-size:11px;color:var(--dim);font-style:italic;display:flex;align-items:center;gap:5px}
.card-ans{
  display:none;border-top:1px solid var(--line);
  padding-top:10px;margin-top:8px;
  font-size:13px;line-height:1.7;color:#c0b8e0;
}
.card.flip .card-ans{display:block}
.card.flip .card-hint{display:none}
.card-check{position:absolute;top:11px;right:11px;width:20px;height:20px;border-radius:50%;background:rgba(34,197,94,.2);border:1px solid var(--ok);display:flex;align-items:center;justify-content:center;font-size:11px}
.empty{text-align:center;padding:60px 20px;color:var(--dim);font-size:14px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.quiz-wrap{max-width:720px;margin:0 auto}
.quiz-hdr{display:flex;align-items:center;gap:14px;margin-bottom:20px}
.qprog{flex:1;height:4px;background:var(--line2);border-radius:2px;overflow:hidden}
.qprog-fill{height:100%;background:linear-gradient(90deg,var(--v),var(--v2));border-radius:2px;transition:width .4s}
.qmeta{display:flex;gap:14px;font-size:12px;font-family:'DM Mono',monospace;white-space:nowrap}
.q-ok{color:var(--ok)}.q-no{color:var(--no)}
.qbox{
  background:var(--ink3);border:1px solid var(--line);
  border-radius:var(--r);padding:28px;margin-bottom:14px;
}
.qbox-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:8px}
.qsrc{font-size:10px;color:var(--dim);font-family:'DM Mono',monospace}
.qq{font-size:16px;line-height:1.7;color:var(--txt);font-weight:600}
.opts{display:flex;flex-direction:column;gap:9px}
.opt{
  background:var(--ink2);border:1px solid var(--line);color:var(--txt);
  border-radius:var(--r2);padding:13px 17px;text-align:left;
  cursor:pointer;font-family:'Syne',sans-serif;font-size:13px;
  line-height:1.45;transition:all .2s;font-weight:500;
}
.opt:hover:not(:disabled){border-color:var(--v);background:rgba(124,92,252,.1)}
.opt.ok{background:rgba(34,197,94,.1);border-color:var(--ok);color:#86efac;font-weight:700}
.opt.no{background:rgba(244,63,94,.1);border-color:var(--no);color:#fda4af;font-weight:700}
.opt:disabled{cursor:default}
.qexp{
  background:rgba(34,197,94,.05);border:1px solid rgba(34,197,94,.2);
  border-radius:var(--r2);padding:14px 17px;margin:12px 0;
  font-size:13px;color:#86efac;line-height:1.75;
}
.qexp strong{color:var(--ok)}
.btn{
  background:linear-gradient(135deg,var(--v),var(--v3));color:#fff;border:none;
  border-radius:var(--r2);padding:12px 24px;font-size:14px;font-weight:700;
  cursor:pointer;font-family:'Syne',sans-serif;transition:all .22s;letter-spacing:.2px;
}
.btn:hover{transform:translateY(-2px);box-shadow:0 6px 24px rgba(124,92,252,.45)}
.btn:disabled{background:var(--dim);cursor:not-allowed;transform:none;box-shadow:none}
.btn-w{width:100%}
.btn-out{
  background:var(--ink4);border:1px solid var(--line2);color:var(--sub);
  border-radius:8px;padding:6px 16px;cursor:pointer;font-family:'Syne',sans-serif;
  font-size:12px;font-weight:700;transition:all .2s;
}
.btn-out:hover{border-color:var(--v);color:var(--txt)}
.quiz-done{
  text-align:center;padding:52px 32px;
  background:var(--ink3);border:1px solid var(--line);border-radius:var(--r);
}
.qd-emoji{font-size:64px;margin-bottom:18px;line-height:1;display:block}
.qd-h{font-family:'Instrument Serif',serif;font-size:30px;margin-bottom:8px}
.qd-score{font-size:52px;font-weight:900;font-family:'DM Mono',monospace;margin:8px 0;line-height:1}
.qd-p{color:var(--sub);font-size:14px;margin-bottom:26px;line-height:1.6}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REDAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.essay-wrap{max-width:920px;margin:0 auto}
.etopics{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;margin-bottom:24px}
.etcard{
  background:var(--ink3);border:1px solid var(--line);
  border-radius:var(--r);padding:20px;cursor:pointer;transition:all .22s;
  position:relative;overflow:hidden;
}
.etcard::before{content:"";position:absolute;left:0;top:0;bottom:0;width:3px;border-radius:2px 0 0 2px;background:var(--c,var(--v))}
.etcard:hover{border-color:var(--line3);transform:translateY(-2px);box-shadow:var(--sh)}
.et-tipo{font-size:10px;font-weight:700;font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:.5px;margin-bottom:10px;display:block}
.et-titulo{color:var(--txt);font-size:14px;line-height:1.5;font-weight:700;margin-bottom:8px}
.et-dica{color:var(--sub);font-size:12px;line-height:1.55}

/* Ãrea de escrita */
.essay-header{display:flex;align-items:center;gap:12px;margin-bottom:18px;flex-wrap:wrap}
.tipbox{
  background:linear-gradient(135deg,rgba(124,92,252,.07),rgba(124,92,252,.03));
  border:1px solid rgba(124,92,252,.18);border-radius:var(--r);
  padding:15px 19px;margin-bottom:14px;font-size:13px;color:var(--sub);line-height:1.75;
}
.tipbox strong{color:var(--v2)}
.comp5{
  display:flex;flex-wrap:wrap;gap:7px;margin-bottom:14px;
  background:var(--ink3);border:1px solid var(--line);border-radius:var(--r2);padding:12px 16px;
  align-items:center;
}
.ctag{
  background:var(--ink4);border:1px solid var(--line2);
  border-radius:6px;padding:3px 10px;font-size:11px;font-weight:700;color:var(--dim);
}
.textwrap{position:relative}
textarea{
  width:100%;min-height:340px;
  background:var(--ink3);border:1px solid var(--line2);
  border-radius:var(--r);padding:22px 24px;
  color:var(--txt);font-size:15px;line-height:1.85;
  font-family:'Syne',sans-serif;resize:vertical;outline:none;
  transition:border-color .2s;
}
textarea:focus{border-color:var(--v)}
textarea::placeholder{color:var(--dim)}
.essay-toolbar{
  display:flex;justify-content:space-between;align-items:center;
  margin-top:12px;flex-wrap:wrap;gap:12px;
}
.wc{font-size:12px;color:var(--sub);font-family:'DM Mono',monospace}
.essay-actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.btn-copy{
  background:var(--ink4);border:1px solid var(--line2);color:var(--sub);
  border-radius:8px;padding:9px 16px;cursor:pointer;font-family:'Syne',sans-serif;
  font-size:12px;font-weight:700;transition:all .2s;display:flex;align-items:center;gap:6px;
}
.btn-copy:hover{border-color:var(--cy);color:var(--cy)}
.btn-pdf{
  background:linear-gradient(135deg,#854d0e,var(--go));color:#1a0f00;border:none;
  border-radius:8px;padding:9px 16px;cursor:pointer;font-family:'Syne',sans-serif;
  font-size:12px;font-weight:800;transition:all .2s;display:flex;align-items:center;gap:6px;
}
.btn-pdf:hover{transform:translateY(-1px);box-shadow:0 5px 18px rgba(240,180,41,.35)}
.copy-toast{
  position:fixed;bottom:28px;right:28px;z-index:1000;
  background:var(--ok);color:#001a0a;
  border-radius:10px;padding:12px 20px;font-size:13px;font-weight:700;
  box-shadow:var(--sh2);transform:translateY(80px);opacity:0;
  transition:all .3s cubic-bezier(.34,1.56,.64,1);pointer-events:none;
}
.copy-toast.show{transform:translateY(0);opacity:1}

/* Feedback IA */
.efb{
  margin-top:22px;
  background:var(--ink2);border:1px solid rgba(124,92,252,.22);
  border-radius:var(--r);padding:26px;
}
.efb-title{color:var(--v2);font-size:15px;font-weight:700;margin-bottom:18px;display:flex;align-items:center;gap:8px}
.score-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:9px;margin-bottom:20px}
@media(max-width:600px){.score-grid{grid-template-columns:repeat(2,1fr)}}
.score-card{
  background:var(--ink3);border:1px solid var(--line);
  border-radius:var(--r2);padding:12px;text-align:center;
}
.score-n{font-size:24px;font-weight:900;font-family:'DM Mono',monospace;color:var(--v2);line-height:1}
.score-lbl{font-size:9px;color:var(--sub);margin-top:4px;line-height:1.4}
.efb-text{font-size:13px;line-height:1.85;color:#c0b8d8;white-space:pre-wrap}
.loading-dots{display:flex;gap:6px;justify-content:center;padding:28px;align-items:center}
.loading-dots span{width:8px;height:8px;border-radius:50%;background:var(--v);animation:dot .9s ease-in-out infinite}
.loading-dots span:nth-child(2){animation-delay:.15s;background:var(--v2)}
.loading-dots span:nth-child(3){animation-delay:.3s;background:var(--go)}
@keyframes dot{0%,80%,100%{transform:scale(.7);opacity:.4}40%{transform:scale(1);opacity:1}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.exams-wrap{max-width:1200px;margin:0 auto}
.pdf-hero{
  background:linear-gradient(135deg,rgba(124,92,252,.1),rgba(240,180,41,.06));
  border:1px solid var(--line2);border-radius:var(--r3);
  padding:28px 32px;margin-bottom:28px;position:relative;overflow:hidden;
}
.pdf-hero::before{
  content:"UNESP";position:absolute;right:-10px;top:-20px;
  font-family:'Instrument Serif',serif;font-size:120px;
  color:rgba(255,255,255,.025);pointer-events:none;line-height:1;font-style:italic;
}
.pdf-h3{font-family:'Instrument Serif',serif;font-size:22px;color:var(--go2);margin-bottom:5px}
.pdf-p{color:var(--sub);font-size:12px;line-height:1.6;margin-bottom:20px}
.pdf-acts{display:flex;gap:9px;flex-wrap:wrap}
.pdf-gold{
  background:linear-gradient(135deg,#92400e,var(--go));color:#1a0e00;border:none;
  border-radius:10px;padding:12px 22px;font-size:13px;font-weight:800;cursor:pointer;
  font-family:'Syne',sans-serif;text-decoration:none;display:inline-flex;align-items:center;gap:8px;
  transition:all .2s;
}
.pdf-gold:hover{transform:translateY(-1px);box-shadow:0 7px 24px rgba(240,180,41,.35)}
.pdf-sec{
  background:var(--ink4);border:1px solid var(--line2);color:var(--sub);
  border-radius:9px;padding:10px 17px;cursor:pointer;font-family:'Syne',sans-serif;
  font-size:12px;font-weight:700;transition:all .2s;text-decoration:none;
  display:inline-flex;align-items:center;gap:7px;
}
.pdf-sec:hover{border-color:var(--v);color:var(--txt)}
.pdf-viewer{display:none;margin-top:16px;border-radius:12px;overflow:hidden;border:1px solid var(--line2)}
.pdf-viewer iframe{width:100%;height:740px;border:none;background:#fff}
.egrid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
@media(max-width:768px){.egrid{grid-template-columns:1fr}}
.exam-card{
  background:var(--ink3);border:1px solid var(--line);
  border-radius:var(--r);overflow:hidden;transition:all .3s;
}
.exam-card:hover{border-color:var(--line2);box-shadow:var(--sh)}
.exam-head{padding:22px;background:linear-gradient(135deg,var(--ink4),var(--ink3));display:flex;justify-content:space-between;align-items:flex-start}
.ebadge{background:var(--v);color:#fff;border-radius:6px;padding:3px 10px;font-size:10px;font-weight:800;letter-spacing:.4px}
.eyear{font-size:44px;font-weight:900;font-family:'DM Mono',monospace;line-height:1}
.exam-body{padding:18px 22px}
.estats{display:flex;gap:10px;margin-bottom:14px}
.estat{background:var(--ink2);border-radius:8px;padding:8px 12px;text-align:center;flex:1}
.estat-n{font-size:20px;font-weight:900;font-family:'DM Mono',monospace}
.estat-l{font-size:10px;color:var(--sub);margin-top:1px}
.exam-hl{color:var(--sub);font-size:11px;line-height:1.6;margin-bottom:13px}
.etags{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:14px}
.etog{width:100%;background:var(--ink2);border:1px solid var(--line);color:var(--sub);border-radius:8px;padding:10px;cursor:pointer;font-family:'Syne',sans-serif;font-size:12px;font-weight:700;transition:all .2s}
.etog:hover{border-color:var(--v);color:var(--txt)}
.eqs{max-height:0;overflow:hidden;transition:max-height .5s ease}
.eqs.open{max-height:8000px}
.qitem{background:var(--ink2);border:1px solid var(--line);border-radius:var(--r2);padding:15px;margin-top:10px}
.qitem-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;flex-wrap:wrap;gap:6px}
.qnum{background:var(--ink4);color:var(--v2);border-radius:5px;padding:2px 8px;font-size:10px;font-weight:700;font-family:'DM Mono',monospace}
.qitem p{color:var(--sub);font-size:13px;line-height:1.6;margin-bottom:11px}
.qopts{display:flex;flex-direction:column;gap:6px}
.qopt{background:var(--ink3);border:1px solid var(--line);color:var(--dim);border-radius:7px;padding:9px 13px;cursor:pointer;font-family:'Syne',sans-serif;font-size:12px;text-align:left;transition:all .2s;font-weight:600}
.qopt:hover:not(:disabled){border-color:var(--v)}
.qopt.ok{background:rgba(34,197,94,.09);border-color:var(--ok);color:#86efac;font-weight:700}
.qopt.no{background:rgba(244,63,94,.09);border-color:var(--no);color:#fda4af;font-weight:700}
.qopt:disabled{cursor:default}
.qexp2{background:rgba(34,197,94,.05);border:1px solid rgba(34,197,94,.18);border-radius:7px;padding:11px;margin-top:8px;font-size:12px;color:#86efac;line-height:1.6;display:none}
.qexp2.show{display:block}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROGRESSO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stat-nums{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px;margin-bottom:28px}
.sn{background:var(--ink3);border:1px solid var(--line);border-radius:var(--r);padding:18px;text-align:center}
.sn-num{font-size:36px;font-weight:900;font-family:'DM Mono',monospace;line-height:1}
.sn-lbl{font-size:11px;color:var(--sub);margin-top:4px}
.sn-sub{font-size:10px;color:var(--dim);margin-top:2px}
.mat-list{display:flex;flex-direction:column;gap:9px}
.mat-row{background:var(--ink3);border:1px solid var(--line);border-radius:var(--r);padding:14px 18px;display:flex;align-items:center;gap:15px}
.pbar{height:5px;background:var(--line2);border-radius:3px;overflow:hidden;flex:1}
.pfill{height:100%;border-radius:3px;transition:width .7s cubic-bezier(.4,0,.2,1)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLLBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
::-webkit-scrollbar{width:5px;height:5px}
::-webkit-scrollbar-track{background:var(--ink)}
::-webkit-scrollbar-thumb{background:var(--ink4);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--v)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRINT / PDF
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media print{
  .hdr,.nav,.essay-toolbar,.essay-header,.tipbox,.comp5,
  .btn,.btn-copy,.btn-pdf,.btn-out,.efb,.fbar{display:none!important}
  body{background:#fff!important;color:#000!important}
  textarea{border:none!important;padding:0!important;font-size:12pt!important;line-height:1.8!important;height:auto!important;min-height:unset!important;color:#000!important;background:#fff!important;font-family:Georgia,serif!important}
  .essay-wrap{max-width:100%!important;padding:20mm!important}
  .print-header{display:block!important}
}
.print-header{display:none;border-bottom:2px solid #000;padding-bottom:12px;margin-bottom:24px}
.print-header h2{font-size:18pt;font-family:Georgia,serif}
.print-header p{font-size:10pt;color:#555;margin-top:4px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:640px){
  .hdr-pills{display:none}
  .main{padding:20px 16px 60px}
  .cgrid{grid-template-columns:1fr}
  .etopics{grid-template-columns:1fr}
  .score-grid{grid-template-columns:repeat(3,1fr)}
}
</style>
</head>
<body>

<!-- TOAST -->
<div class="copy-toast" id="toast">âœ“ Texto copiado!</div>

<header class="hdr">
  <div class="hdr-in">
    <div class="brand">
      <div class="brand-mark">ğŸ“š</div>
      <div>
        <div class="brand-name">UNESP Study Hub</div>
        <div class="brand-sub">Exatas & Humanidades Â· 2022</div>
      </div>
    </div>
    <div class="hdr-pills">
      <div class="pill">Cards: <b id="stCards">0/0</b></div>
      <div class="pill">Quiz: <b id="stQuiz">0%</b></div>
      <div class="pill">NÃ­vel: <b id="stDiff">Todos</b></div>
    </div>
  </div>
</header>

<nav class="nav">
  <div class="nav-in">
    <button class="nb on" onclick="goTab('flashcards')">ğŸƒ Flashcards</button>
    <button class="nb" onclick="goTab('quiz')">ğŸ¯ Quiz</button>
    <button class="nb" onclick="goTab('essay')">âœï¸ RedaÃ§Ã£o</button>
    <button class="nb" onclick="goTab('exams')">ğŸ“„ Provas</button>
    <button class="nb" onclick="goTab('stats')">ğŸ“Š Progresso</button>
  </div>
</nav>

<main class="main">
  <div id="farea"></div>
  <div class="tab active" id="tab-flashcards">
    <div class="sec-hd">
      <div class="sec-title">Flashcards de RevisÃ£o</div>
      <div class="sec-sub">Clique no card para revelar a resposta Â· Filtre por matÃ©ria e nÃ­vel</div>
    </div>
    <div id="fcprog" class="prog-strip" style="display:none"></div>
    <div class="cgrid" id="cgrid"></div>
  </div>
  <div class="tab" id="tab-quiz">
    <div class="quiz-wrap" id="qwrap"></div>
  </div>
  <div class="tab" id="tab-essay">
    <div class="essay-wrap" id="ewrap"></div>
  </div>
  <div class="tab" id="tab-exams">
    <div class="exams-wrap" id="xwrap"></div>
  </div>
  <div class="tab" id="tab-stats">
    <div id="swrap"></div>
  </div>
</main>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DADOS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const COR={Biologia:"#22c55e",QuÃ­mica:"#f0b429",FÃ­sica:"#3b82f6",MatemÃ¡tica:"#8b5cf6",Geografia:"#10b981",HistÃ³ria:"#ef4444",Literatura:"#ec4899",Filosofia:"#06b6d4",RedaÃ§Ã£o:"#a855f7",InglÃªs:"#fb923c"};

const CARDS=[
  {id:1,s:"Biologia",d:1,q:"O que Ã© G6PD e por que sua deficiÃªncia impede uso de primaquina?",a:"G6PD protege eritrÃ³citos do estresse oxidativo. Sem ela, a primaquina causa hemÃ³lise (destruiÃ§Ã£o dos glÃ³bulos vermelhos), podendo ser fatal. Portadores precisam de antimalÃ¡ricos alternativos."},
  {id:2,s:"Biologia",d:2,q:"Quais sÃ£o as 3 fases da dependÃªncia tecnolÃ³gica em adolescentes?",a:"â‘  Engajamento: uso intenso e prazeroso; â‘¡ SubstituiÃ§Ã£o: tecnologia substitui atividades reais; â‘¢ DependÃªncia: sÃ­ndrome de abstinÃªncia sem o dispositivo â€” ansiedade, irritabilidade, insÃ´nia."},
  {id:3,s:"Biologia",d:2,q:"RelaÃ§Ã£o entre pressÃ£o e velocidade do sangue nos vasos.",a:"Inversamente proporcionais. Capilares: baixa velocidade (maior Ã¡rea total) + baixa pressÃ£o â†’ troca de nutrientes. ArtÃ©rias: alta pressÃ£o + alta velocidade. Veias: baixa pressÃ£o, retorno por mÃºsculos e vÃ¡lvulas."},
  {id:4,s:"Biologia",d:1,q:"Como foi criada a almÃ´ndega de mamute em 2023?",a:"Gene da mioglobina do mamute sequenciado â†’ partes ausentes preenchidas com DNA de elefante africano â†’ gene inserido em cÃ©lula-tronco de ovelha â†’ cÃ©lulas multiplicadas em biorreator por 3 semanas."},
  {id:5,s:"Biologia",d:3,q:"Por que a radiaÃ§Ã£o ionizante causa feridas que nÃ£o cicatrizam?",a:"MutaÃ§Ãµes no DNA das cÃ©lulas epiteliais alteram o ciclo celular â†’ necrose ou transformaÃ§Ã£o neoplÃ¡sica. CÃ©lulas-tronco epidÃ©rmicas tambÃ©m danificadas impedem renovaÃ§Ã£o normal. Limiar de dose acima de 6 Gy causa sÃ­ndrome cutÃ¢nea por radiaÃ§Ã£o."},
  {id:6,s:"Biologia",d:1,q:"DiferenÃ§a fundamental entre mitose e meiose.",a:"Mitose: 1 divisÃ£o â†’ 2 cÃ©lulas idÃªnticas diploides (2n). Crescimento e reparaÃ§Ã£o. Meiose: 2 divisÃµes â†’ 4 cÃ©lulas haploides (n). FormaÃ§Ã£o de gametas. Gera variabilidade genÃ©tica por crossing-over."},
  {id:7,s:"Biologia",d:2,q:"O que Ã© fototropismo e qual hormÃ´nio o controla?",a:"Crescimento direcional em resposta Ã  luz. Auxina (AIA) acumula-se no lado nÃ£o iluminado â†’ alongamento celular â†’ curvatura em direÃ§Ã£o Ã  luz. Demonstrado por Darwin em 1880 com coleÃ³ptiles de aveia."},
  {id:8,s:"Biologia",d:3,q:"Como funciona o feedback negativo na regulaÃ§Ã£o da tireoide?",a:"HipotÃ¡lamo libera TRH â†’ HipÃ³fise libera TSH â†’ Tireoide produz T3/T4. Altos nÃ­veis de T3/T4 inibem hipotÃ¡lamo e hipÃ³fise. AnÃ¡logo a um termostato: produto final regula sua prÃ³pria sÃ­ntese."},
  {id:9,s:"Biologia",d:2,q:"O que diferencia vÃ­rus de bactÃ©rias no tratamento?",a:"VÃ­rus: sem metabolismo prÃ³prio, nÃ£o respondem a antibiÃ³ticos â†’ antivirais e vacinas. BactÃ©rias: procariotos com metabolismo prÃ³prio â†’ antibiÃ³ticos (ex: penicilina inibe sÃ­ntese de parede celular). Gripes sÃ£o virais â€” antibiÃ³ticos nÃ£o funcionam!"},
  {id:10,s:"Biologia",d:3,q:"O que Ã© epistasia e como difere de dominÃ¢ncia?",a:"DominÃ¢ncia: alelo mascara outro no mesmo locus (mesmo gene). Epistasia: gene mascara outro gene em locus diferente (genes distintos). Ex.: gene I em cÃ£es mascara gene B â€” interaÃ§Ã£o entre loci diferentes no genoma."},
  {id:11,s:"QuÃ­mica",d:1,q:"Como se forma o ozÃ´nio troposfÃ©rico (poluente)?",a:"NOâ‚‚ + luz UV â†’ NO + OÂ·; OÂ· + Oâ‚‚ â†’ Oâ‚ƒ. Poluente: irrita vias respiratÃ³rias, danifica tecido pulmonar. Diferente do ozÃ´nio estratosfÃ©rico, que nos protege da UV. Origem: combustÃ£o de veÃ­culos."},
  {id:12,s:"QuÃ­mica",d:1,q:"O que Ã© o efeito fotoelÃ©trico e por que foi revolucionÃ¡rio?",a:"EmissÃ£o de elÃ©trons de metal iluminado. Depende da FREQUÃŠNCIA (nÃ£o intensidade) da luz. Einstein explicou com fÃ³tons (E=hf) em 1905 â€” base da mecÃ¢nica quÃ¢ntica. Lhe rendeu o Nobel de 1921."},
  {id:13,s:"QuÃ­mica",d:3,q:"Por que o pH pode ser negativo? A escala 0-14 tem limite?",a:"NÃ£o tem limite fÃ­sico. pH = âˆ’log[Hâº]. Se [Hâº] > 1 mol/L (Ã¡cido concentrado), pH < 0. A escala 0-14 Ã© apenas convencional para soluÃ§Ãµes diluÃ­das (â‰ˆ25Â°C). pH de Ã¡cido sulfÃºrico concentrado â‰ˆ âˆ’1,5."},
  {id:14,s:"QuÃ­mica",d:2,q:"Por que a Pt daria 'falso positivo' no teste de dissoluÃ§Ã£o em Ã¡cido?",a:"EÂ°(Pt) = +1,20V > EÂ°(Hâº) = 0V. Como o Ã¡cido precisaria oxidar a platina, mas nÃ£o tem potencial suficiente, ela nÃ£o se dissolve. Falso positivo = nÃ£o reage, como o ouro (EÂ°=+1,50V). SÃ³ Ã¡gua rÃ©gia dissolve."},
  {id:15,s:"QuÃ­mica",d:2,q:"PrincÃ­pio de Le Chatelier: aumento de pressÃ£o com mais moles nos produtos.",a:"EquilÃ­brio desloca para o lado com MENOS moles de gÃ¡s (reagentes), reduzindo a pressÃ£o. Ex.: Nâ‚‚ + 3Hâ‚‚ â‡Œ 2NHâ‚ƒ â€” pressÃ£o alta favorece NHâ‚ƒ (2 moles < 4 moles). Base do processo Haber."},
  {id:16,s:"QuÃ­mica",d:1,q:"DiferenÃ§a entre endotÃ©rmica e exotÃ©rmica. Exemplos.",a:"ExotÃ©rmica: libera calor (Î”H < 0). Ex.: combustÃ£o, respiraÃ§Ã£o celular, fotossÃ­ntese?? nÃ£o! EndotÃ©rmica: absorve calor (Î”H > 0). Ex.: fotossÃ­ntese, fusÃ£o do gelo, cozimento do pÃ£o. Elevar T favorece a endotÃ©rmica (Le Chatelier)."},
  {id:17,s:"QuÃ­mica",d:2,q:"Como calcular moles? Exemplo com 36g de Ã¡gua.",a:"n = m/M. M(Hâ‚‚O) = 2Ã—1 + 16 = 18 g/mol. n = 36/18 = 2 mol. 2 mol = 2 Ã— 6,02Ã—10Â²Â³ = 1,204Ã—10Â²â´ molÃ©culas. Cada mol contÃ©m o nÃºmero de Avogadro de partÃ­culas."},
  {id:18,s:"QuÃ­mica",d:3,q:"Por que compostos iÃ´nicos tÃªm alto ponto de fusÃ£o?",a:"Formados por cÃ¡tions e Ã¢nions em rede cristalina (ex.: NaCl). ForÃ§as eletrostÃ¡ticas entre Ã­ons opostos sÃ£o muito intensas e omnidirecionais. Exigem muita energia para romper â€” pf NaCl = 801Â°C."},
  {id:19,s:"FÃ­sica",d:1,q:"Mistura cafÃ© (80Â°C) + leite (20Â°C), proporÃ§Ã£o 1:1. Temperatura final?",a:"50Â°C. EquilÃ­brio tÃ©rmico: mÂ·cÂ·(80âˆ’T) = mÂ·cÂ·(Tâˆ’20). Massas e calores especÃ­ficos iguais â†’ T = (80+20)/2 = 50Â°C. Se as massas fossem diferentes, nÃ£o seria a mÃ©dia simples!"},
  {id:20,s:"FÃ­sica",d:2,q:"O que Newton descobriu sobre velocidade orbital e gravidade?",a:"Para orbitar a Terra, projÃ©til precisa de velocidade tangencial v = âˆš(gÂ·R) â‰ˆ 7,9 km/s. Nessa velocidade, a queda livre curva ao redor do planeta. Acima disso: elipse/escape. Abaixo: cai. Concebeu isso em Woolsthorpe (1666)."},
  {id:21,s:"FÃ­sica",d:2,q:"No termÃ´metro de Ã³leo (M=18g, V=20cmÂ³), quando a tensÃ£o no fio se anula?",a:"Quando Empuxo = Peso: Ï_Ã³leo Ã— V Ã— g = M Ã— g â†’ Ï_Ã³leo = 18/20 = 0,90 g/cmÂ³. Pelo grÃ¡fico densidade Ã— temperatura, 0,90 g/cmÂ³ corresponde a â‰ˆ100Â°C. Nessa temperatura o objeto flutua sem tensÃ£o."},
  {id:22,s:"FÃ­sica",d:1,q:"Por que a fuligem desaparece das paredes do forno na temperatura ideal?",a:"Fuligem = carbono da combustÃ£o incompleta. Na temperatura ideal: C + Oâ‚‚ â†’ COâ‚‚(g). O carbono sÃ³lido Ã© oxidado a gÃ¡s que escapa, revelando a cor clara. Temperatura ideal = combustÃ£o completa."},
  {id:23,s:"FÃ­sica",d:3,q:"O que Ã© o efeito Doppler? Cite 3 aplicaÃ§Ãµes.",a:"VariaÃ§Ã£o de frequÃªncia percebida com movimento relativo fonte-observador. AplicaÃ§Ãµes: â‘  Radar de velocidade (polÃ­cia); â‘¡ Ecografia Doppler (fluxo sanguÃ­neo); â‘¢ Sonar; â‘£ MediÃ§Ã£o de velocidade de estrelas (desvio para vermelho)."},
  {id:24,s:"FÃ­sica",d:2,q:"DiferenÃ§a entre calor latente e calor sensÃ­vel.",a:"SensÃ­vel: Q = mÂ·cÂ·Î”T â€” muda temperatura, nÃ£o muda fase. Latente: Q = mÂ·L â€” muda fase sem alterar temperatura. Ex.: gelo a 0Â°C absorve L_fusÃ£o = 80 cal/g atÃ© fundir completamente, sem variar para 1Â°C."},
  {id:25,s:"FÃ­sica",d:3,q:"InÃ©rcia e 1Âª Lei de Newton â€” qual a diferenÃ§a entre elas?",a:"A 1Âª Lei Ã© a LEI: corpo sem forÃ§a resultante permanece em repouso ou MRU. A inÃ©rcia Ã© a PROPRIEDADE que descreve esse comportamento â€” resistÃªncia Ã  mudanÃ§a de estado. A massa Ã© a medida quantitativa da inÃ©rcia."},
  {id:26,s:"MatemÃ¡tica",d:2,q:"DiferenÃ§a de combinaÃ§Ãµes entre placas Mercosul e antigas.",a:"Mercosul: 3 letras + 1 nÃºmero + 3 letras â†’ 26Â³Ã—10Ã—26Â³ = 26â¶Ã—10. Antiga: 3 letras + 4 nÃºmeros â†’ 26Â³Ã—10â´. RazÃ£o = 26Â³/10Â³ â‰ˆ 17,6Ã—. Mercosul tem muito mais combinaÃ§Ãµes pela letra na 5Âª posiÃ§Ã£o."},
  {id:27,s:"MatemÃ¡tica",d:1,q:"O que sÃ£o nÃºmeros oblongos e qual Ã© a fÃ³rmula?",a:"Pontos arranjos em retÃ¢ngulo onde colunas = linhas + 1. FÃ³rmula: O(n) = n(n+1). SequÃªncia: 2, 6, 12, 20, 30, 42... Sempre o dobro do triangular correspondente: O(n) = 2Â·T(n)."},
  {id:28,s:"MatemÃ¡tica",d:2,q:"Prove que 210 Ã© triangular E oblongo.",a:"T(20) = 20Ã—21/2 = 210 âœ“. O(14) = 14Ã—15 = 210 âœ“. Sim! Ã‰ os dois. NÃ£o Ã© coincidÃªncia: sempre que T(n) = O(m), vale O(m) = 2Â·T(n), entÃ£o T(n) = T(n). Os pares (n,m) satisfazem a equaÃ§Ã£o de Pell."},
  {id:29,s:"MatemÃ¡tica",d:3,q:"Converta 2021 para binÃ¡rio e compare os dÃ­gitos 1 e 0.",a:"2021Ã·2 atÃ© 0: 2021=11111100101â‚‚. VerificaÃ§Ã£o: 1024+512+256+128+64+32+4+1=2021 âœ“. DÃ­gitos: sete 1s e quatro 0s. DiferenÃ§a = 7âˆ’4 = 3."},
  {id:30,s:"MatemÃ¡tica",d:1,q:"Como calcular probabilidade condicional? Exemplo UNESP Q88.",a:"P(A|B) = P(Aâˆ©B)/P(B). Q88: P(pressÃ£o elevada | excesso de peso) = P(elevada âˆ© excesso)/P(excesso) = 0,10/0,25 = 40%. Renato, com excesso de peso, tem 40% de chance de pressÃ£o elevada."},
  {id:31,s:"MatemÃ¡tica",d:3,q:"Modelo exponencial de preÃ§o de baterias (Q85 UNESP 2022).",a:"y = 15649Â·e^(âˆ’0,687x), x = anos desde introduÃ§Ã£o. Para 2020: x=5,053 â†’ y = 15649/e^3,47 â‰ˆ 100. Para 2021: x=5,053+0,443 â†’ y = 100/e^0,443 = 100/1,56 â‰ˆ US$64. A funÃ§Ã£o modela decrescimento exponencial."},
  {id:32,s:"MatemÃ¡tica",d:2,q:"FÃ³rmula e propriedade-chave dos nÃºmeros triangulares.",a:"T(n) = n(n+1)/2. T(1)=1, T(2)=3, T(3)=6... Propriedade: T(n)âˆ’T(nâˆ’1)=n. RelaÃ§Ã£o com oblongos: O(n)=2T(n). Somas de PA de razÃ£o 1 a partir de 1. T(10)=55, T(20)=210, T(100)=5050 (Gauss!)."},
  {id:33,s:"Geografia",d:1,q:"Por que o Canal de Suez Ã© estratÃ©gico para o comÃ©rcio mundial?",a:"Liga MediterrÃ¢neo ao Mar Vermelho â€” evita contornar a Ãfrica (â‰ˆ7.000km a menos, 9 dias). Passa 12% do comÃ©rcio mundial e 30% dos contÃªineres. Bloqueio de 2021 (Ever Given 6 dias) = US$9,6 bi/dia."},
  {id:34,s:"Geografia",d:2,q:"O que Ã© a Serra do Imeri e por que favorece endemismo?",a:"Serra vulcÃ¢nica no norte do AM, na fronteira com Venezuela. Isolamento geogrÃ¡fico duplo (montanhas + floresta) separa populaÃ§Ãµes â†’ especiaÃ§Ã£o alopÃ¡trica. EspÃ©cies evoluem independentemente. AltÃ­ssimo endemismo vegetal e de anfÃ­bios."},
  {id:35,s:"Geografia",d:1,q:"O que Ã© subsidÃªncia do terreno? Causa antrÃ³pica.",a:"Rebaixamento lento e gradual do solo. Causa antrÃ³pica principal: superexploraÃ§Ã£o de aquÃ­feros (retirada de Ã¡gua cria vazios que colapsam). Cidade do MÃ©xico afunda 9cm/ano; Jacarta afundou 4m em 30 anos."},
  {id:36,s:"Geografia",d:2,q:"Reservas Extrativistas: origem, criador e objetivo.",a:"Criadas por Chico Mendes (1988), assassinado em dezembro daquele ano. Permitem exploraÃ§Ã£o sustentÃ¡vel dos recursos florestais por populaÃ§Ãµes tradicionais (seringueiros, ribeirinhos, castanheiros). Conciliam conservaÃ§Ã£o e renda."},
  {id:37,s:"Geografia",d:3,q:"Meio tÃ©cnico-cientÃ­fico-informacional de Milton Santos.",a:"Ã‰poca atual da globalizaÃ§Ã£o (anos 1970+): ciÃªncia, tÃ©cnica e informaÃ§Ã£o fundem-se no territÃ³rio. No Brasil: distribuiÃ§Ã£o radicalmente desigual â€” contÃ­nua no Centro-Sul; pontual (ilhas de modernidade) no Norte e Nordeste."},
  {id:38,s:"HistÃ³ria",d:1,q:"Quem foi Antonio Conselheiro e o que foi Canudos?",a:"LÃ­der messiÃ¢nico que fundou a comunidade de Canudos (BA, 1893-97), reunindo ~30.000 pessoas marginalizadas. DestruÃ­da em 4 expediÃ§Ãµes militares da recÃ©m-proclamada RepÃºblica. Euclides da Cunha narrou em 'Os SertÃµes' (1902)."},
  {id:39,s:"HistÃ³ria",d:2,q:"Revolta dos MalÃªs (1835): o que foi e por que Ã© Ãºnica?",a:"Maior revolta urbana de escravizados das AmÃ©ricas. Salvador, BA, janeiro de 1835. Liderada por escravizados muÃ§ulmanos (os MalÃªs) alfabetizados em Ã¡rabe â€” organizaÃ§Ã£o sofisticada e sem precedentes. Planejada para o fim do RamadÃ£. Reprimida: morte, deportaÃ§Ã£o, aÃ§oite."},
  {id:40,s:"HistÃ³ria",d:1,q:"Como a Crise de 1929 transformou o liberalismo econÃ´mico?",a:"Evidenciou os limites do laissez-faire. Resultado: intervenÃ§Ã£o estatal obrigatÃ³ria â€” New Deal de Roosevelt nos EUA, polÃ­ticas keynesianas na Europa. Estado passou a regular mercados, investir em infraestrutura e garantir empregos."},
  {id:41,s:"HistÃ³ria",d:2,q:"Governo JK e o Plano de Metas â€” o que foi e qual impacto?",a:"'50 anos em 5': industrializaÃ§Ã£o acelerada com captaÃ§Ã£o de capital estrangeiro (indÃºstria automobilÃ­stica), energia (Furnas, Paulo Afonso) e construÃ§Ã£o de BrasÃ­lia (1960). Resultado: crescimento acelerado + inflaÃ§Ã£o alta + dÃ­vida externa."},
  {id:42,s:"HistÃ³ria",d:3,q:"O que a charge de Belmonte ironizava sobre a Semana de Arte Moderna de 1922?",a:"O descompasso entre vanguarda e gosto do pÃºblico burguÃªs. A charge mostra o pÃºblico olhando os artistas com pena: 'Coitados, nÃ£o? TÃ£o moÃ§os...' â€” ironia de que quem nÃ£o entendia a renovaÃ§Ã£o eram os espectadores conservadores, nÃ£o os artistas."},
  {id:43,s:"HistÃ³ria",d:2,q:"O que o texto de Proudhon representa politicamente?",a:"'A propriedade Ã© o roubo' (1840) Ã© marco do Anarquismo. Defende aboliÃ§Ã£o da propriedade privada e do Estado. Proudhon argumenta que propriedade se apropria do trabalho alheio sem justa compensaÃ§Ã£o, sendo, portanto, equivalente ao roubo."},
  {id:44,s:"HistÃ³ria",d:3,q:"Impacto demogrÃ¡fico da escravidÃ£o no RecÃ´ncavo Baiano.",a:"Escravizados chegaram a 75%+ da populaÃ§Ã£o local. Taxa de crescimento vegetativo negativo (mortes prematuras + baixa natalidade) exigia importaÃ§Ã£o constante de africanos. Com o fim do trÃ¡fico em 1850, acelerou-se a imigraÃ§Ã£o europeia para suprir a demanda."},
  {id:45,s:"Literatura",d:1,q:"'Ã‰ tempo de formar novos quilombos' (ConceiÃ§Ã£o Evaristo) â€” que figura de linguagem?",a:"MetÃ¡fora. Os quilombos representam metaforicamente a resistÃªncia e uniÃ£o coletiva contemporÃ¢nea. Sem referÃªncia literal Ã s comunidades histÃ³ricas â€” o sentido Ã© figurado. A poesia transforma um sÃ­mbolo histÃ³rico em chamado atual."},
  {id:46,s:"Literatura",d:2,q:"Em 'Dois IrmÃ£os' (Hatoum), qual Ã© o resultado da rivalidade Yaqub Ã— Omar?",a:"DesagregaÃ§Ã£o total da famÃ­lia. Os gÃªmeos â€” razÃ£o calculista (Yaqub) vs. paixÃ£o destrutiva (Omar) â€” destroem progressivamente os laÃ§os afetivos, materiais e morais. A narradora Domingas e seu filho Nael sÃ£o testemunhas da ruÃ­na."},
  {id:47,s:"Literatura",d:2,q:"Qual recurso produz efeito cÃ´mico no diÃ¡logo do burro no 'MacÃ¡rio'?",a:"Ambiguidade lexical. 'Burro' = animal de montaria E insulto. A Voz interpreta literalmente onde MacÃ¡rio usa figuradamente e vice-versa â€” gerando sÃ©rie de mal-entendidos progressivos e absurdos que beiram o teatro do absurdo."},
  {id:48,s:"Literatura",d:1,q:"Qual movimento reage ao iluminismo valorizando 'o valor supremo da experiÃªncia individual'?",a:"Romantismo (sÃ©c. XIX). Valorizava intuiÃ§Ã£o, emoÃ§Ã£o, natureza, naÃ§Ã£o e pÃ¡tria. No Brasil: GonÃ§alves Dias (indianismo), JosÃ© de Alencar (prosa), Ãlvares de Azevedo (geraÃ§Ã£o byroniana/mal do sÃ©culo)."},
  {id:49,s:"Literatura",d:3,q:"O paradoxo em 'O Sobrevivente' de Drummond â€” como se resolve?",a:"O poema declara impossÃ­vel escrever poesia no mundo mecanizado e violento â€” mas o prÃ³prio texto Ã© uma poesia existente. ContradiÃ§Ã£o que se resolve: a poesia sobrevive ao ato de declarar sua impossibilidade. O negativo se transforma em ato afirmativo."},
  {id:50,s:"Filosofia",d:2,q:"O que Ã© 'fortuna' em Maquiavel e como o prÃ­ncipe deve lidar com ela?",a:"Fortuna = acaso, eventos imprevistos, sorte. O prÃ­ncipe com virtÃ¹ (habilidade polÃ­tica) deve antecipar e adaptar-se Ã  fortuna. Maquiavel: a fortuna domina metade dos eventos â€” o homem virtuoso pode dominar a outra metade. Analogia: construir diques antes da cheia."},
  {id:51,s:"Filosofia",d:1,q:"O que Ã© o panÃ³ptico e por que Foucault o usa como metÃ¡fora do poder moderno?",a:"PrisÃ£o circular de Bentham (1791): torre central vÃª todos, ninguÃ©m sabe se estÃ¡ sendo observado â†’ auto-vigilÃ¢ncia permanente. Foucault em 'Vigiar e Punir': metÃ¡fora do poder disciplinar moderno que se replica em escolas, hospitais, fÃ¡bricas, escritÃ³rios."},
  {id:52,s:"Filosofia",d:3,q:"CrÃ­tica de PlatÃ£o Ã s artes em 'A RepÃºblica'.",a:"Artistas imitam o mundo sensÃ­vel (jÃ¡ cÃ³pia imperfeita do mundo das Ideias) â†’ arte Ã© 'cÃ³pia de cÃ³pia', trÃªs nÃ­veis abaixo da verdade. Artistas apelam Ã s emoÃ§Ãµes, contornando a razÃ£o â†’ corrompem a alma. Por isso PlatÃ£o expulsaria poetas da cidade ideal."},
  {id:53,s:"RedaÃ§Ã£o",d:1,q:"Quais sÃ£o as 5 competÃªncias do ENEM para redaÃ§Ã£o?",a:"â‘  DomÃ­nio da norma culta; â‘¡ CompreensÃ£o e desenvolvimento do tema; â‘¢ SeleÃ§Ã£o e organizaÃ§Ã£o de argumentos; â‘£ Mecanismos de coesÃ£o e coerÃªncia; â‘¤ Proposta de intervenÃ§Ã£o respeitando os Direitos Humanos."},
  {id:54,s:"RedaÃ§Ã£o",d:2,q:"O que deve ter uma proposta de intervenÃ§Ã£o completa?",a:"5 elementos obrigatÃ³rios: Agente (quem age) + AÃ§Ã£o (o que fazer) + Modo/Meio (como fazer) + Efeito esperado + Finalidade (para quÃª). Deve ser detalhada, viÃ¡vel, articulada com a tese e nÃ£o violar direitos humanos."},
  {id:55,s:"RedaÃ§Ã£o",d:3,q:"O que diferencia dissertaÃ§Ã£o-argumentativa de texto expositivo?",a:"DissertaÃ§Ã£o-argumentativa: defende ponto de vista com argumentos para convencer o leitor. Expositivo: apresenta informaÃ§Ãµes objetivamente sem tomar partido. O ENEM exige dissertaÃ§Ã£o-argumentativa com proposta de intervenÃ§Ã£o social â€” nÃ£o basta informar!"},
  {id:56,s:"InglÃªs",d:1,q:"O que significa 'keep pace' no contexto de urbanizaÃ§Ã£o?",a:"'Keep pace' = manter o ritmo, acompanhar o passo. 'Infrastructure has been unable to keep pace' = a infraestrutura nÃ£o conseguiu acompanhar o crescimento populacional. ExpressÃ£o idiomÃ¡tica frequente em textos formais ingleses."},
  {id:57,s:"InglÃªs",d:2,q:"DiferenÃ§a entre 'even though' e 'however' como conectores.",a:"'Even though' (embora): conjunÃ§Ã£o subordinativa de concessÃ£o â€” obrigatoriamente une duas oraÃ§Ãµes. 'However' (porÃ©m/entretanto): advÃ©rbio de contraste â€” liga ideias em oraÃ§Ãµes separadas ou apÃ³s ponto e vÃ­rgula. NÃ£o sÃ£o sintaticamente intercambiÃ¡veis."},
];

const QUIZ=[
  {id:1,s:"FÃ­sica",d:1,q:"MaÃ§Ã£ cai de altura h. Energia cinÃ©tica ao atingir o solo:",opts:["mgh/2","mgh","2mgh","âˆš(2gh)"],ok:1,exp:"ConservaÃ§Ã£o de energia: E. potencial (mgh) converte-se integralmente em E. cinÃ©tica. Ec = mgh.",src:"UNESP 2022"},
  {id:2,s:"Biologia",d:1,q:"InserÃ§Ã£o de gene de outra espÃ©cie em um organismo chama-se:",opts:["Clonagem","Terapia gÃªnica","Transgenia","SeleÃ§Ã£o artificial"],ok:2,exp:"Transgenia = inserÃ§Ã£o de gene de outra espÃ©cie. Ex.: gene da insulina humana em E. coli produz insulina para diabÃ©ticos.",src:"UNESP 2022 Q63"},
  {id:3,s:"HistÃ³ria",d:1,q:"Revolta dos MalÃªs (1835) distingue-se por:",opts:["Ter ocorrido no campo","Ser liderada por escravizados alfabetizados em Ã¡rabe","Ter sido bem-sucedida","Ter apoio de fazendeiros"],ok:1,exp:"Os MalÃªs eram escravizados muÃ§ulmanos que dominavam a escrita em Ã¡rabe â€” organizaÃ§Ã£o Ãºnica nas AmÃ©ricas.",src:"UNESP 2022"},
  {id:4,s:"Literatura",d:1,q:"Movimento que defende 'o valor supremo da experiÃªncia individual' contra o iluminismo:",opts:["Naturalismo","Realismo","Barroco","Romantismo"],ok:3,exp:"Romantismo (sÃ©c. XIX): intuiÃ§Ã£o, emoÃ§Ã£o, natureza e pÃ¡tria em contraposiÃ§Ã£o ao racionalismo iluminista.",src:"UNESP 2022 Q15"},
  {id:5,s:"InglÃªs",d:1,q:"'Keep pace' (Water and Urbanization) significa:",opts:["Antecipar necessidades","Manter o ritmo de progresso","Avaliar a situaÃ§Ã£o","Interferir no desenvolvimento"],ok:1,exp:"'Keep pace' = manter o ritmo. A infraestrutura urbana nÃ£o conseguiu acompanhar o crescimento populacional.",src:"UNESP 2022 Q26"},
  {id:6,s:"QuÃ­mica",d:1,q:"O efeito fotoelÃ©trico depende principalmente de:",opts:["Intensidade da luz","FrequÃªncia da luz","Massa dos elÃ©trons","Temperatura do metal"],ok:1,exp:"Einstein: emissÃ£o de elÃ©trons depende da FREQUÃŠNCIA (E=hf), nÃ£o da intensidade. Descoberta que inaugurou a mecÃ¢nica quÃ¢ntica.",src:"UNESP 2022"},
  {id:7,s:"MatemÃ¡tica",d:2,q:"O nÃºmero 210 em relaÃ§Ã£o a triangulares T(n)=n(n+1)/2 e oblongos O(n)=n(n+1):",opts:["Apenas triangular","Apenas oblongo","Triangular E oblongo","Nenhum dos dois"],ok:2,exp:"T(20)=210 âœ“ e O(14)=210 âœ“. Ã‰ ambos! RelaÃ§Ã£o: O(n) = 2Â·T(n) â€” oblongos sÃ£o sempre o dobro do triangular correspondente.",src:"UNESP 2022 Q85"},
  {id:8,s:"Biologia",d:2,q:"HemÃ¡cias + algas em Ã¡gua destilada, centrifugaÃ§Ã£o, microscÃ³pio:",opts:["SÃ³ hemÃ¡cias; soluÃ§Ã£o com clorofila","SÃ³ algas; soluÃ§Ã£o com hemoglobina","Ambas; sem molÃ©culas","Nenhuma; ambas as molÃ©culas"],ok:1,exp:"HemÃ¡cias: sem parede celular â†’ lise osmÃ³tica â†’ hemoglobina na soluÃ§Ã£o. Algas: parede rÃ­gida â†’ sobrevivem â†’ no precipitado.",src:"UNESP 2022 Q64"},
  {id:9,s:"QuÃ­mica",d:2,q:"No teste do ouro, qual material daria falso positivo?",opts:["Mg (EÂ°= âˆ’2,37V)","Al (EÂ°= âˆ’1,66V)","Fe (EÂ°= âˆ’0,44V)","Pt (EÂ°= +1,20V)"],ok:3,exp:"Falso positivo = nÃ£o se dissolve. EÂ°(Pt)=+1,20V > EÂ°(Hâº)=0V â†’ Ã¡cido nÃ£o consegue oxidar a platina, como o ouro.",src:"UNESP 2022"},
  {id:10,s:"HistÃ³ria",d:2,q:"Charge de Belmonte sobre a Semana de Arte Moderna ironiza:",opts:["O atraso da arte","InexistÃªncia de preocupaÃ§Ãµes populares","O descompasso vanguarda Ã— gosto do pÃºblico","A formaÃ§Ã£o tÃ©cnica dos artistas"],ok:2,exp:"PÃºblico olha os artistas com pena: 'Coitados, nÃ£o?'. Ironia: a incompreensÃ£o era do pÃºblico conservador, nÃ£o dos artistas.",src:"UNESP 2022 Q40"},
  {id:11,s:"FÃ­sica",d:2,q:"600g Ã¡gua 10Â°C + 100g gelo âˆ’40Â°C + 800g Ã¡gua 5Â°C. Resultado:",opts:["1500g Ã¡gua a 10Â°C","1450g Ã¡gua + 50g gelo a 0Â°C","1500g gelo a âˆ’5Â°C","1500g Ã¡gua a 0Â°C"],ok:3,exp:"Q cedido=10000cal. Q p/ aquecer gelo=2000cal + fundir tudo=8000cal=10000cal. EquilÃ­brio: 1500g Ã¡gua a 0Â°C.",src:"UNESP 2022 Q79"},
  {id:12,s:"Literatura",d:2,q:"Recurso que gera efeito cÃ´mico no diÃ¡logo do burro no 'MacÃ¡rio':",opts:["AntÃ­tese","Eufemismo","HipÃ©rbole","Ambiguidade"],ok:3,exp:"'Burro' = animal e insulto. Ambiguidade lexical gera mal-entendidos progressivos â€” recurso central do texto.",src:"UNESP 2022 Q04"},
  {id:13,s:"Biologia",d:3,q:"23 nomes populares de aves â€” taxonomicamente:",opts:["23 gÃªneros","1 Ãºnico gÃªnero","23 espÃ©cies em 1 gÃªnero","1 classe, sem inferir gÃªneros"],ok:3,exp:"Todas sÃ£o aves = mesma classe (Aves). Nomes populares â‰  nomenclatura cientÃ­fica. NÃ£o se infere nÂº de gÃªneros.",src:"UNESP 2022 Q61"},
  {id:14,s:"QuÃ­mica",d:3,q:"SiOâ‚‚ + 3C â†’ SiC + 2CO (rendimento 75%), 6t SiOâ‚‚ + 3,6t C:",opts:["5,6t SiC","4,0t SiC","3,0t SiC","2,5t SiC"],ok:2,exp:"M: SiOâ‚‚=60, C=12, SiC=40. n(SiOâ‚‚)=0,1Mmol, n(C)=0,3Mmol. ProporÃ§Ã£o correta. TeÃ³rico=4t Ã— 75%=3t.",src:"UNESP 2022 Q70"},
  {id:15,s:"FÃ­sica",d:3,q:"ForÃ§a gravitacional exoplaneta 2M1207b (5Ã—Mjup) Ã— estrela (0,025Ã—Msol) a 40 UA:",opts:["8,3Ã—10Â²â° N","5,0Ã—10Â²â° N","2,5Ã—10Â²Â¹ N","3,6Ã—10Â²Â¹ N"],ok:0,exp:"F=Gmâ‚mâ‚‚/rÂ². mâ‚=10Â²â¸kg; mâ‚‚=5Ã—10Â²â¸kg; r=6Ã—10Â¹Â²m. F=6Ã—10â»Â¹Â¹Ã—10Â²â¸Ã—5Ã—10Â²â¸/(36Ã—10Â²â´)â‰ˆ8,3Ã—10Â²â°N.",src:"UNESP 2022 Q77"},
  {id:16,s:"MatemÃ¡tica",d:3,q:"P(pressÃ£o elevada | excesso de peso) na tabela da Q88:",opts:["12%","4%","50%","40%"],ok:3,exp:"P(A|B) = P(Aâˆ©B)/P(B) = 10%/25% = 40%. Probabilidade condicional â€” nÃ£o Ã© simplesmente 10%!",src:"UNESP 2022 Q88"},
  {id:17,s:"Filosofia",d:2,q:"Norbert Elias: morte Ã© problema dos vivos porque:",opts:["Humanos antecipam a prÃ³pria morte","Mortos deixam dÃ­vidas","A morte Ã© imprevisÃ­vel","Animais tambÃ©m morrem"],ok:0,exp:"SÃ³ humanos sabem que morrerÃ£o e tomam precauÃ§Ãµes diante disso. Os mortos nÃ£o tÃªm problemas â€” sÃ³ os vivos sofrem com a perspectiva da finitude.",src:"UNESP 2022 Q11"},
  {id:18,s:"Biologia",d:2,q:"HormÃ´nio vegetal que controla o fototropismo:",opts:["Giberelina","Citocinina","Etileno","Auxina (AIA)"],ok:3,exp:"Auxina acumula no lado nÃ£o iluminado â†’ elongamento celular â†’ curvatura em direÃ§Ã£o Ã  luz. Darwin (1880) demonstrou com coleÃ³ptiles.",src:"UNESP 2022 Q66"},
];

const ESSAY_TOPICS=[
  {t:"Invisibilidade e registro civil no Brasil",tipo:"ENEM",c:"#7c5cfc",dica:"Paradoxo: sem documentos, cidadÃ£os sÃ£o invisÃ­veis ao Estado mas vulnerÃ¡veis Ã  exclusÃ£o social. Argumente sobre acesso a direitos, omissÃ£o do poder pÃºblico e soluÃ§Ãµes estruturais."},
  {t:"Viver em rede no sÃ©culo XXI",tipo:"ENEM",c:"#06b6d4",dica:"Dualidade: conectividade e acesso Ã  informaÃ§Ã£o X isolamento social, fake news e dependÃªncia tecnolÃ³gica. Evite simplificaÃ§Ãµes â€” apresente os dois lados com nuance."},
  {t:"Desigualdade de gÃªnero no trabalho de cuidado",tipo:"ENEM",c:"#ec4899",dica:"Dado: mulheres realizam 75% do trabalho de cuidado nÃ£o remunerado. Conecte com mercado de trabalho, autonomia financeira e cultura patriarcal. Use dados concretos."},
  {t:"Escassez de semicondutores e soberania tecnolÃ³gica",tipo:"FUVEST",c:"#f0b429",dica:"Taiwan produz 90% dos chips avanÃ§ados. Explore dependÃªncia tecnolÃ³gica de naÃ§Ãµes, seguranÃ§a nacional, guerra comercial EUA-China e o papel estratÃ©gico do Brasil."},
  {t:"DemocratizaÃ§Ã£o do esporte no Brasil",tipo:"FUVEST",c:"#22c55e",dica:"DivisÃ£o socioeconÃ´mica no acesso ao esporte. Relacione privatizaÃ§Ã£o do esporte infanto-juvenil com cortes em escolas pÃºblicas. Use o skate olÃ­mpico como caso de sucesso perifÃ©rico."},
  {t:"ViolÃªncia contra a mulher no Brasil",tipo:"ENEM",c:"#f43f5e",dica:"Atlas da ViolÃªncia: 1 mulher morta a cada 6h. Causas: patriarcado e dependÃªncia econÃ´mica. Proposta de intervenÃ§Ã£o completa: agente + aÃ§Ã£o + meio + efeito + finalidade."},
];

const EXAMS=[{
  id:"u22",nome:"UNESP 2022",ano:"2022",cor:"#f0b429",total:90,
  mats:["Biologia","QuÃ­mica","FÃ­sica","MatemÃ¡tica","Geografia","HistÃ³ria","Literatura","InglÃªs","Filosofia"],
  hl:"G6PD/malÃ¡ria Â· Placas Mercosul Â· Semana Arte Moderna Â· Revolta MalÃªs Â· Canal de Suez Â· PanÃ³ptico Â· BinÃ¡rio",
  qs:[
    {n:2,s:"Literatura",t:"Para MacÃ¡rio, a poesia deveria ser:",opts:["(A) Elitista â€” sÃ³ para o rico","(B) HermÃ©tica e obscura","(C) Despojada e simples","(D) Engajada politicamente","(E) Sentimental e romÃ¢ntica"],ok:0,exp:"MacÃ¡rio afirma que quando a poesia 'corria pela mÃ£o do rico ia muito bem'. Critica a popularizaÃ§Ã£o que a tornou vulgar â€” defende que ela pertenÃ§a Ã  elite."},
    {n:4,s:"Literatura",t:"Efeito cÃ´mico no diÃ¡logo do burro decorre de:",opts:["(A) AntÃ­tese","(B) Eufemismo","(C) HipÃ©rbole","(D) Ambiguidade","(E) PersonificaÃ§Ã£o"],ok:3,exp:"'Burro' = animal e insulto. Ambiguidade lexical gera sÃ©rie progressiva de mal-entendidos cÃ´micos."},
    {n:11,s:"Filosofia",t:"Segundo Norbert Elias, a morte Ã© 'problema dos vivos' porque:",opts:["(A) Humanos antecipam a prÃ³pria morte","(B) Mortos deixam dÃ­vidas","(C) A morte Ã© imprevisÃ­vel","(D) Animais nÃ£o morrem","(E) CiÃªncia nÃ£o estuda a morte"],ok:0,exp:"SÃ³ humanos sabem que morrerÃ£o e tomam precauÃ§Ãµes. Os mortos nÃ£o sofrem â€” quem sofre com a perspectiva da finitude sÃ£o os vivos."},
    {n:61,s:"Biologia",t:"23 nomes populares de aves â€” taxonomicamente pertencem a:",opts:["(A) 23 gÃªneros","(B) 1 Ãºnico gÃªnero","(C) 23 espÃ©cies em 1 gÃªnero","(D) 1 famÃ­lia, sem inferir ordens","(E) 1 classe, sem inferir gÃªneros"],ok:4,exp:"Todas sÃ£o aves = mesma classe (Aves). Nomes populares â‰  taxonomia cientÃ­fica. NÃ£o se pode inferir o nÃºmero de gÃªneros."},
    {n:85,s:"MatemÃ¡tica",t:"Sobre T(n)=n(n+1)/2 e O(n)=n(n+1), qual CORRETA?",opts:["(A) 162 Ã© o 15Âº triangular","(B) 13Âº triangular Ã© primo","(C) 156 nÃ£o Ã© nem um nem outro","(D) 210 Ã© triangular E oblongo","(E) DiferenÃ§a entre triangulares Ã© PG"],ok:3,exp:"T(20)=210 âœ“ e O(14)=210 âœ“. 210 pertence a ambas as sequÃªncias! RelaÃ§Ã£o: T(n)=O(n)/2."},
    {n:88,s:"MatemÃ¡tica",t:"Renato tem excesso de peso. P(pressÃ£o elevada)?",opts:["(A) 12%","(B) 4%","(C) 50%","(D) 40%","(E) 10%"],ok:3,exp:"P(elevada|excesso) = P(elevadaâˆ©excesso)/P(excesso) = 10%/25% = 40%. Probabilidade condicional â€” nÃ£o confunda com 10%!"},
  ]
}];

const MATS=["Todos","Biologia","QuÃ­mica","FÃ­sica","MatemÃ¡tica","Geografia","HistÃ³ria","Literatura","Filosofia","RedaÃ§Ã£o","InglÃªs"];
const TABS=["flashcards","quiz","essay","exams","stats"];

// â”€â”€ ESTADO â”€â”€
let tab="flashcards",subj="Todos",diff=0;
let flipped={},studied={};
let qIdx=0,qOk=0,qErr=0,qAns=null,qAnswered=false,qDone=false;
let eTopic=null,eFB=null,eLoad=false,eScores=null;
let xAns={};

// â”€â”€ TABS â”€â”€
function goTab(t){
  tab=t;
  document.querySelectorAll(".tab").forEach(e=>e.classList.remove("active"));
  document.querySelectorAll(".nb").forEach((b,i)=>b.classList.toggle("on",TABS[i]===t));
  document.getElementById("tab-"+t).classList.add("active");
  renderFilters();render();
}
function renderFilters(){
  const el=document.getElementById("farea");
  if(["essay","exams","stats"].includes(tab)){el.innerHTML="";return;}
  let h=`<div class="fbar"><span class="flabel">MatÃ©ria:</span>`;
  MATS.forEach(m=>{const on=subj===m,c=COR[m]||"var(--v)";
    h+=`<button class="fc${on?" on":""}" style="${on?`background:${c}22;border-color:${c};color:${c}`:""}" onclick="setSubj('${m}')">${m}</button>`;});
  h+=`</div><div class="fbar" style="margin-bottom:20px"><span class="flabel">Dificuldade:</span><div class="dbar">`;
  [["0","TODOS"],["1","â˜… FÃ¡cil"],["2","â˜…â˜… MÃ©dio"],["3","â˜…â˜…â˜… DifÃ­cil"]].forEach(([v,l])=>{
    h+=`<button class="dc${diff==v?" on":""}" data-d="${v}" onclick="setDiff(${v})">${l}</button>`;});
  h+=`</div></div>`;
  el.innerHTML=h;
}
function setSubj(s){subj=s;if(tab==="quiz")resetQuiz();renderFilters();render();}
function setDiff(d){diff=d;if(tab==="quiz")resetQuiz();renderFilters();render();}

function render(){
  const fns={flashcards:renderCards,quiz:renderQuiz,essay:renderEssay,exams:renderExams,stats:renderStats};
  fns[tab]&&fns[tab]();
  updateHdr();
}

// â”€â”€ FLASHCARDS â”€â”€
function getCards(){return CARDS.filter(c=>(subj==="Todos"||c.s===subj)&&(diff==0||c.d==diff));}
function renderCards(){
  const cards=getCards(),total=cards.length,done=cards.filter(c=>studied[c.id]).length;
  const p=document.getElementById("fcprog");p.style.display="flex";
  const pct=total?done/total*100:0;
  p.innerHTML=`<div class="ps-item"><div class="ps-label">Estudados</div><div class="ps-val" style="color:var(--ok)">${done}</div></div>
    <div class="ps-item"><div class="ps-label">Total</div><div class="ps-val">${total}</div></div>
    <div class="ps-bar-wrap"><div class="ps-label">Progresso â€” ${Math.round(pct)}%</div>
      <div class="ps-bar"><div class="ps-fill" style="width:${pct}%;background:linear-gradient(90deg,var(--ok),var(--cy))"></div></div>
    </div>`;
  if(!cards.length){document.getElementById("cgrid").innerHTML='<div class="empty">Nenhum card para esses filtros.</div>';return;}
  document.getElementById("cgrid").innerHTML=cards.map(c=>{
    const f=flipped[c.id],col=COR[c.s]||"var(--v)";
    const dt=["","â˜… FÃ¡cil","â˜…â˜… MÃ©dio","â˜…â˜…â˜… DifÃ­cil"][c.d],dc=["","d1","d2","d3"][c.d];
    return `<div class="card${f?" flip":""}" onclick="flipCard(${c.id})">
      <div class="card-top">
        <span class="stag" style="background:${col}22;color:${col}">${c.s}</span>
        <span class="dtag ${dc}">${dt}</span>
      </div>
      ${studied[c.id]?`<div class="card-check">âœ“</div>`:""}
      <p class="card-q">${c.q}</p>
      <div class="card-ans">${c.a}</div>
      <p class="card-hint">â†© Toque para revelar</p>
    </div>`;
  }).join("");
}
function flipCard(id){flipped[id]=!flipped[id];studied[id]=true;renderCards();updateHdr();}

// â”€â”€ QUIZ â”€â”€
function getQuiz(){return QUIZ.filter(q=>(subj==="Todos"||q.s===subj)&&(diff==0||q.d==diff));}
function renderQuiz(){
  const qs=getQuiz(),w=document.getElementById("qwrap");
  if(!qs.length){w.innerHTML='<div class="empty">Nenhuma questÃ£o para esses filtros.</div>';return;}
  if(qDone){
    const p=qOk/qs.length;
    w.innerHTML=`<div class="quiz-done">
      <span class="qd-emoji">${p>=.8?"ğŸ†":p>=.6?"ğŸ’ª":"ğŸ“–"}</span>
      <div class="qd-h">${p>=.8?"Excelente domÃ­nio!":p>=.6?"Bom resultado!":"Continue estudando!"}</div>
      <div class="qd-score" style="color:${p>=.7?"var(--ok)":p>=.5?"var(--go)":"var(--no)"}">${qOk}/${qs.length}</div>
      <p class="qd-p">${p>=.8?"VocÃª domina o conteÃºdo da UNESP 2022.":p>=.6?"Revise os erros e repita.":"A persistÃªncia Ã© o caminho â€” cada tentativa conta."}</p>
      <button class="btn" onclick="resetQuiz()">Tentar Novamente</button>
    </div>`;return;
  }
  const q=qs[qIdx],col=COR[q.s]||"var(--v)";
  const dt=["","â˜… FÃ¡cil","â˜…â˜… MÃ©dio","â˜…â˜…â˜… DifÃ­cil"][q.d],dc=["","d1","d2","d3"][q.d];
  const opts=q.opts.map((o,i)=>{
    let c="opt";
    if(qAnswered){if(i===q.ok)c+=" ok";else if(i===qAns&&i!==q.ok)c+=" no";}
    return `<button class="${c}" onclick="answerQ(${i})" ${qAnswered?"disabled":""}>${o}</button>`;
  }).join("");
  const exp=qAnswered?`<div class="qexp"><strong>ğŸ’¡ ExplicaÃ§Ã£o:</strong> ${q.exp}<br><small style="opacity:.55;margin-top:5px;display:block">Fonte: ${q.src}</small></div>
    <button class="btn btn-w" onclick="nextQ()">${qIdx+1>=qs.length?"Ver resultado â†’":"PrÃ³xima questÃ£o â†’"}</button>`:"";
  w.innerHTML=`
    <div class="quiz-hdr">
      <div class="qprog"><div class="qprog-fill" style="width:${qIdx/qs.length*100}%"></div></div>
      <div class="qmeta"><span>Q${qIdx+1}/${qs.length}</span><span class="q-ok">âœ“${qOk}</span><span class="q-no">âœ—${qErr}</span></div>
    </div>
    <div class="qbox">
      <div class="qbox-top">
        <div style="display:flex;gap:7px;flex-wrap:wrap">
          <span class="stag" style="background:${col}22;color:${col}">${q.s}</span>
          <span class="dtag ${dc}">${dt}</span>
        </div>
        <span class="qsrc">${q.src}</span>
      </div>
      <p class="qq">${q.q}</p>
    </div>
    <div class="opts">${opts}</div>
    <div style="margin-top:13px">${exp}</div>`;
}
function answerQ(i){if(qAnswered)return;qAns=i;qAnswered=true;if(i===getQuiz()[qIdx].ok)qOk++;else qErr++;renderQuiz();updateHdr();}
function nextQ(){const qs=getQuiz();if(qIdx+1>=qs.length)qDone=true;else{qIdx++;qAnswered=false;qAns=null;}renderQuiz();}
function resetQuiz(){qIdx=0;qOk=0;qErr=0;qAnswered=false;qDone=false;qAns=null;renderQuiz();updateHdr();}

// â”€â”€ REDAÃ‡ÃƒO â”€â”€
function renderEssay(){
  const w=document.getElementById("ewrap");
  if(!eTopic){
    w.innerHTML=`<div class="sec-hd"><div class="sec-title">PrÃ¡tica de RedaÃ§Ã£o</div>
      <div class="sec-sub">Escolha um tema, escreva, receba correÃ§Ã£o das 5 competÃªncias ENEM pela IA e exporte em PDF</div></div>
      <div class="etopics">${ESSAY_TOPICS.map((t,i)=>`
        <div class="etcard" style="--c:${t.c}" onclick="selTopic(${i})">
          <span class="et-tipo" style="color:${t.c}">${t.tipo}</span>
          <div class="et-titulo">${t.t}</div>
          <div class="et-dica">${t.dica}</div>
        </div>`).join("")}</div>`;return;
  }
  const t=eTopic;
  let fbHTML="";
  if(eLoad){fbHTML=`<div class="efb"><div class="loading-dots"><span></span><span></span><span></span></div></div>`;}
  else if(eFB){
    const scs=eScores||{c1:0,c2:0,c3:0,c4:0,c5:0,total:0};
    fbHTML=`<div class="efb">
      <div class="efb-title">ğŸ“‹ CorreÃ§Ã£o â€” 5 CompetÃªncias ENEM
        <button class="btn-out" onclick="exportFBPDF()" style="margin-left:auto">ğŸ“„ Salvar correÃ§Ã£o em PDF</button>
      </div>
      <div class="score-grid">
        <div class="score-card"><div class="score-n" style="color:${scoreColor(scs.c1,200)}">${scs.c1}/200</div><div class="score-lbl">â‘  Norma Culta</div></div>
        <div class="score-card"><div class="score-n" style="color:${scoreColor(scs.c2,200)}">${scs.c2}/200</div><div class="score-lbl">â‘¡ Tema</div></div>
        <div class="score-card"><div class="score-n" style="color:${scoreColor(scs.c3,200)}">${scs.c3}/200</div><div class="score-lbl">â‘¢ ArgumentaÃ§Ã£o</div></div>
        <div class="score-card"><div class="score-n" style="color:${scoreColor(scs.c4,200)}">${scs.c4}/200</div><div class="score-lbl">â‘£ CoesÃ£o</div></div>
        <div class="score-card"><div class="score-n" style="color:${scoreColor(scs.c5,200)}">${scs.c5}/200</div><div class="score-lbl">â‘¤ Proposta</div></div>
      </div>
      <div class="score-card" style="text-align:center;margin-bottom:18px;padding:14px">
        <div style="font-size:11px;color:var(--sub);margin-bottom:4px;font-family:'DM Mono',monospace">NOTA TOTAL</div>
        <div style="font-size:42px;font-weight:900;font-family:'DM Mono',monospace;color:${scoreColor(scs.total,1000)}">${scs.total}/1000</div>
      </div>
      <div class="efb-text">${eFB}</div>
    </div>`;
  }

  w.innerHTML=`
    <div class="print-header">
      <h2>RedaÃ§Ã£o â€” ${t.t}</h2>
      <p>Tema ${t.tipo} Â· UNESP Study Hub Â· ${new Date().toLocaleDateString('pt-BR')}</p>
    </div>
    <div class="essay-header">
      <button class="btn-out" onclick="voltarTemas()">â† Temas</button>
      <h3 style="color:${t.c};font-family:'Instrument Serif',serif;font-size:18px;flex:1">${t.t}</h3>
      <span class="dtag" style="background:${t.c}22;color:${t.c}">${t.tipo}</span>
    </div>
    <div class="tipbox"><strong>ğŸ’¡ Dica:</strong> ${t.dica}</div>
    <div class="comp5">
      <strong style="color:var(--sub);font-size:11px;margin-right:4px">5 competÃªncias:</strong>
      <span class="ctag">â‘  Norma culta</span>
      <span class="ctag">â‘¡ Tema</span>
      <span class="ctag">â‘¢ ArgumentaÃ§Ã£o</span>
      <span class="ctag">â‘£ CoesÃ£o</span>
      <span class="ctag">â‘¤ Proposta</span>
    </div>
    <textarea id="eta" placeholder="Escreva sua redaÃ§Ã£o aqui...&#10;&#10;Dica: use parÃ¡grafo de introduÃ§Ã£o + 2 argumentos + conclusÃ£o com proposta de intervenÃ§Ã£o completa." oninput="updW()">${window._etxt||""}</textarea>
    <div class="essay-toolbar">
      <span class="wc" id="wc">0 palavras Â· 0 linhas</span>
      <div class="essay-actions">
        <button class="btn-copy" onclick="copyText()">ğŸ“‹ Copiar texto</button>
        <button class="btn-pdf" onclick="savePDF()">ğŸ“„ Salvar redaÃ§Ã£o em PDF</button>
        <button class="btn" id="corrBtn" onclick="corrigir()" disabled>${eLoad?"â³ Corrigindo...":"ğŸ“ Corrigir com IA"}</button>
      </div>
    </div>
    ${fbHTML}`;
  updW();
}

function scoreColor(v,max){const p=v/max;return p>=.8?"var(--ok)":p>=.5?"var(--go)":"var(--no)";}

function updW(){
  const ta=document.getElementById("eta");if(!ta)return;
  const txt=ta.value;window._etxt=txt;
  const ws=txt.split(/\s+/).filter(Boolean).length,ls=txt.split("\n").filter(x=>x.trim()).length;
  const wc=document.getElementById("wc");if(wc)wc.textContent=`${ws} palavras Â· ${ls} linhas`;
  const btn=document.getElementById("corrBtn");
  if(btn){const ok=txt.trim().length>=80&&!eLoad;btn.disabled=!ok;btn.textContent=eLoad?"â³ Corrigindo...":"ğŸ“ Corrigir com IA";}
}
function selTopic(i){eTopic=ESSAY_TOPICS[i];eFB=null;eScores=null;window._etxt="";renderEssay();}
function voltarTemas(){eTopic=null;eFB=null;eScores=null;window._etxt="";renderEssay();}

function copyText(){
  const ta=document.getElementById("eta");if(!ta||!ta.value.trim())return;
  navigator.clipboard.writeText(ta.value).then(()=>showToast("âœ“ Texto copiado!")).catch(()=>{
    ta.select();document.execCommand("copy");showToast("âœ“ Texto copiado!");
  });
}
function showToast(msg){
  const t=document.getElementById("toast");t.textContent=msg;t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),2800);
}

function savePDF(){
  const ta=document.getElementById("eta");
  if(!ta||!ta.value.trim()){showToast("âš ï¸ Escreva a redaÃ§Ã£o primeiro!");return;}
  const titulo=eTopic?.t||"RedaÃ§Ã£o";
  const conteudo=ta.value;
  const data=new Date().toLocaleDateString('pt-BR');
  const win=window.open("","_blank","width=800,height=600");
  win.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8">
    <title>RedaÃ§Ã£o â€” ${titulo}</title>
    <style>
      body{font-family:Georgia,serif;max-width:700px;margin:40px auto;padding:40px;color:#111;line-height:1.9;font-size:14pt}
      h1{font-size:18pt;border-bottom:2px solid #111;padding-bottom:10px;margin-bottom:6px}
      .meta{color:#666;font-size:10pt;margin-bottom:30px}
      .texto{white-space:pre-wrap;text-align:justify;text-indent:2em}
      @media print{body{margin:20mm;padding:0}}
    </style></head><body>
    <h1>${titulo}</h1>
    <div class="meta">Tema ${eTopic?.tipo||""} Â· UNESP Study Hub Â· ${data}</div>
    <div class="texto">${conteudo.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div>
    <script>window.onload=function(){window.print();}<\/script>
  </body></html>`);
  win.document.close();
}

function exportFBPDF(){
  if(!eFB)return;
  const titulo=eTopic?.t||"RedaÃ§Ã£o";
  const scs=eScores||{};
  const win=window.open("","_blank","width=800,height=700");
  win.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8">
    <title>CorreÃ§Ã£o â€” ${titulo}</title>
    <style>
      body{font-family:Arial,sans-serif;max-width:700px;margin:40px auto;padding:40px;color:#111;line-height:1.75;font-size:12pt}
      h1{font-size:18pt;border-bottom:2px solid #333;padding-bottom:8px}
      .meta{color:#666;font-size:10pt;margin-bottom:24px}
      .scores{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin:20px 0}
      .sc{border:1px solid #ccc;border-radius:6px;padding:10px;text-align:center}
      .sc-n{font-size:20pt;font-weight:900}
      .sc-l{font-size:8pt;color:#666}
      .total{font-size:28pt;font-weight:900;text-align:center;border:2px solid #333;border-radius:8px;padding:14px;margin:14px 0}
      .texto{white-space:pre-wrap}
      @media print{body{margin:20mm;padding:0}}
    </style></head><body>
    <h1>CorreÃ§Ã£o de RedaÃ§Ã£o</h1>
    <div class="meta">Tema: ${titulo} Â· ${eTopic?.tipo||""} Â· ${new Date().toLocaleDateString('pt-BR')}</div>
    <div class="scores">
      <div class="sc"><div class="sc-n">${scs.c1||0}/200</div><div class="sc-l">â‘  Norma Culta</div></div>
      <div class="sc"><div class="sc-n">${scs.c2||0}/200</div><div class="sc-l">â‘¡ Tema</div></div>
      <div class="sc"><div class="sc-n">${scs.c3||0}/200</div><div class="sc-l">â‘¢ ArgumentaÃ§Ã£o</div></div>
      <div class="sc"><div class="sc-n">${scs.c4||0}/200</div><div class="sc-l">â‘£ CoesÃ£o</div></div>
      <div class="sc"><div class="sc-n">${scs.c5||0}/200</div><div class="sc-l">â‘¤ Proposta</div></div>
    </div>
    <div class="total">NOTA TOTAL: ${scs.total||0}/1000</div>
    <div class="texto">${eFB.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div>
    <script>window.onload=function(){window.print();}<\/script>
  </body></html>`);
  win.document.close();
}

async function corrigir(){
  const ta=document.getElementById("eta");
  if(!ta||ta.value.trim().length<80)return;
  eLoad=true;const txt=ta.value;renderEssay();
  try{
    const res=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1400,
        system:`VocÃª Ã© professor especialista em redaÃ§Ã£o ENEM. Avalie o texto pelas 5 competÃªncias (0-200 cada, mÃ¡x 1000). 
IMPORTANTE: Na primeira linha retorne SOMENTE os scores em JSON assim: {"c1":160,"c2":180,"c3":160,"c4":140,"c5":160,"total":800}
Depois, separe com uma linha em branco e escreva a avaliaÃ§Ã£o completa em portuguÃªs:

**C1 â€” Norma Culta: XX/200**
[comentÃ¡rio especÃ­fico sobre gramÃ¡tica, ortografia, pontuaÃ§Ã£o, concordÃ¢ncia]

**C2 â€” Desenvolvimento do Tema: XX/200**
[comentÃ¡rio sobre compreensÃ£o e desenvolvimento do tema proposto]

**C3 â€” ArgumentaÃ§Ã£o: XX/200**
[comentÃ¡rio sobre seleÃ§Ã£o de argumentos, uso de repertÃ³rio sociocultural]

**C4 â€” CoesÃ£o e CoerÃªncia: XX/200**
[comentÃ¡rio sobre conectivos, progressÃ£o textual, coerÃªncia]

**C5 â€” Proposta de IntervenÃ§Ã£o: XX/200**
[comentÃ¡rio sobre os 5 elementos: agente, aÃ§Ã£o, modo, efeito, finalidade]

âœ… **Pontos Fortes:**
- [ponto 1]
- [ponto 2]

ğŸ“Œ **A Melhorar:**
- [melhoria 1]
- [melhoria 2]

Seja construtivo, especÃ­fico e cite trechos do texto quando possÃ­vel.`,
        messages:[{role:"user",content:`Tema: "${eTopic.t}" (${eTopic.tipo})\n\nRedaÃ§Ã£o:\n${txt}`}]})});
    const data=await res.json();
    const raw=(data.content&&data.content[0]?.text)||"";
    // Extrai JSON de scores da primeira linha
    const linhas=raw.split("\n");
    let scoresJSON=null;
    for(let i=0;i<Math.min(4,linhas.length);i++){
      const l=linhas[i].trim();
      if(l.startsWith("{")){try{scoresJSON=JSON.parse(l);break;}catch(e){}}
    }
    eScores=scoresJSON||{c1:0,c2:0,c3:0,c4:0,c5:0,total:0};
    eFB=linhas.slice(scoresJSON?1:0).join("\n").trim();
    window._etxt=txt;
  }catch(e){eFB="Erro de conexÃ£o com a IA. Verifique sua internet e tente novamente.";}
  eLoad=false;renderEssay();
}

// â”€â”€ PROVAS â”€â”€
function renderExams(){
  const w=document.getElementById("xwrap");
  const pdfURL="provafase1_exatashumanas.pdf";
  let h=`<div class="pdf-hero">
    <div class="pdf-h3">ğŸ“„ UNESP 2022 â€” Prova Completa</div>
    <div class="pdf-p">90 questÃµes Â· Biologia, QuÃ­mica, FÃ­sica, MatemÃ¡tica, Geografia, HistÃ³ria, Literatura, InglÃªs, Filosofia Â· Exatas & Humanidades</div>
    <div class="pdf-acts">
      <a href="${pdfURL}" download class="pdf-gold">â¬‡ï¸ Baixar PDF</a>
      <button class="pdf-sec" onclick="togglePDF()"><span id="pdfLbl">ğŸ‘ï¸ Ver na tela</span></button>
      <a href="${pdfURL}" target="_blank" class="pdf-sec">ğŸ”— Nova aba</a>
    </div>
    <div class="pdf-viewer" id="pdfV"><iframe src="${pdfURL}" title="UNESP 2022"></iframe></div>
  </div>
  <p style="color:var(--sub);font-size:12px;margin-bottom:22px;background:var(--ink3);border:1px solid var(--line);padding:12px 16px;border-radius:10px">
    âš ï¸ Para o botÃ£o de PDF funcionar, suba o arquivo <code style="color:var(--v2)">provafase1_exatashumanas.pdf</code> no mesmo repositÃ³rio GitHub que o <code style="color:var(--v2)">index.html</code>.
  </p>
  <div class="egrid">`;
  EXAMS.forEach(ex=>{
    const qs=ex.qs.map(q=>{
      const key=ex.id+"_"+q.n,ans=xAns[key],col=COR[q.s]||"var(--v)";
      const opts=q.opts.map((o,i)=>{let c="qopt";
        if(ans!==undefined){if(i===q.ok)c+=" ok";else if(i===ans&&i!==q.ok)c+=" no";}
        return `<button class="${c}" onclick="ansExam('${key}',${i},${q.ok})" ${ans!==undefined?"disabled":""}>${o}</button>`;
      }).join("");
      return `<div class="qitem">
        <div class="qitem-top"><span class="qnum">Q${q.n}</span><span class="stag" style="background:${col}22;color:${col};font-size:10px">${q.s}</span></div>
        <p>${q.t}</p><div class="qopts">${opts}</div>
        <div class="qexp2${ans!==undefined?" show":""}" id="exp_${key}">ğŸ’¡ ${q.exp}</div>
      </div>`;}).join("");
    const tags=ex.mats.map(m=>`<span class="stag" style="background:${COR[m]||"#fff"}22;color:${COR[m]||"#fff"};font-size:10px">${m}</span>`).join("");
    h+=`<div class="exam-card">
      <div class="exam-head">
        <div><span class="ebadge">UNESP</span><h3 style="color:var(--txt);font-size:17px;margin-top:9px">${ex.nome}</h3><p style="color:var(--sub);font-size:11px;margin-top:3px">Exatas & Humanidades</p></div>
        <div class="eyear" style="color:${ex.cor}">${ex.ano}</div>
      </div>
      <div class="exam-body">
        <div class="estats">
          <div class="estat"><div class="estat-n" style="color:${ex.cor}">${ex.total}</div><div class="estat-l">questÃµes</div></div>
          <div class="estat"><div class="estat-n" style="color:${ex.cor}">${ex.mats.length}</div><div class="estat-l">matÃ©rias</div></div>
          <div class="estat"><div class="estat-n" style="color:${ex.cor}">${ex.qs.length}</div><div class="estat-l">aqui</div></div>
        </div>
        <p class="exam-hl">âœ¦ ${ex.hl}</p>
        <div class="etags">${tags}</div>
        <button class="etog" onclick="toggleExam('${ex.id}')">ğŸ“– Ver questÃµes selecionadas</button>
        <div class="eqs" id="qs_${ex.id}"><div style="margin-top:10px">${qs}</div></div>
      </div>
    </div>`;
  });
  w.innerHTML=h+`</div>`;
}
function togglePDF(){const v=document.getElementById("pdfV"),l=document.getElementById("pdfLbl"),s=v.style.display!=="block";v.style.display=s?"block":"none";l.textContent=s?"ğŸ”¼ Ocultar PDF":"ğŸ‘ï¸ Ver na tela";}
function toggleExam(id){document.getElementById("qs_"+id).classList.toggle("open");}
function ansExam(key,c,ok){
  if(xAns[key]!==undefined)return;
  xAns[key]=c;renderExams();
  setTimeout(()=>{const e=document.getElementById("exp_"+key);if(e)e.scrollIntoView({behavior:"smooth",block:"nearest"});
    const id=key.split("_")[0],el=document.getElementById("qs_"+id);if(el&&!el.classList.contains("open"))el.classList.add("open");},80);
}

// â”€â”€ PROGRESSO â”€â”€
function renderStats(){
  const w=document.getElementById("swrap");
  const tc=CARDS.length,dc=Object.keys(studied).length;
  const d1=CARDS.filter(c=>c.d===1),d2=CARDS.filter(c=>c.d===2),d3=CARDS.filter(c=>c.d===3);
  const d1d=d1.filter(c=>studied[c.id]).length,d2d=d2.filter(c=>studied[c.id]).length,d3d=d3.filter(c=>studied[c.id]).length;
  const ms={};CARDS.forEach(c=>{if(!ms[c.s])ms[c.s]={t:0,d:0};ms[c.s].t++;if(studied[c.id])ms[c.s].d++;});
  const mrows=Object.entries(ms).map(([s,v])=>{
    const col=COR[s]||"var(--v)",p=v.t?Math.round(v.d/v.t*100):0;
    return `<div class="mat-row">
      <span class="stag" style="background:${col}22;color:${col};min-width:88px;text-align:center">${s}</span>
      <div style="flex:1">
        <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--sub);margin-bottom:4px">
          <span>${v.d}/${v.t}</span><span style="color:${col};font-weight:700;font-family:'DM Mono',monospace">${p}%</span>
        </div>
        <div class="pbar"><div class="pfill" style="width:${p}%;background:${col}"></div></div>
      </div>
    </div>`;}).join("");
  const tqz=QUIZ.length,pqz=tqz?Math.round(qOk/tqz*100):0;
  w.innerHTML=`<div class="sec-hd"><div class="sec-title">Meu Progresso</div><div class="sec-sub">Acompanhe sua evoluÃ§Ã£o por matÃ©ria e nÃ­vel de dificuldade</div></div>
    <div class="stat-nums">
      <div class="sn"><div class="sn-num" style="color:var(--v2)">${dc}</div><div class="sn-lbl">Cards estudados</div><div class="sn-sub">de ${tc} total</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--ok)">${d1d}/${d1.length}</div><div class="sn-lbl">â˜… FÃ¡ceis</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--go)">${d2d}/${d2.length}</div><div class="sn-lbl">â˜…â˜… MÃ©dios</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--no)">${d3d}/${d3.length}</div><div class="sn-lbl">â˜…â˜…â˜… DifÃ­ceis</div></div>
      <div class="sn"><div class="sn-num" style="color:var(--cy)">${qOk}/${tqz}</div><div class="sn-lbl">Quiz acertos</div></div>
    </div>
    <div class="sec-hd" style="margin-top:10px"><div class="sec-title" style="font-size:16px">Por MatÃ©ria</div></div>
    <div class="mat-list">${mrows}</div>`;
}

function updateHdr(){
  const cs=getCards(),d=cs.filter(c=>studied[c.id]).length;
  document.getElementById("stCards").textContent=`${d}/${cs.length}`;
  const qs=getQuiz(),p=qs.length?Math.round(qOk/qs.length*100):0;
  document.getElementById("stQuiz").textContent=p+"%";
  document.getElementById("stDiff").textContent=["Todos","FÃ¡cil","MÃ©dio","DifÃ­cil"][diff];
}

renderFilters();render();
</script>
</body>
</html>
